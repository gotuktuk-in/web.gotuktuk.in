function VideoHandler(){var t={};return t.getVideo=function(t){return t},t}function MainService(t,e,r){var n=r;return e("",{},{getVideosList:{method:"GET",url:n+"videos",isArray:!1}})}MainService.$inject=["$q","$resource","API"],function(){"use strict";angular.module("istream",["angular-loading-bar","ngStorage","underscore","ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","toastr"]).config(["$sceDelegateProvider",function(t){t.resourceUrlWhitelist(["self","http://111.118.241.70:5051/**"])}]).config(["cfpLoadingBarProvider",function(t){t.parentSelector="#loading-bar-container",t.latencyThreshold=1}])}(),function(){"use strict";function t(){function t(t,e,r,n,i){var o=this;switch(console.log(r.$current.parent.self.name),r.current.name){case"video":o.videoPlayer=!0,o.home=!1;break;case"category":o.videoPlayer=!1,o.home=!1,o.videoPlayerCategory=!0;break;default:o.home=!0,o.videoPlayer=!1}o.relativeDate=t(o.creationDate).fromNow()}t.$inject=["moment","$rootScope","$state","$localStorage","$sessionStorage"];var e={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("istream").directive("acmeNavbar",t)}(),/**
 * @license
 * Video.js 5.10.8 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.videojs=t()}}(function(){var t;return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){(function(r){var n="undefined"!=typeof r?r:"undefined"!=typeof window?window:{},i=t("min-document");if("undefined"!=typeof document)e.exports=document;else{var o=n["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":3}],2:[function(t,e,r){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,r){},{}],4:[function(t,e,r){var n=t("../internal/getNative"),i=n(Date,"now"),o=i||function(){return(new Date).getTime()};e.exports=o},{"../internal/getNative":20}],5:[function(t,e,r){function n(t,e,r){function n(){v&&clearTimeout(v),h&&clearTimeout(h),b=0,h=v=m=void 0}function u(e,r){r&&clearTimeout(r),h=v=m=void 0,e&&(b=o(),p=t.apply(y,f),v||h||(f=y=void 0))}function l(){var t=e-(o()-g);0>=t||t>e?u(m,h):v=setTimeout(l,t)}function c(){u(T,v)}function d(){if(f=arguments,g=o(),y=this,m=T&&(v||!w),_===!1)var r=w&&!v;else{h||w||(b=g);var n=_-(g-b),i=0>=n||n>_;i?(h&&(h=clearTimeout(h)),b=g,p=t.apply(y,f)):h||(h=setTimeout(c,n))}return i&&v?v=clearTimeout(v):v||e===_||(v=setTimeout(l,e)),r&&(i=!0,p=t.apply(y,f)),!i||v||h||(f=y=void 0),p}var f,h,p,g,y,v,m,b=0,_=!1,T=!0;if("function"!=typeof t)throw new TypeError(a);if(e=0>e?0:+e||0,r===!0){var w=!0;T=!1}else i(r)&&(w=!!r.leading,_="maxWait"in r&&s(+r.maxWait||0,e),T="trailing"in r?!!r.trailing:T);return d.cancel=n,d}var i=t("../lang/isObject"),o=t("../date/now"),a="Expected a function",s=Math.max;e.exports=n},{"../date/now":4,"../lang/isObject":33}],6:[function(t,e,r){function n(t,e){if("function"!=typeof t)throw new TypeError(i);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var r=arguments,n=-1,i=o(r.length-e,0),a=Array(i);++n<i;)a[n]=r[e+n];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}var s=Array(e+1);for(n=-1;++n<e;)s[n]=r[n];return s[e]=a,t.apply(this,s)}}var i="Expected a function",o=Math.max;e.exports=n},{}],7:[function(t,e,r){function n(t,e,r){var n=!0,s=!0;if("function"!=typeof t)throw new TypeError(a);return r===!1?n=!1:o(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),i(t,e,{leading:n,maxWait:+e,trailing:s})}var i=t("./debounce"),o=t("../lang/isObject"),a="Expected a function";e.exports=n},{"../lang/isObject":33,"./debounce":5}],8:[function(t,e,r){function n(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}e.exports=n},{}],9:[function(t,e,r){function n(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}e.exports=n},{}],10:[function(t,e,r){function n(t,e,r){r||(r={});for(var n=-1,i=e.length;++n<i;){var o=e[n];r[o]=t[o]}return r}e.exports=n},{}],11:[function(t,e,r){var n=t("./createBaseFor"),i=n();e.exports=i},{"./createBaseFor":18}],12:[function(t,e,r){function n(t,e){return i(t,e,o)}var i=t("./baseFor"),o=t("../object/keysIn");e.exports=n},{"../object/keysIn":39,"./baseFor":11}],13:[function(t,e,r){function n(t,e,r,f,h){if(!u(t))return t;var p=s(e)&&(a(e)||c(e)),g=p?void 0:d(e);return i(g||e,function(i,a){if(g&&(a=i,i=e[a]),l(i))f||(f=[]),h||(h=[]),o(t,e,a,n,r,f,h);else{var s=t[a],u=r?r(s,i,a,t,e):void 0,c=void 0===u;c&&(u=i),void 0===u&&(!p||a in t)||!c&&(u===u?u===s:s!==s)||(t[a]=u)}}),t}var i=t("./arrayEach"),o=t("./baseMergeDeep"),a=t("../lang/isArray"),s=t("./isArrayLike"),u=t("../lang/isObject"),l=t("./isObjectLike"),c=t("../lang/isTypedArray"),d=t("../object/keys");e.exports=n},{"../lang/isArray":30,"../lang/isObject":33,"../lang/isTypedArray":36,"../object/keys":38,"./arrayEach":9,"./baseMergeDeep":14,"./isArrayLike":21,"./isObjectLike":26}],14:[function(t,e,r){function n(t,e,r,n,d,f,h){for(var p=f.length,g=e[r];p--;)if(f[p]==g)return void(t[r]=h[p]);var y=t[r],v=d?d(y,g,r,t,e):void 0,m=void 0===v;m&&(v=g,s(g)&&(a(g)||l(g))?v=a(y)?y:s(y)?i(y):[]:u(g)||o(g)?v=o(y)?c(y):u(y)?y:{}:m=!1),f.push(g),h.push(v),m?t[r]=n(v,g,d,f,h):(v===v?v!==y:y===y)&&(t[r]=v)}var i=t("./arrayCopy"),o=t("../lang/isArguments"),a=t("../lang/isArray"),s=t("./isArrayLike"),u=t("../lang/isPlainObject"),l=t("../lang/isTypedArray"),c=t("../lang/toPlainObject");e.exports=n},{"../lang/isArguments":29,"../lang/isArray":30,"../lang/isPlainObject":34,"../lang/isTypedArray":36,"../lang/toPlainObject":37,"./arrayCopy":8,"./isArrayLike":21}],15:[function(t,e,r){function n(t){return function(e){return null==e?void 0:i(e)[t]}}var i=t("./toObject");e.exports=n},{"./toObject":28}],16:[function(t,e,r){function n(t,e,r){if("function"!=typeof t)return i;if(void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)};case 5:return function(r,n,i,o,a){return t.call(e,r,n,i,o,a)}}return function(){return t.apply(e,arguments)}}var i=t("../utility/identity");e.exports=n},{"../utility/identity":42}],17:[function(t,e,r){function n(t){return a(function(e,r){var n=-1,a=null==e?0:r.length,s=a>2?r[a-2]:void 0,u=a>2?r[2]:void 0,l=a>1?r[a-1]:void 0;for("function"==typeof s?(s=i(s,l,5),a-=2):(s="function"==typeof l?l:void 0,a-=s?1:0),u&&o(r[0],r[1],u)&&(s=3>a?void 0:s,a=1);++n<a;){var c=r[n];c&&t(e,c,s)}return e})}var i=t("./bindCallback"),o=t("./isIterateeCall"),a=t("../function/restParam");e.exports=n},{"../function/restParam":6,"./bindCallback":16,"./isIterateeCall":24}],18:[function(t,e,r){function n(t){return function(e,r,n){for(var o=i(e),a=n(e),s=a.length,u=t?s:-1;t?u--:++u<s;){var l=a[u];if(r(o[l],l,o)===!1)break}return e}}var i=t("./toObject");e.exports=n},{"./toObject":28}],19:[function(t,e,r){var n=t("./baseProperty"),i=n("length");e.exports=i},{"./baseProperty":15}],20:[function(t,e,r){function n(t,e){var r=null==t?void 0:t[e];return i(r)?r:void 0}var i=t("../lang/isNative");e.exports=n},{"../lang/isNative":32}],21:[function(t,e,r){function n(t){return null!=t&&o(i(t))}var i=t("./getLength"),o=t("./isLength");e.exports=n},{"./getLength":19,"./isLength":25}],22:[function(t,e,r){var n=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();e.exports=n},{}],23:[function(t,e,r){function n(t,e){return t="number"==typeof t||i.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&e>t}var i=/^\d+$/,o=9007199254740991;e.exports=n},{}],24:[function(t,e,r){function n(t,e,r){if(!a(r))return!1;var n=typeof e;if("number"==n?i(r)&&o(e,r.length):"string"==n&&e in r){var s=r[e];return t===t?t===s:s!==s}return!1}var i=t("./isArrayLike"),o=t("./isIndex"),a=t("../lang/isObject");e.exports=n},{"../lang/isObject":33,"./isArrayLike":21,"./isIndex":23}],25:[function(t,e,r){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&i>=t}var i=9007199254740991;e.exports=n},{}],26:[function(t,e,r){function n(t){return!!t&&"object"==typeof t}e.exports=n},{}],27:[function(t,e,r){function n(t){for(var e=l(t),r=e.length,n=r&&t.length,c=!!n&&s(n)&&(o(t)||i(t)||u(t)),f=-1,h=[];++f<r;){var p=e[f];(c&&a(p,n)||d.call(t,p))&&h.push(p)}return h}var i=t("../lang/isArguments"),o=t("../lang/isArray"),a=t("./isIndex"),s=t("./isLength"),u=t("../lang/isString"),l=t("../object/keysIn"),c=Object.prototype,d=c.hasOwnProperty;e.exports=n},{"../lang/isArguments":29,"../lang/isArray":30,"../lang/isString":35,"../object/keysIn":39,"./isIndex":23,"./isLength":25}],28:[function(t,e,r){function n(t){if(a.unindexedChars&&o(t)){for(var e=-1,r=t.length,n=Object(t);++e<r;)n[e]=t.charAt(e);return n}return i(t)?t:Object(t)}var i=t("../lang/isObject"),o=t("../lang/isString"),a=t("../support");e.exports=n},{"../lang/isObject":33,"../lang/isString":35,"../support":41}],29:[function(t,e,r){function n(t){return o(t)&&i(t)&&s.call(t,"callee")&&!u.call(t,"callee")}var i=t("../internal/isArrayLike"),o=t("../internal/isObjectLike"),a=Object.prototype,s=a.hasOwnProperty,u=a.propertyIsEnumerable;e.exports=n},{"../internal/isArrayLike":21,"../internal/isObjectLike":26}],30:[function(t,e,r){var n=t("../internal/getNative"),i=t("../internal/isLength"),o=t("../internal/isObjectLike"),a="[object Array]",s=Object.prototype,u=s.toString,l=n(Array,"isArray"),c=l||function(t){return o(t)&&i(t.length)&&u.call(t)==a};e.exports=c},{"../internal/getNative":20,"../internal/isLength":25,"../internal/isObjectLike":26}],31:[function(t,e,r){function n(t){return i(t)&&s.call(t)==o}var i=t("./isObject"),o="[object Function]",a=Object.prototype,s=a.toString;e.exports=n},{"./isObject":33}],32:[function(t,e,r){function n(t){return null==t?!1:i(t)?d.test(l.call(t)):a(t)&&(o(t)?d:s).test(t)}var i=t("./isFunction"),o=t("../internal/isHostObject"),a=t("../internal/isObjectLike"),s=/^\[object .+?Constructor\]$/,u=Object.prototype,l=Function.prototype.toString,c=u.hasOwnProperty,d=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},{"../internal/isHostObject":22,"../internal/isObjectLike":26,"./isFunction":31}],33:[function(t,e,r){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=n},{}],34:[function(t,e,r){function n(t){var e;if(!s(t)||f.call(t)!=l||a(t)||o(t)||!d.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var r;return u.ownLast?(i(t,function(t,e,n){return r=d.call(n,e),!1}),r!==!1):(i(t,function(t,e){r=e}),void 0===r||d.call(t,r))}var i=t("../internal/baseForIn"),o=t("./isArguments"),a=t("../internal/isHostObject"),s=t("../internal/isObjectLike"),u=t("../support"),l="[object Object]",c=Object.prototype,d=c.hasOwnProperty,f=c.toString;e.exports=n},{"../internal/baseForIn":12,"../internal/isHostObject":22,"../internal/isObjectLike":26,"../support":41,"./isArguments":29}],35:[function(t,e,r){function n(t){return"string"==typeof t||i(t)&&s.call(t)==o}var i=t("../internal/isObjectLike"),o="[object String]",a=Object.prototype,s=a.toString;e.exports=n},{"../internal/isObjectLike":26}],36:[function(t,e,r){function n(t){return o(t)&&i(t.length)&&!!x[P.call(t)]}var i=t("../internal/isLength"),o=t("../internal/isObjectLike"),a="[object Arguments]",s="[object Array]",u="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",y="[object Set]",v="[object String]",m="[object WeakMap]",b="[object ArrayBuffer]",_="[object Float32Array]",T="[object Float64Array]",w="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",j="[object Uint16Array]",C="[object Uint32Array]",x={};x[_]=x[T]=x[w]=x[k]=x[E]=x[S]=x[O]=x[j]=x[C]=!0,x[a]=x[s]=x[b]=x[u]=x[l]=x[c]=x[d]=x[f]=x[h]=x[p]=x[g]=x[y]=x[v]=x[m]=!1;var A=Object.prototype,P=A.toString;e.exports=n},{"../internal/isLength":25,"../internal/isObjectLike":26}],37:[function(t,e,r){function n(t){return i(t,o(t))}var i=t("../internal/baseCopy"),o=t("../object/keysIn");e.exports=n},{"../internal/baseCopy":10,"../object/keysIn":39}],38:[function(t,e,r){var n=t("../internal/getNative"),i=t("../internal/isArrayLike"),o=t("../lang/isObject"),a=t("../internal/shimKeys"),s=t("../support"),u=n(Object,"keys"),l=u?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||("function"==typeof t?s.enumPrototypes:i(t))?a(t):o(t)?u(t):[]}:a;e.exports=l},{"../internal/getNative":20,"../internal/isArrayLike":21,"../internal/shimKeys":27,"../lang/isObject":33,"../support":41}],39:[function(t,e,r){function n(t){if(null==t)return[];c(t)||(t=Object(t));var e=t.length;e=e&&l(e)&&(a(t)||o(t)||d(t))&&e||0;for(var r=t.constructor,n=-1,i=s(r)&&r.prototype||E,h=i===t,p=Array(e),g=e>0,v=f.enumErrorProps&&(t===k||t instanceof Error),m=f.enumPrototypes&&s(t);++n<e;)p[n]=n+"";for(var _ in t)m&&"prototype"==_||v&&("message"==_||"name"==_)||g&&u(_,e)||"constructor"==_&&(h||!O.call(t,_))||p.push(_);if(f.nonEnumShadows&&t!==E){var x=t===S?T:t===k?y:j.call(t),A=C[x]||C[b];for(x==b&&(i=E),e=w.length;e--;){_=w[e];var P=A[_];h&&P||(P?!O.call(t,_):t[_]===i[_])||p.push(_)}}return p}var i=t("../internal/arrayEach"),o=t("../lang/isArguments"),a=t("../lang/isArray"),s=t("../lang/isFunction"),u=t("../internal/isIndex"),l=t("../internal/isLength"),c=t("../lang/isObject"),d=t("../lang/isString"),f=t("../support"),h="[object Array]",p="[object Boolean]",g="[object Date]",y="[object Error]",v="[object Function]",m="[object Number]",b="[object Object]",_="[object RegExp]",T="[object String]",w=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],k=Error.prototype,E=Object.prototype,S=String.prototype,O=E.hasOwnProperty,j=E.toString,C={};C[h]=C[g]=C[m]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},C[p]=C[T]={constructor:!0,toString:!0,valueOf:!0},C[y]=C[v]=C[_]={constructor:!0,toString:!0},C[b]={constructor:!0},i(w,function(t){for(var e in C)if(O.call(C,e)){var r=C[e];r[t]=O.call(r,t)}}),e.exports=n},{"../internal/arrayEach":9,"../internal/isIndex":23,"../internal/isLength":25,"../lang/isArguments":29,"../lang/isArray":30,"../lang/isFunction":31,"../lang/isObject":33,"../lang/isString":35,"../support":41}],40:[function(t,e,r){var n=t("../internal/baseMerge"),i=t("../internal/createAssigner"),o=i(n);e.exports=o},{"../internal/baseMerge":13,"../internal/createAssigner":17}],41:[function(t,e,r){var n=Array.prototype,i=Error.prototype,o=Object.prototype,a=o.propertyIsEnumerable,s=n.splice,u={};!function(t){var e=function(){this.x=t},r={0:t,length:t},n=[];e.prototype={valueOf:t,y:t};for(var o in new e)n.push(o);u.enumErrorProps=a.call(i,"message")||a.call(i,"name"),u.enumPrototypes=a.call(e,"prototype"),u.nonEnumShadows=!/valueOf/.test(n),u.ownLast="x"!=n[0],u.spliceObjects=(s.call(r,0,1),!r[0]),u.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),e.exports=u},{}],42:[function(t,e,r){function n(t){return t}e.exports=n},{}],43:[function(t,e,r){"use strict";var n=t("object-keys");e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test");if("string"==typeof e)return!1;var r=42;t[e]=r;for(e in t)return!1;if(0!==n(t).length)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==r||o.enumerable!==!0)return!1}return!0}},{"object-keys":50}],44:[function(t,e,r){"use strict";var n=t("object-keys"),i=t("function-bind"),o=function(t){return"undefined"!=typeof t&&null!==t},a=t("./hasSymbols")(),s=Object,u=i.call(Function.call,Array.prototype.push),l=i.call(Function.call,Object.prototype.propertyIsEnumerable);e.exports=function(t,e){if(!o(t))throw new TypeError("target must be an object");var r,i,c,d,f,h,p,g=s(t);for(r=1;r<arguments.length;++r){if(i=s(arguments[r]),d=n(i),a&&Object.getOwnPropertySymbols)for(f=Object.getOwnPropertySymbols(i),c=0;c<f.length;++c)p=f[c],l(i,p)&&u(d,p);for(c=0;c<d.length;++c)p=d[c],h=i[p],l(i,p)&&(g[p]=h)}return g}},{"./hasSymbols":43,"function-bind":49,"object-keys":50}],45:[function(t,e,r){"use strict";var n=t("define-properties"),i=t("./implementation"),o=t("./polyfill"),a=t("./shim");n(i,{implementation:i,getPolyfill:o,shim:a}),e.exports=i},{"./implementation":44,"./polyfill":52,"./shim":53,"define-properties":46}],46:[function(t,e,r){"use strict";var n=t("object-keys"),i=t("foreach"),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),a=Object.prototype.toString,s=function(t){return"function"==typeof t&&"[object Function]"===a.call(t)},u=function(){var t={};try{Object.defineProperty(t,"x",{enumerable:!1,value:t});for(var e in t)return!1;return t.x===t}catch(r){return!1}},l=Object.defineProperty&&u(),c=function(t,e,r,n){(!(e in t)||s(n)&&n())&&(l?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},d=function(t,e){var r=arguments.length>2?arguments[2]:{},a=n(e);o&&(a=a.concat(Object.getOwnPropertySymbols(e))),i(a,function(n){c(t,n,e[n],r[n])})};d.supportsDescriptors=!!l,e.exports=d},{foreach:47,"object-keys":50}],47:[function(t,e,r){var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString;e.exports=function(t,e,r){if("[object Function]"!==i.call(e))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var a=0;o>a;a++)e.call(r,t[a],a,t);else for(var s in t)n.call(t,s)&&e.call(r,t[s],s,t)}},{}],48:[function(t,e,r){var n="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString,a="[object Function]";e.exports=function(t){var e=this;if("function"!=typeof e||o.call(e)!==a)throw new TypeError(n+e);for(var r,s=i.call(arguments,1),u=function(){if(this instanceof r){var n=e.apply(this,s.concat(i.call(arguments)));return Object(n)===n?n:this}return e.apply(t,s.concat(i.call(arguments)))},l=Math.max(0,e.length-s.length),c=[],d=0;l>d;d++)c.push("$"+d);if(r=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),e.prototype){var f=function(){};f.prototype=e.prototype,r.prototype=new f,f.prototype=null}return r}},{}],49:[function(t,e,r){var n=t("./implementation");e.exports=Function.prototype.bind||n},{"./implementation":48}],50:[function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,a=t("./isArguments"),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),l=s.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(t){var e=t.constructor;return e&&e.prototype===t},f={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{d(window[t])}catch(e){return!0}}catch(e){return!0}return!1}(),p=function(t){if("undefined"==typeof window||!h)return d(t);try{return d(t)}catch(e){return!1}},g=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===i.call(t),o=a(t),s=e&&"[object String]"===i.call(t),d=[];if(!e&&!r&&!o)throw new TypeError("Object.keys called on a non-object");var f=l&&r;if(s&&t.length>0&&!n.call(t,0))for(var h=0;h<t.length;++h)d.push(String(h));if(o&&t.length>0)for(var g=0;g<t.length;++g)d.push(String(g));else for(var y in t)f&&"prototype"===y||!n.call(t,y)||d.push(String(y));if(u)for(var v=p(t),m=0;m<c.length;++m)v&&"constructor"===c[m]||!n.call(t,c[m])||d.push(c[m]);return d};g.shim=function(){if(Object.keys){var t=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!t){var e=Object.keys;Object.keys=function(t){return e(a(t)?o.call(t):t)}}}else Object.keys=g;return Object.keys||g},e.exports=g},{"./isArguments":51}],51:[function(t,e,r){"use strict";var n=Object.prototype.toString;e.exports=function(t){var e=n.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),r}},{}],52:[function(t,e,r){"use strict";var n=t("./implementation"),i=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var a in i)o+=a;return t!==o},o=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}};e.exports=function(){return Object.assign?i()?n:o()?n:Object.assign:n}},{"./implementation":44}],53:[function(t,e,r){"use strict";var n=t("define-properties"),i=t("./polyfill");e.exports=function(){var t=i();return n(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}},{"./polyfill":52,"define-properties":46}],54:[function(t,e,r){function n(t,e){var r,n=null;try{r=JSON.parse(t,e)}catch(i){n=i}return[n,r]}e.exports=n},{}],55:[function(t,e,r){function n(t){return t.replace(/\n\r?\s*/g,"")}e.exports=function(t){for(var e="",r=0;r<arguments.length;r++)e+=n(t[r])+(arguments[r+1]||"");return e}},{}],56:[function(t,e,r){"use strict";function n(t,e){for(var r=0;r<t.length;r++)e(t[r])}function i(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function o(t,e,r){var n=t;return d(e)?(r=e,"string"==typeof t&&(n={uri:t})):n=h(e,{uri:t}),n.callback=r,n}function a(t,e,r){return e=o(t,e,r),s(e)}function s(t){function e(){4===l.readyState&&o()}function r(){var t=void 0;if(l.response?t=l.response:"text"!==l.responseType&&l.responseType||(t=l.responseText||l.responseXML),_)try{t=JSON.parse(t)}catch(e){}return t}function n(t){clearTimeout(p),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,s(t,u)}function o(){if(!h){var e;clearTimeout(p),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var n=u,i=null;0!==e?(n={body:r(),statusCode:e,method:y,headers:{},url:g,rawRequest:l},l.getAllResponseHeaders&&(n.headers=f(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),s(i,n,n.body)}}var s=t.callback;if("undefined"==typeof s)throw new Error("callback argument missing");s=c(s);var u={body:void 0,headers:{},statusCode:0,method:y,url:g,rawRequest:l},l=t.xhr||null;l||(l=t.cors||t.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var d,h,p,g=l.url=t.uri||t.url,y=l.method=t.method||"GET",v=t.body||t.data||null,m=l.headers=t.headers||{},b=!!t.sync,_=!1;if("json"in t&&(_=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==y&&"HEAD"!==y&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),v=JSON.stringify(t.json))),l.onreadystatechange=e,l.onload=o,l.onerror=n,l.onprogress=function(){},l.ontimeout=n,l.open(y,g,!b,t.username,t.password),b||(l.withCredentials=!!t.withCredentials),!b&&t.timeout>0&&(p=setTimeout(function(){h=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",n(t)},t.timeout)),l.setRequestHeader)for(d in m)m.hasOwnProperty(d)&&l.setRequestHeader(d,m[d]);else if(t.headers&&!i(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(l),l.send(v),l}function u(){}var l=t("global/window"),c=t("once"),d=t("is-function"),f=t("parse-headers"),h=t("xtend");e.exports=a,a.XMLHttpRequest=l.XMLHttpRequest||u,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:l.XDomainRequest,n(["get","put","post","patch","head","delete"],function(t){a["delete"===t?"del":t]=function(e,r,n){return r=o(e,r,n),r.method=t.toUpperCase(),s(r)}})},{"global/window":2,"is-function":57,once:58,"parse-headers":61,xtend:62}],57:[function(t,e,r){function n(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}e.exports=n;var i=Object.prototype.toString},{}],58:[function(t,e,r){function n(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}e.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],59:[function(t,e,r){function n(t,e,r){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===u.call(t)?i(t,e,r):"string"==typeof t?o(t,e,r):a(t,e,r)}function i(t,e,r){for(var n=0,i=t.length;i>n;n++)l.call(t,n)&&e.call(r,t[n],n,t)}function o(t,e,r){for(var n=0,i=t.length;i>n;n++)e.call(r,t.charAt(n),n,t)}function a(t,e,r){for(var n in t)l.call(t,n)&&e.call(r,t[n],n,t)}var s=t("is-function");e.exports=n;var u=Object.prototype.toString,l=Object.prototype.hasOwnProperty},{"is-function":57}],60:[function(t,e,r){function n(t){return t.replace(/^\s*|\s*$/g,"")}r=e.exports=n,r.left=function(t){return t.replace(/^\s*/,"")},r.right=function(t){return t.replace(/\s*$/,"")}},{}],61:[function(t,e,r){var n=t("trim"),i=t("for-each"),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t){if(!t)return{};var e={};return i(n(t).split("\n"),function(t){var r=t.indexOf(":"),i=n(t.slice(0,r)).toLowerCase(),a=n(t.slice(r+1));"undefined"==typeof e[i]?e[i]=a:o(e[i])?e[i].push(a):e[i]=[e[i],a]}),e}},{"for-each":59,trim:60}],62:[function(t,e,r){function n(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)i.call(r,n)&&(t[n]=r[n])}return t}e.exports=n;var i=Object.prototype.hasOwnProperty},{}],63:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./button.js"),s=n(a),u=t("./component.js"),l=n(u),c=function(t){function e(r,n){i(this,e),t.call(this,r,n)}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-big-play-button"},e.prototype.handleClick=function(){this.player_.play()},e}(s["default"]);c.prototype.controlText_="Play Video",l["default"].registerComponent("BigPlayButton",c),r["default"]=c,e.exports=r["default"]},{"./button.js":64,"./component.js":67}],64:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./clickable-component.js"),u=i(s),l=t("./component"),c=i(l),d=t("./utils/events.js"),f=(n(d),t("./utils/fn.js")),h=(n(f),t("./utils/log.js")),p=i(h),g=t("global/document"),y=(i(g),t("object.assign")),v=i(y),m=function(t){function e(r,n){o(this,e),t.call(this,r,n)}return a(e,t),e.prototype.createEl=function(){var t=arguments.length<=0||void 0===arguments[0]?"button":arguments[0],e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];e=v["default"]({className:this.buildCSSClass()},e),"button"!==t&&(p["default"].warn("Creating a Button with an HTML element of "+t+" is deprecated; use ClickableComponent instead."),e=v["default"]({tabIndex:0},e),r=v["default"]({role:"button"},r)),r=v["default"]({type:"button","aria-live":"polite"},r);var n=c["default"].prototype.createEl.call(this,t,e,r);return this.createControlTextEl(n),n},e.prototype.addChild=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=this.constructor.name;return p["default"].warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead."),c["default"].prototype.addChild.call(this,t,e)},e.prototype.handleKeyPress=function(e){32===e.which||13===e.which||t.prototype.handleKeyPress.call(this,e)},e}(u["default"]);c["default"].registerComponent("Button",m),r["default"]=m,e.exports=r["default"]},{"./clickable-component.js":65,"./component":67,"./utils/events.js":144,"./utils/fn.js":145,"./utils/log.js":148,"global/document":1,"object.assign":45}],65:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./component"),u=i(s),l=t("./utils/dom.js"),c=n(l),d=t("./utils/events.js"),f=n(d),h=t("./utils/fn.js"),p=n(h),g=t("./utils/log.js"),y=i(g),v=t("global/document"),m=i(v),b=t("object.assign"),_=i(b),T=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.emitTapEvents(),this.on("tap",this.handleClick),this.on("click",this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur)}return a(e,t),e.prototype.createEl=function(){var e=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];r=_["default"]({className:this.buildCSSClass(),tabIndex:0},r),"button"===e&&y["default"].error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=_["default"]({role:"button","aria-live":"polite"},n);var i=t.prototype.createEl.call(this,e,r,n);return this.createControlTextEl(i),i},e.prototype.createControlTextEl=function(t){return this.controlTextEl_=c.createEl("span",{className:"vjs-control-text"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_),this.controlTextEl_},e.prototype.controlText=function(t){return t?(this.controlText_=t,this.controlTextEl_.innerHTML=this.localize(this.controlText_),this):this.controlText_||"Need Text"},e.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},e.prototype.addChild=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.prototype.addChild.call(this,e,r)},e.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),this},e.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),this},e.prototype.handleClick=function(){},e.prototype.handleFocus=function(){f.on(m["default"],"keydown",p.bind(this,this.handleKeyPress))},e.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),
this.handleClick(e)):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,e)},e.prototype.handleBlur=function(){f.off(m["default"],"keydown",p.bind(this,this.handleKeyPress))},e}(u["default"]);u["default"].registerComponent("ClickableComponent",T),r["default"]=T,e.exports=r["default"]},{"./component":67,"./utils/dom.js":143,"./utils/events.js":144,"./utils/fn.js":145,"./utils/log.js":148,"global/document":1,"object.assign":45}],66:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./button"),s=n(a),u=t("./component"),l=n(u),c=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.controlText(n&&n.controlText||this.localize("Close"))}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(){this.trigger({type:"close",bubbles:!1})},e}(s["default"]);l["default"].registerComponent("CloseButton",c),r["default"]=c,e.exports=r["default"]},{"./button":64,"./component":67}],67:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=t("global/window"),s=i(a),u=t("./utils/dom.js"),l=n(u),c=t("./utils/fn.js"),d=n(c),f=t("./utils/guid.js"),h=n(f),p=t("./utils/events.js"),g=n(p),y=t("./utils/log.js"),v=i(y),m=t("./utils/to-title-case.js"),b=i(m),_=t("object.assign"),T=i(_),w=t("./utils/merge-options.js"),k=i(w),E=function(){function t(e,r,n){if(o(this,t),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=k["default"]({},this.options_),r=this.options_=k["default"](this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+h.newGUID()}this.name_=r.name||null,r.el?this.el_=r.el:r.createEl!==!1&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},r.initChildren!==!1&&this.initChildren(),this.ready(n),r.reportTouchActivity!==!1&&this.enableTouchActivity()}return t.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),l.removeElData(this.el_),this.el_=null},t.prototype.player=function(){return this.player_},t.prototype.options=function(t){return v["default"].warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),t?(this.options_=k["default"](this.options_,t),this.options_):this.options_},t.prototype.el=function(){return this.el_},t.prototype.createEl=function(t,e,r){return l.createEl(t,e,r)},t.prototype.localize=function(t){var e=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages();if(!e||!r)return t;var n=r[e];if(n&&n[t])return n[t];var i=e.split("-")[0],o=r[i];return o&&o[t]?o[t]:t},t.prototype.contentEl=function(){return this.contentEl_||this.el_},t.prototype.id=function(){return this.id_},t.prototype.name=function(){return this.name_},t.prototype.children=function(){return this.children_},t.prototype.getChildById=function(t){return this.childIndex_[t]},t.prototype.getChild=function(t){return this.childNameIndex_[t]},t.prototype.addChild=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?this.children_.length:arguments[2],i=void 0,o=void 0;if("string"==typeof e){o=e,r||(r={}),r===!0&&(v["default"].warn("Initializing a child component with `true` is deprecated. Children should be defined in an array when possible, but if necessary use an object instead of `true`."),r={});var a=r.componentClass||b["default"](o);r.name=o;var s=t.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,r)}else i=e;if(this.children_.splice(n,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),o=o||i.name&&i.name(),o&&(this.childNameIndex_[o]=i),"function"==typeof i.el&&i.el()){var u=this.contentEl().children,l=u[n]||null;this.contentEl().insertBefore(i.el(),l)}return i},t.prototype.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,r=this.children_.length-1;r>=0;r--)if(this.children_[r]===t){e=!0,this.children_.splice(r,1);break}if(e){this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null;var n=t.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},t.prototype.initChildren=function(){var e=this,r=this.options_.children;r&&!function(){var n=e.options_,i=function(t){var r=t.name,i=t.opts;if(void 0!==n[r]&&(i=n[r]),i!==!1){i===!0&&(i={}),i.playerOptions=e.options_.playerOptions;var o=e.addChild(r,i);o&&(e[r]=o)}},o=void 0,a=t.getComponent("Tech");o=Array.isArray(r)?r:Object.keys(r),o.concat(Object.keys(e.options_).filter(function(t){return!o.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(t){var n=void 0,i=void 0;return"string"==typeof t?(n=t,i=r[n]||e.options_[n]||{}):(n=t.name,i=t),{name:n,opts:i}}).filter(function(e){var r=t.getComponent(e.opts.componentClass||b["default"](e.name));return r&&!a.isTech(r)}).forEach(i)}()},t.prototype.buildCSSClass=function(){return""},t.prototype.on=function(t,e,r){var n=this;return"string"==typeof t||Array.isArray(t)?g.on(this.el_,t,d.bind(this,e)):!function(){var i=t,o=e,a=d.bind(n,r),s=function(){return n.off(i,o,a)};s.guid=a.guid,n.on("dispose",s);var u=function(){return n.off("dispose",s)};u.guid=a.guid,t.nodeName?(g.on(i,o,a),g.on(i,"dispose",u)):"function"==typeof t.on&&(i.on(o,a),i.on("dispose",u))}(),this},t.prototype.off=function(t,e,r){if(!t||"string"==typeof t||Array.isArray(t))g.off(this.el_,t,e);else{var n=t,i=e,o=d.bind(this,r);this.off("dispose",o),t.nodeName?(g.off(n,i,o),g.off(n,"dispose",o)):(n.off(i,o),n.off("dispose",o))}return this},t.prototype.one=function(t,e,r){var n=this,i=arguments;return"string"==typeof t||Array.isArray(t)?g.one(this.el_,t,d.bind(this,e)):!function(){var o=t,a=e,s=d.bind(n,r),u=function l(){n.off(o,a,l),s.apply(null,i)};u.guid=s.guid,n.on(o,a,u)}(),this},t.prototype.trigger=function(t,e){return g.trigger(this.el_,t,e),this},t.prototype.ready=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return t&&(this.isReady_?e?t.call(this):this.setTimeout(t,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(t))),this},t.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},t.prototype.$=function(t,e){return l.$(t,e||this.contentEl())},t.prototype.$$=function(t,e){return l.$$(t,e||this.contentEl())},t.prototype.hasClass=function(t){return l.hasElClass(this.el_,t)},t.prototype.addClass=function(t){return l.addElClass(this.el_,t),this},t.prototype.removeClass=function(t){return l.removeElClass(this.el_,t),this},t.prototype.toggleClass=function(t,e){return l.toggleElClass(this.el_,t,e),this},t.prototype.show=function(){return this.removeClass("vjs-hidden"),this},t.prototype.hide=function(){return this.addClass("vjs-hidden"),this},t.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},t.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},t.prototype.width=function(t,e){return this.dimension("width",t,e)},t.prototype.height=function(t,e){return this.dimension("height",t,e)},t.prototype.dimensions=function(t,e){return this.width(t,!0).height(e)},t.prototype.dimension=function(t,e,r){if(void 0!==e)return(null===e||e!==e)&&(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:"auto"===e?this.el_.style[t]="":this.el_.style[t]=e+"px",r||this.trigger("resize"),this;if(!this.el_)return 0;var n=this.el_.style[t],i=n.indexOf("px");return-1!==i?parseInt(n.slice(0,i),10):parseInt(this.el_["offset"+b["default"](t)],10)},t.prototype.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if("function"==typeof s["default"].getComputedStyle){var r=s["default"].getComputedStyle(this.el_);e=r.getPropertyValue(t)||r[t]}else if(this.el_.currentStyle){var n="offset"+b["default"](t);e=this.el_[n]}return e=parseFloat(e)},t.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.prototype.currentWidth=function(){return this.currentDimension("width")},t.prototype.currentHeight=function(){return this.currentDimension("height")},t.prototype.emitTapEvents=function(){var t=0,e=null,r=10,n=200,i=void 0;this.on("touchstart",function(r){1===r.touches.length&&(e=T["default"]({},r.touches[0]),t=(new Date).getTime(),i=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)i=!1;else if(e){var n=t.touches[0].pageX-e.pageX,o=t.touches[0].pageY-e.pageY,a=Math.sqrt(n*n+o*o);a>r&&(i=!1)}});var o=function(){i=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(r){if(e=null,i===!0){var o=(new Date).getTime()-t;n>o&&(r.preventDefault(),this.trigger("tap"))}})},t.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t=d.bind(this.player(),this.player().reportUserActivity),e=void 0;this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var r=function(r){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",r),this.on("touchcancel",r)}},t.prototype.setTimeout=function(t,e){t=d.bind(this,t);var r=s["default"].setTimeout(t,e),n=function(){this.clearTimeout(r)};return n.guid="vjs-timeout-"+r,this.on("dispose",n),r},t.prototype.clearTimeout=function(t){s["default"].clearTimeout(t);var e=function(){};return e.guid="vjs-timeout-"+t,this.off("dispose",e),t},t.prototype.setInterval=function(t,e){t=d.bind(this,t);var r=s["default"].setInterval(t,e),n=function(){this.clearInterval(r)};return n.guid="vjs-interval-"+r,this.on("dispose",n),r},t.prototype.clearInterval=function(t){s["default"].clearInterval(t);var e=function(){};return e.guid="vjs-interval-"+t,this.off("dispose",e),t},t.registerComponent=function(e,r){return t.components_||(t.components_={}),t.components_[e]=r,r},t.getComponent=function(e){return t.components_&&t.components_[e]?t.components_[e]:s["default"]&&s["default"].videojs&&s["default"].videojs[e]?(v["default"].warn("The "+e+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),s["default"].videojs[e]):void 0},t.extend=function(e){e=e||{},v["default"].warn("Component.extend({}) has been deprecated, use videojs.extend(Component, {}) instead");var r=e.init||e.init||this.prototype.init||this.prototype.init||function(){},n=function(){r.apply(this,arguments)};n.prototype=Object.create(this.prototype),n.prototype.constructor=n,n.extend=t.extend;for(var i in e)e.hasOwnProperty(i)&&(n.prototype[i]=e[i]);return n},t}();E.registerComponent("Component",E),r["default"]=E,e.exports=r["default"]},{"./utils/dom.js":143,"./utils/events.js":144,"./utils/fn.js":145,"./utils/guid.js":147,"./utils/log.js":148,"./utils/merge-options.js":149,"./utils/to-title-case.js":152,"global/window":2,"object.assign":45}],68:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../track-button.js"),u=i(s),l=t("../../component.js"),c=i(l),d=t("../../utils/fn.js"),f=(n(d),t("./audio-track-menu-item.js")),h=i(f),p=function(t){function e(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),n.tracks=r.audioTracks&&r.audioTracks(),t.call(this,r,n),this.el_.setAttribute("aria-label","Audio Menu")}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},e.prototype.createItems=function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],e=this.player_.audioTracks&&this.player_.audioTracks();if(!e)return t;for(var r=0;r<e.length;r++){var n=e[r];t.push(new h["default"](this.player_,{selectable:!0,track:n}))}return t},e}(u["default"]);c["default"].registerComponent("AudioTrackButton",p),r["default"]=p,e.exports=r["default"]},{"../../component.js":67,"../../utils/fn.js":145,"../track-button.js":98,"./audio-track-menu-item.js":69}],69:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../menu/menu-item.js"),u=i(s),l=t("../../component.js"),c=i(l),d=t("../../utils/fn.js"),f=n(d),h=function(t){function e(r,n){var i=this;o(this,e);var a=n.track,s=r.audioTracks();n.label=a.label||a.language||"Unknown",n.selected=a.enabled,t.call(this,r,n),this.track=a,s&&!function(){var t=f.bind(i,i.handleTracksChange);s.addEventListener("change",t),i.on("dispose",function(){s.removeEventListener("change",t)})}()}return a(e,t),e.prototype.handleClick=function(e){var r=this.player_.audioTracks();if(t.prototype.handleClick.call(this,e),r)for(var n=0;n<r.length;n++){var i=r[n];i===this.track&&(i.enabled=!0)}},e.prototype.handleTracksChange=function(t){this.selected(this.track.enabled)},e}(u["default"]);c["default"].registerComponent("AudioTrackMenuItem",h),r["default"]=h,e.exports=r["default"]},{"../../component.js":67,"../../menu/menu-item.js":110,"../../utils/fn.js":145}],70:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../component.js"),s=n(a),u=t("./play-toggle.js"),l=(n(u),t("./time-controls/current-time-display.js")),c=(n(l),t("./time-controls/duration-display.js")),d=(n(c),t("./time-controls/time-divider.js")),f=(n(d),t("./time-controls/remaining-time-display.js")),h=(n(f),t("./live-display.js")),p=(n(h),t("./progress-control/progress-control.js")),g=(n(p),t("./fullscreen-toggle.js")),y=(n(g),t("./volume-control/volume-control.js")),v=(n(y),t("./volume-menu-button.js")),m=(n(v),t("./mute-toggle.js")),b=(n(m),t("./text-track-controls/chapters-button.js")),_=(n(b),t("./text-track-controls/descriptions-button.js")),T=(n(_),t("./text-track-controls/subtitles-button.js")),w=(n(T),t("./text-track-controls/captions-button.js")),k=(n(w),t("./audio-track-controls/audio-track-button.js")),E=(n(k),t("./playback-rate-menu/playback-rate-menu-button.js")),S=(n(E),t("./spacer-controls/custom-control-spacer.js")),O=(n(S),function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},e}(s["default"]));O.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},s["default"].registerComponent("ControlBar",O),r["default"]=O,e.exports=r["default"]},{"../component.js":67,"./audio-track-controls/audio-track-button.js":68,"./fullscreen-toggle.js":71,"./live-display.js":72,"./mute-toggle.js":73,"./play-toggle.js":74,"./playback-rate-menu/playback-rate-menu-button.js":75,"./progress-control/progress-control.js":80,"./spacer-controls/custom-control-spacer.js":83,"./text-track-controls/captions-button.js":86,"./text-track-controls/chapters-button.js":87,"./text-track-controls/descriptions-button.js":89,"./text-track-controls/subtitles-button.js":91,"./time-controls/current-time-display.js":94,"./time-controls/duration-display.js":95,"./time-controls/remaining-time-display.js":96,"./time-controls/time-divider.js":97,"./volume-control/volume-control.js":100,"./volume-menu-button.js":102}],71:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../button.js"),s=n(a),u=t("../component.js"),l=n(u),c=function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(){this.player_.isFullscreen()?(this.player_.exitFullscreen(),this.controlText("Fullscreen")):(this.player_.requestFullscreen(),this.controlText("Non-Fullscreen"))},e}(s["default"]);c.prototype.controlText_="Fullscreen",l["default"].registerComponent("FullscreenToggle",c),r["default"]=c,e.exports=r["default"]},{"../button.js":64,"../component.js":67}],72:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../component"),u=i(s),l=t("../utils/dom.js"),c=n(l),d=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.updateShowing(),this.on(this.player(),"durationchange",this.updateShowing)}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateShowing=function(){this.player().duration()===1/0?this.show():this.hide()},e}(u["default"]);u["default"].registerComponent("LiveDisplay",d),r["default"]=d,e.exports=r["default"]},{"../component":67,"../utils/dom.js":143}],73:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../button"),u=i(s),l=t("../component"),c=i(l),d=t("../utils/dom.js"),f=n(d),h=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.on(r,"volumechange",this.update),r.tech_&&r.tech_.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(r,"loadstart",function(){this.update(),r.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(){this.player_.muted(this.player_.muted()?!1:!0)},e.prototype.update=function(){var t=this.player_.volume(),e=3;0===t||this.player_.muted()?e=0:.33>t?e=1:.67>t&&(e=2);var r=this.player_.muted()?"Unmute":"Mute";this.controlText()!==r&&this.controlText(r);for(var n=0;4>n;n++)f.removeElClass(this.el_,"vjs-vol-"+n);f.addElClass(this.el_,"vjs-vol-"+e)},e}(u["default"]);h.prototype.controlText_="Mute",c["default"].registerComponent("MuteToggle",h),r["default"]=h,e.exports=r["default"]},{"../button":64,"../component":67,"../utils/dom.js":143}],74:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../button.js"),s=n(a),u=t("../component.js"),l=n(u),c=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.on(r,"play",this.handlePlay),this.on(r,"pause",this.handlePause)}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},e.prototype.handlePlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},e.prototype.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},e}(s["default"]);c.prototype.controlText_="Play",l["default"].registerComponent("PlayToggle",c),r["default"]=c,e.exports=r["default"]},{"../button.js":64,"../component.js":67}],75:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../menu/menu-button.js"),u=i(s),l=t("../../menu/menu.js"),c=i(l),d=t("./playback-rate-menu-item.js"),f=i(d),h=t("../../component.js"),p=i(h),g=t("../../utils/dom.js"),y=n(g),v=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.updateVisibility(),this.updateLabel(),this.on(r,"loadstart",this.updateVisibility),this.on(r,"ratechange",this.updateLabel)}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this);return this.labelEl_=y.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),e.appendChild(this.labelEl_),e},e.prototype.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},e.prototype.createMenu=function(){var t=new c["default"](this.player()),e=this.playbackRates();if(e)for(var r=e.length-1;r>=0;r--)t.addChild(new f["default"](this.player(),{rate:e[r]+"x"}));return t},e.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},e.prototype.handleClick=function(){for(var t=this.player().playbackRate(),e=this.playbackRates(),r=e[0],n=0;n<e.length;n++)if(e[n]>t){r=e[n];break}this.player().playbackRate(r)},e.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},e.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},e.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},e.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(u["default"]);v.prototype.controlText_="Playback Rate",p["default"].registerComponent("PlaybackRateMenuButton",v),r["default"]=v,e.exports=r["default"]},{"../../component.js":67,"../../menu/menu-button.js":109,"../../menu/menu.js":111,"../../utils/dom.js":143,"./playback-rate-menu-item.js":76}],76:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../menu/menu-item.js"),s=n(a),u=t("../../component.js"),l=n(u),c=function(t){function e(r,n){i(this,e);var o=n.rate,a=parseFloat(o,10);n.label=o,n.selected=1===a,t.call(this,r,n),this.label=o,this.rate=a,this.on(r,"ratechange",this.update)}return o(e,t),e.prototype.handleClick=function(){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},e.prototype.update=function(){this.selected(this.player().playbackRate()===this.rate)},e}(s["default"]);c.prototype.contentElType="button",l["default"].registerComponent("PlaybackRateMenuItem",c),r["default"]=c,e.exports=r["default"]},{"../../component.js":67,"../../menu/menu-item.js":110}],77:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../component.js"),u=i(s),l=t("../../utils/dom.js"),c=n(l),d=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.on(r,"progress",this.update)}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},e.prototype.update=function(){var t=this.player_.buffered(),e=this.player_.duration(),r=this.player_.bufferedEnd(),n=this.el_.children,i=function(t,e){var r=t/e||0;return 100*(r>=1?1:r)+"%"};this.el_.style.width=i(r,e);for(var o=0;o<t.length;o++){var a=t.start(o),s=t.end(o),u=n[o];u||(u=this.el_.appendChild(c.createEl())),u.style.left=i(a,r),u.style.width=i(s-a,r)}for(var o=n.length;o>t.length;o--)this.el_.removeChild(n[o-1])},e}(u["default"]);u["default"].registerComponent("LoadProgressBar",d),r["default"]=d,e.exports=r["default"]},{"../../component.js":67,"../../utils/dom.js":143}],78:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("global/window"),u=i(s),l=t("../../component.js"),c=i(l),d=t("../../utils/dom.js"),f=n(d),h=t("../../utils/fn.js"),p=n(h),g=t("../../utils/format-time.js"),y=i(g),v=t("lodash-compat/function/throttle"),m=i(v),b=function(t){function e(r,n){var i=this;o(this,e),t.call(this,r,n),n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltip=f.createEl("div",{className:"vjs-time-tooltip"}),this.el().appendChild(this.tooltip),this.addClass("vjs-keep-tooltips-inside")),this.update(0,0),r.on("ready",function(){i.on(r.controlBar.progressControl.el(),"mousemove",m["default"](p.bind(i,i.handleMouseMove),25))})}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},e.prototype.handleMouseMove=function(t){var e=this.player_.duration(),r=this.calculateDistance(t)*e,n=t.pageX-f.findElPosition(this.el().parentNode).left;this.update(r,n)},e.prototype.update=function(t,e){var r=y["default"](t,this.player_.duration());if(this.el().style.left=e+"px",this.el().setAttribute("data-current-time",r),this.keepTooltipsInside){var n=this.clampPosition_(e),i=e-n+1,o=parseFloat(u["default"].getComputedStyle(this.tooltip).width),a=o/2;this.tooltip.innerHTML=r,this.tooltip.style.right="-"+(a-i)+"px"}},e.prototype.calculateDistance=function(t){return f.getPointerPosition(this.el().parentNode,t).x},e.prototype.clampPosition_=function(t){if(!this.keepTooltipsInside)return t;var e=parseFloat(u["default"].getComputedStyle(this.player().el()).width),r=parseFloat(u["default"].getComputedStyle(this.tooltip).width),n=r/2,i=t;return n>t?i=Math.ceil(n):t>e-n&&(i=Math.floor(e-n)),i},e}(c["default"]);c["default"].registerComponent("MouseTimeDisplay",b),r["default"]=b,e.exports=r["default"]},{"../../component.js":67,"../../utils/dom.js":143,"../../utils/fn.js":145,
"../../utils/format-time.js":146,"global/window":2,"lodash-compat/function/throttle":7}],79:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../component.js"),u=i(s),l=t("../../utils/fn.js"),c=n(l),d=t("../../utils/dom.js"),f=(n(d),t("../../utils/format-time.js")),h=i(f),p=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.updateDataAttr(),this.on(r,"timeupdate",this.updateDataAttr),r.ready(c.bind(this,this.updateDataAttr)),n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&this.addClass("vjs-keep-tooltips-inside")}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},e.prototype.updateDataAttr=function(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",h["default"](t,this.player_.duration()))},e}(u["default"]);u["default"].registerComponent("PlayProgressBar",p),r["default"]=p,e.exports=r["default"]},{"../../component.js":67,"../../utils/dom.js":143,"../../utils/fn.js":145,"../../utils/format-time.js":146}],80:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),u=t("./seek-bar.js"),l=(n(u),t("./mouse-time-display.js")),c=(n(l),function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},e}(s["default"]));c.prototype.options_={children:["seekBar"]},s["default"].registerComponent("ProgressControl",c),r["default"]=c,e.exports=r["default"]},{"../../component.js":67,"./mouse-time-display.js":78,"./seek-bar.js":81}],81:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("global/window"),u=i(s),l=t("../../slider/slider.js"),c=i(l),d=t("../../component.js"),f=i(d),h=t("./load-progress-bar.js"),p=(i(h),t("./play-progress-bar.js")),g=(i(p),t("./tooltip-progress-bar.js")),y=(i(g),t("../../utils/fn.js")),v=n(y),m=t("../../utils/format-time.js"),b=i(m),_=t("object.assign"),T=(i(_),function(t){function e(r,n){o(this,e),t.call(this,r,n),this.on(r,"timeupdate",this.updateProgress),this.on(r,"ended",this.updateProgress),r.ready(v.bind(this,this.updateProgress)),n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltipProgressBar=this.addChild("TooltipProgressBar"))}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},e.prototype.updateProgress=function(){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var t=parseFloat(u["default"].getComputedStyle(this.player().el()).width),e=parseFloat(u["default"].getComputedStyle(this.tooltipProgressBar.tooltip).width),r=this.tooltipProgressBar.el().style;r.maxWidth=Math.floor(t-e/2)+"px",r.minWidth=Math.ceil(e/2)+"px",r.right="-"+e/2+"px"}},e.prototype.updateAriaAttributes=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();t.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),t.setAttribute("aria-valuetext",b["default"](e,this.player_.duration()))},e.prototype.getPercent=function(){var t=this.player_.currentTime()/this.player_.duration();return t>=1?1:t},e.prototype.handleMouseDown=function(e){t.prototype.handleMouseDown.call(this,e),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause()},e.prototype.handleMouseMove=function(t){var e=this.calculateDistance(t)*this.player_.duration();e===this.player_.duration()&&(e-=.1),this.player_.currentTime(e)},e.prototype.handleMouseUp=function(e){t.prototype.handleMouseUp.call(this,e),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},e.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},e.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},e}(c["default"]));T.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},T.prototype.playerEvent="timeupdate",f["default"].registerComponent("SeekBar",T),r["default"]=T,e.exports=r["default"]},{"../../component.js":67,"../../slider/slider.js":119,"../../utils/fn.js":145,"../../utils/format-time.js":146,"./load-progress-bar.js":77,"./play-progress-bar.js":79,"./tooltip-progress-bar.js":82,"global/window":2,"object.assign":45}],82:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../component.js"),u=i(s),l=t("../../utils/fn.js"),c=n(l),d=t("../../utils/dom.js"),f=(n(d),t("../../utils/format-time.js")),h=i(f),p=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.updateDataAttr(),this.on(r,"timeupdate",this.updateDataAttr),r.ready(c.bind(this,this.updateDataAttr))}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=e.querySelector(".vjs-time-tooltip"),e},e.prototype.updateDataAttr=function(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),e=h["default"](t,this.player_.duration());this.el_.setAttribute("data-current-time",e),this.tooltip.innerHTML=e},e}(u["default"]);u["default"].registerComponent("TooltipProgressBar",p),r["default"]=p,e.exports=r["default"]},{"../../component.js":67,"../../utils/dom.js":143,"../../utils/fn.js":145,"../../utils/format-time.js":146}],83:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./spacer.js"),s=n(a),u=t("../../component.js"),l=n(u),c=function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML="&nbsp;",e},e}(s["default"]);l["default"].registerComponent("CustomControlSpacer",c),r["default"]=c,e.exports=r["default"]},{"../../component.js":67,"./spacer.js":84}],84:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),u=function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(s["default"]);s["default"].registerComponent("Spacer",u),r["default"]=u,e.exports=r["default"]},{"../../component.js":67}],85:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./text-track-menu-item.js"),s=n(a),u=t("../../component.js"),l=n(u),c=function(t){function e(r,n){i(this,e),n.track={kind:n.kind,player:r,label:n.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},n.selectable=!1,t.call(this,r,n),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+n.kind+" settings dialog")}return o(e,t),e.prototype.handleClick=function(){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},e}(s["default"]);l["default"].registerComponent("CaptionSettingsMenuItem",c),r["default"]=c,e.exports=r["default"]},{"../../component.js":67,"./text-track-menu-item.js":93}],86:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./text-track-button.js"),s=n(a),u=t("../../component.js"),l=n(u),c=t("./caption-settings-menu-item.js"),d=n(c),f=function(t){function e(r,n,o){i(this,e),t.call(this,r,n,o),this.el_.setAttribute("aria-label","Captions Menu")}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},e.prototype.update=function(){var e=2;t.prototype.update.call(this),this.player().tech_&&this.player().tech_.featuresNativeTextTracks&&(e=1),this.items&&this.items.length>e?this.show():this.hide()},e.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||e.push(new d["default"](this.player_,{kind:this.kind_})),t.prototype.createItems.call(this,e)},e}(s["default"]);f.prototype.kind_="captions",f.prototype.controlText_="Captions",l["default"].registerComponent("CaptionsButton",f),r["default"]=f,e.exports=r["default"]},{"../../component.js":67,"./caption-settings-menu-item.js":85,"./text-track-button.js":92}],87:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./text-track-button.js"),u=i(s),l=t("../../component.js"),c=i(l),d=t("./text-track-menu-item.js"),f=i(d),h=t("./chapters-track-menu-item.js"),p=i(h),g=t("../../menu/menu.js"),y=i(g),v=t("../../utils/dom.js"),m=n(v),b=t("../../utils/fn.js"),_=(n(b),t("../../utils/to-title-case.js")),T=i(_),w=t("global/window"),k=(i(w),function(t){function e(r,n,i){o(this,e),t.call(this,r,n,i),this.el_.setAttribute("aria-label","Chapters Menu")}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},e.prototype.createItems=function(){var t=[],e=this.player_.textTracks();if(!e)return t;for(var r=0;r<e.length;r++){var n=e[r];n.kind===this.kind_&&t.push(new f["default"](this.player_,{track:n}))}return t},e.prototype.createMenu=function(){for(var t=this,e=this.player_.textTracks()||[],r=void 0,n=this.items||[],i=e.length-1;i>=0;i--){var o=e[i];if(o.kind===this.kind_){r=o;break}}var a=this.menu;if(void 0===a){a=new y["default"](this.player_);var s=m.createEl("li",{className:"vjs-menu-title",innerHTML:T["default"](this.kind_),tabIndex:-1});a.children_.unshift(s),m.insertElFirst(s,a.contentEl())}else n.forEach(function(t){return a.removeChild(t)}),n=[];if(r&&null==r.cues){r.mode="hidden";var u=this.player_.remoteTextTrackEls().getTrackElementByTrack_(r);u&&u.addEventListener("load",function(e){return t.update()})}if(r&&r.cues&&r.cues.length>0)for(var l=r.cues,c=void 0,i=0,d=l.length;d>i;i++){c=l[i];var f=new p["default"](this.player_,{track:r,cue:c});n.push(f),a.addChild(f)}return n.length>0&&this.show(),this.items=n,a},e}(u["default"]));k.prototype.kind_="chapters",k.prototype.controlText_="Chapters",c["default"].registerComponent("ChaptersButton",k),r["default"]=k,e.exports=r["default"]},{"../../component.js":67,"../../menu/menu.js":111,"../../utils/dom.js":143,"../../utils/fn.js":145,"../../utils/to-title-case.js":152,"./chapters-track-menu-item.js":88,"./text-track-button.js":92,"./text-track-menu-item.js":93,"global/window":2}],88:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../menu/menu-item.js"),u=i(s),l=t("../../component.js"),c=i(l),d=t("../../utils/fn.js"),f=n(d),h=function(t){function e(r,n){o(this,e);var i=n.track,a=n.cue,s=r.currentTime();n.label=a.text,n.selected=a.startTime<=s&&s<a.endTime,t.call(this,r,n),this.track=i,this.cue=a,i.addEventListener("cuechange",f.bind(this,this.update))}return a(e,t),e.prototype.handleClick=function(){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},e.prototype.update=function(){var t=this.cue,e=this.player_.currentTime();this.selected(t.startTime<=e&&e<t.endTime)},e}(u["default"]);c["default"].registerComponent("ChaptersTrackMenuItem",h),r["default"]=h,e.exports=r["default"]},{"../../component.js":67,"../../menu/menu-item.js":110,"../../utils/fn.js":145}],89:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./text-track-button.js"),u=i(s),l=t("../../component.js"),c=i(l),d=t("../../utils/fn.js"),f=n(d),h=function(t){function e(r,n,i){var a=this;o(this,e),t.call(this,r,n,i),this.el_.setAttribute("aria-label","Descriptions Menu");var s=r.textTracks();s&&!function(){var t=f.bind(a,a.handleTracksChange);s.addEventListener("change",t),a.on("dispose",function(){s.removeEventListener("change",t)})}()}return a(e,t),e.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),r=!1,n=0,i=e.length;i>n;n++){var o=e[n];if(o.kind!==this.kind_&&"showing"===o.mode){r=!0;break}}r?this.disable():this.enable()},e.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},e}(u["default"]);h.prototype.kind_="descriptions",h.prototype.controlText_="Descriptions",c["default"].registerComponent("DescriptionsButton",h),r["default"]=h,e.exports=r["default"]},{"../../component.js":67,"../../utils/fn.js":145,"./text-track-button.js":92}],90:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./text-track-menu-item.js"),s=n(a),u=t("../../component.js"),l=n(u),c=function(t){function e(r,n){i(this,e),n.track={kind:n.kind,player:r,label:n.kind+" off","default":!1,mode:"disabled"},n.selectable=!0,t.call(this,r,n),this.selected(!0)}return o(e,t),e.prototype.handleTracksChange=function(t){for(var e=this.player().textTracks(),r=!0,n=0,i=e.length;i>n;n++){var o=e[n];if(o.kind===this.track.kind&&"showing"===o.mode){r=!1;break}}this.selected(r)},e}(s["default"]);l["default"].registerComponent("OffTextTrackMenuItem",c),r["default"]=c,e.exports=r["default"]},{"../../component.js":67,"./text-track-menu-item.js":93}],91:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./text-track-button.js"),s=n(a),u=t("../../component.js"),l=n(u),c=function(t){function e(r,n,o){i(this,e),t.call(this,r,n,o),this.el_.setAttribute("aria-label","Subtitles Menu")}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},e}(s["default"]);c.prototype.kind_="subtitles",c.prototype.controlText_="Subtitles",l["default"].registerComponent("SubtitlesButton",c),r["default"]=c,e.exports=r["default"]},{"../../component.js":67,"./text-track-button.js":92}],92:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../track-button.js"),u=i(s),l=t("../../component.js"),c=i(l),d=t("../../utils/fn.js"),f=(n(d),t("./text-track-menu-item.js")),h=i(f),p=t("./off-text-track-menu-item.js"),g=i(p),y=function(t){function e(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),n.tracks=r.textTracks(),t.call(this,r,n)}return a(e,t),e.prototype.createItems=function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];t.push(new g["default"](this.player_,{kind:this.kind_}));var e=this.player_.textTracks();if(!e)return t;for(var r=0;r<e.length;r++){var n=e[r];n.kind===this.kind_&&t.push(new h["default"](this.player_,{selectable:!0,track:n}))}return t},e}(u["default"]);c["default"].registerComponent("TextTrackButton",y),r["default"]=y,e.exports=r["default"]},{"../../component.js":67,"../../utils/fn.js":145,"../track-button.js":98,"./off-text-track-menu-item.js":90,"./text-track-menu-item.js":93}],93:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../menu/menu-item.js"),u=i(s),l=t("../../component.js"),c=i(l),d=t("../../utils/fn.js"),f=n(d),h=t("global/window"),p=i(h),g=t("global/document"),y=i(g),v=function(t){function e(r,n){var i=this;o(this,e);var a=n.track,s=r.textTracks();n.label=a.label||a.language||"Unknown",n.selected=a["default"]||"showing"===a.mode,t.call(this,r,n),this.track=a,s&&!function(){var t=f.bind(i,i.handleTracksChange);s.addEventListener("change",t),i.on("dispose",function(){s.removeEventListener("change",t)})}(),s&&void 0===s.onchange&&!function(){var t=void 0;i.on(["tap","click"],function(){if("object"!=typeof p["default"].Event)try{t=new p["default"].Event("change")}catch(e){}t||(t=y["default"].createEvent("Event"),t.initEvent("change",!0,!0)),s.dispatchEvent(t)})}()}return a(e,t),e.prototype.handleClick=function(e){var r=this.track.kind,n=this.player_.textTracks();if(t.prototype.handleClick.call(this,e),n)for(var i=0;i<n.length;i++){var o=n[i];o.kind===r&&(o===this.track?o.mode="showing":o.mode="disabled")}},e.prototype.handleTracksChange=function(t){this.selected("showing"===this.track.mode)},e}(u["default"]);c["default"].registerComponent("TextTrackMenuItem",v),r["default"]=v,e.exports=r["default"]},{"../../component.js":67,"../../menu/menu-item.js":110,"../../utils/fn.js":145,"global/document":1,"global/window":2}],94:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../component.js"),u=i(s),l=t("../../utils/dom.js"),c=n(l),d=t("../../utils/format-time.js"),f=i(d),h=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.on(r,"timeupdate",this.updateContent)}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateContent=function(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),e=this.localize("Current Time"),r=f["default"](t,this.player_.duration());r!==this.formattedTime_&&(this.formattedTime_=r,this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span> "+r)},e}(u["default"]);u["default"].registerComponent("CurrentTimeDisplay",h),r["default"]=h,e.exports=r["default"]},{"../../component.js":67,"../../utils/dom.js":143,"../../utils/format-time.js":146}],95:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../component.js"),u=i(s),l=t("../../utils/dom.js"),c=n(l),d=t("../../utils/format-time.js"),f=i(d),h=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.on(r,"timeupdate",this.updateContent),this.on(r,"loadedmetadata",this.updateContent)}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateContent=function(){var t=this.player_.duration();if(t&&this.duration_!==t){this.duration_=t;var e=this.localize("Duration Time"),r=f["default"](t);this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span> "+r}},e}(u["default"]);u["default"].registerComponent("DurationDisplay",h),r["default"]=h,e.exports=r["default"]},{"../../component.js":67,"../../utils/dom.js":143,"../../utils/format-time.js":146}],96:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../component.js"),u=i(s),l=t("../../utils/dom.js"),c=n(l),d=t("../../utils/format-time.js"),f=i(d),h=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.on(r,"timeupdate",this.updateContent)}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=c.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateContent=function(){if(this.player_.duration()){var t=this.localize("Remaining Time"),e=f["default"](this.player_.remainingTime());e!==this.formattedTime_&&(this.formattedTime_=e,this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> -"+e)}},e}(u["default"]);u["default"].registerComponent("RemainingTimeDisplay",h),r["default"]=h,e.exports=r["default"]},{"../../component.js":67,"../../utils/dom.js":143,"../../utils/format-time.js":146}],97:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),u=function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},e}(s["default"]);s["default"].registerComponent("TimeDivider",u),r["default"]=u,e.exports=r["default"]},{"../../component.js":67}],98:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../menu/menu-button.js"),u=i(s),l=t("../component.js"),c=i(l),d=t("../utils/fn.js"),f=n(d),h=function(t){function e(r,n){o(this,e);var i=n.tracks;if(t.call(this,r,n),this.items.length<=1&&this.hide(),i){var a=f.bind(this,this.update);i.addEventListener("removetrack",a),i.addEventListener("addtrack",a),
this.player_.on("dispose",function(){i.removeEventListener("removetrack",a),i.removeEventListener("addtrack",a)})}}return a(e,t),e}(u["default"]);c["default"].registerComponent("TrackButton",h),r["default"]=h,e.exports=r["default"]},{"../component.js":67,"../menu/menu-button.js":109,"../utils/fn.js":145}],99:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../slider/slider.js"),u=i(s),l=t("../../component.js"),c=i(l),d=t("../../utils/fn.js"),f=n(d),h=t("./volume-level.js"),p=(i(h),function(t){function e(r,n){o(this,e),t.call(this,r,n),this.on(r,"volumechange",this.updateARIAAttributes),r.ready(f.bind(this,this.updateARIAAttributes))}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},e.prototype.handleMouseMove=function(t){this.checkMuted(),this.player_.volume(this.calculateDistance(t))},e.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},e.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},e.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},e.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},e.prototype.updateARIAAttributes=function(){var t=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},e}(u["default"]));p.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},p.prototype.playerEvent="volumechange",c["default"].registerComponent("VolumeBar",p),r["default"]=p,e.exports=r["default"]},{"../../component.js":67,"../../slider/slider.js":119,"../../utils/fn.js":145,"./volume-level.js":101}],100:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),u=t("./volume-bar.js"),l=(n(u),function(t){function e(r,n){i(this,e),t.call(this,r,n),r.tech_&&r.tech_.featuresVolumeControl===!1&&this.addClass("vjs-hidden"),this.on(r,"loadstart",function(){r.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},e}(s["default"]));l.prototype.options_={children:["volumeBar"]},s["default"].registerComponent("VolumeControl",l),r["default"]=l,e.exports=r["default"]},{"../../component.js":67,"./volume-bar.js":99}],101:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),u=function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(s["default"]);s["default"].registerComponent("VolumeLevel",u),r["default"]=u,e.exports=r["default"]},{"../../component.js":67}],102:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../utils/fn.js"),u=i(s),l=t("../component.js"),c=n(l),d=t("../popup/popup.js"),f=n(d),h=t("../popup/popup-button.js"),p=n(h),g=t("./mute-toggle.js"),y=n(g),v=t("./volume-control/volume-bar.js"),m=n(v),b=function(t){function e(r){function n(){r.tech_&&r.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),void 0===i.inline&&(i.inline=!0),void 0===i.vertical&&(i.inline?i.vertical=!1:i.vertical=!0),i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=!!i.vertical,t.call(this,r,i),this.on(r,"volumechange",this.volumeUpdate),this.on(r,"loadstart",this.volumeUpdate),n.call(this),this.on(r,"loadstart",n),this.on(this.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),this.on(this.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),this.on(this.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),this.on(this.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")})}return a(e,t),e.prototype.buildCSSClass=function(){var e="";return e=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+t.prototype.buildCSSClass.call(this)+" "+e},e.prototype.createPopup=function(){var t=new f["default"](this.player_,{contentElType:"div"}),e=new m["default"](this.player_,this.options_.volumeBar);return t.addChild(e),this.menuContent=t,this.volumeBar=e,this.attachVolumeBarEvents(),t},e.prototype.handleClick=function(){y["default"].prototype.handleClick.call(this),t.prototype.handleClick.call(this)},e.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],u.bind(this,this.handleMouseDown))},e.prototype.handleMouseDown=function(t){this.on(["mousemove","touchmove"],u.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},e.prototype.handleMouseUp=function(t){this.off(["mousemove","touchmove"],u.bind(this.volumeBar,this.volumeBar.handleMouseMove))},e}(p["default"]);b.prototype.volumeUpdate=y["default"].prototype.update,b.prototype.controlText_="Mute",c["default"].registerComponent("VolumeMenuButton",b),r["default"]=b,e.exports=r["default"]},{"../component.js":67,"../popup/popup-button.js":115,"../popup/popup.js":116,"../utils/fn.js":145,"./mute-toggle.js":73,"./volume-control/volume-bar.js":99}],103:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./component"),u=i(s),l=t("./modal-dialog"),c=i(l),d=t("./utils/dom"),f=(n(d),t("./utils/merge-options")),h=i(f),p=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.on(r,"error",this.open)}return a(e,t),e.prototype.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},e.prototype.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(c["default"]);p.prototype.options_=h["default"](c["default"].prototype.options_,{fillAlways:!0,temporary:!1,uncloseable:!0}),u["default"].registerComponent("ErrorDisplay",p),r["default"]=p,e.exports=r["default"]},{"./component":67,"./modal-dialog":112,"./utils/dom":143,"./utils/merge-options":149}],104:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}r.__esModule=!0;var i=t("./utils/events.js"),o=n(i),a=function(){};a.prototype.allowedEvents_={},a.prototype.on=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},o.on(this,t,e),this.addEventListener=r},a.prototype.addEventListener=a.prototype.on,a.prototype.off=function(t,e){o.off(this,t,e)},a.prototype.removeEventListener=a.prototype.off,a.prototype.one=function(t,e){var r=this.addEventListener;this.addEventListener=function(){},o.one(this,t,e),this.addEventListener=r},a.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=o.fixEvent(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),o.trigger(this,t)},a.prototype.dispatchEvent=a.prototype.trigger,r["default"]=a,e.exports=r["default"]},{"./utils/events.js":144}],105:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}r.__esModule=!0;var i=t("./utils/log"),o=n(i),a=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.super_=e)},s=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=function(){t.apply(this,arguments)},n={};"object"==typeof e?("function"==typeof e.init&&(o["default"].warn("Constructor logic via init() is deprecated; please use constructor() instead."),e.constructor=e.init),e.constructor!==Object.prototype.constructor&&(r=e.constructor),n=e):"function"==typeof e&&(r=e),a(r,t);for(var i in n)n.hasOwnProperty(i)&&(r.prototype[i]=n[i]);return r};r["default"]=s,e.exports=r["default"]},{"./utils/log":148}],106:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}r.__esModule=!0;for(var i=t("global/document"),o=n(i),a={},s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],u=s[0],l=void 0,c=0;c<s.length;c++)if(s[c][1]in o["default"]){l=s[c];break}if(l)for(var c=0;c<l.length;c++)a[u[c]]=l[c];r["default"]=a,e.exports=r["default"]},{"global/document":1}],107:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./component"),s=n(a),u=function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},e}(s["default"]);s["default"].registerComponent("LoadingSpinner",u),r["default"]=u,e.exports=r["default"]},{"./component":67}],108:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}r.__esModule=!0;var i=t("object.assign"),o=n(i),a=function u(t){"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:"object"==typeof t&&o["default"](this,t),this.message||(this.message=u.defaultMessages[this.code]||"")};a.prototype.code=0,a.prototype.message="",a.prototype.status=null,a.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],a.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var s=0;s<a.errorTypes.length;s++)a[a.errorTypes[s]]=s,a.prototype[a.errorTypes[s]]=s;r["default"]=a,e.exports=r["default"]},{"object.assign":45}],109:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../clickable-component.js"),u=i(s),l=t("../component.js"),c=i(l),d=t("./menu.js"),f=i(d),h=t("../utils/dom.js"),p=n(h),g=t("../utils/fn.js"),y=n(g),v=t("../utils/to-title-case.js"),m=i(v),b=function(t){function e(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),t.call(this,r,n),this.update(),this.enabled_=!0,this.el_.setAttribute("aria-haspopup","true"),this.el_.setAttribute("role","menuitem"),this.on("keydown",this.handleSubmenuKeyPress)}return a(e,t),e.prototype.update=function(){var t=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},e.prototype.createMenu=function(){var t=new f["default"](this.player_);if(this.options_.title){var e=p.createEl("li",{className:"vjs-menu-title",innerHTML:m["default"](this.options_.title),tabIndex:-1});t.children_.unshift(e),p.insertElFirst(e,t.contentEl())}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)t.addItem(this.items[r]);return t},e.prototype.createItems=function(){},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e.prototype.buildCSSClass=function(){var e="vjs-menu-button";return e+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(){this.one("mouseout",y.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},e.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault()):38===e.which||40===e.which?this.buttonPressed_||(this.pressButton(),e.preventDefault()):t.prototype.handleKeyPress.call(this,e)},e.prototype.handleSubmenuKeyPress=function(t){(27===t.which||9===t.which)&&(this.buttonPressed_&&this.unpressButton(),9!==t.which&&t.preventDefault())},e.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},e.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},e.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,t.prototype.disable.call(this)},e.prototype.enable=function(){return this.enabled_=!0,t.prototype.enable.call(this)},e}(u["default"]);c["default"].registerComponent("MenuButton",b),r["default"]=b,e.exports=r["default"]},{"../clickable-component.js":65,"../component.js":67,"../utils/dom.js":143,"../utils/fn.js":145,"../utils/to-title-case.js":152,"./menu.js":111}],110:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../clickable-component.js"),s=n(a),u=t("../component.js"),l=n(u),c=t("object.assign"),d=n(c),f=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.selectable=n.selectable,this.selected(n.selected),this.selectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitem")}return o(e,t),e.prototype.createEl=function(e,r,n){return t.prototype.createEl.call(this,"li",d["default"]({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},r),n)},e.prototype.handleClick=function(){this.selected(!0)},e.prototype.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(" ")))},e}(s["default"]);l["default"].registerComponent("MenuItem",f),r["default"]=f,e.exports=r["default"]},{"../clickable-component.js":65,"../component.js":67,"object.assign":45}],111:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../component.js"),u=i(s),l=t("../utils/dom.js"),c=n(l),d=t("../utils/fn.js"),f=n(d),h=t("../utils/events.js"),p=n(h),g=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.focusedChild_=-1,this.on("keydown",this.handleKeyPress)}return a(e,t),e.prototype.addItem=function(t){this.addChild(t),t.on("click",f.bind(this,function(){this.unlockShowing()}))},e.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=c.createEl(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var r=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return r.setAttribute("role","presentation"),r.appendChild(this.contentEl_),p.on(r,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),r},e.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepForward()):(38===t.which||39===t.which)&&(t.preventDefault(),this.stepBack())},e.prototype.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},e.prototype.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},e.prototype.focus=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=this.children().slice(),r=e.length&&e[0].className&&/vjs-menu-title/.test(e[0].className);r&&e.shift(),e.length>0&&(0>t?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())},e}(u["default"]);u["default"].registerComponent("Menu",g),r["default"]=g,e.exports=r["default"]},{"../component.js":67,"../utils/dom.js":143,"../utils/events.js":144,"../utils/fn.js":145}],112:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./utils/dom"),u=i(s),l=t("./utils/fn"),c=i(l),d=t("./utils/log"),f=(n(d),t("./component")),h=n(f),p=t("./close-button"),g=(n(p),"vjs-modal-dialog"),y=27,v=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=u.createEl("div",{className:g+"-content"},{role:"document"}),this.descEl_=u.createEl("p",{className:g+"-description vjs-offscreen",id:this.el().getAttribute("aria-describedby")}),u.textContent(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},e.prototype.buildCSSClass=function(){return g+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},e.prototype.handleKeyPress=function(t){t.which===y&&this.closeable()&&this.close()},e.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},e.prototype.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},e.prototype.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.wasPlaying_&&t.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",c.bind(this,this.handleKeyPress)),t.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},e.prototype.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},e.prototype.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&t.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",c.bind(this,this.handleKeyPress)),t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},e.prototype.closeable=function r(t){if("boolean"==typeof t){var r=this.closeable_=!!t,e=this.getChild("closeButton");if(r&&!e){var n=this.contentEl_;this.contentEl_=this.el_,e=this.addChild("closeButton"),this.contentEl_=n,this.on(e,"close",this.close)}!r&&e&&(this.off(e,"close",this.close),this.removeChild(e),e.dispose())}return this.closeable_},e.prototype.fill=function(){return this.fillWith(this.content())},e.prototype.fillWith=function(t){var e=this.contentEl(),r=e.parentNode,n=e.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(e),this.empty(),u.insertContent(e,t),this.trigger("modalfill"),n?r.insertBefore(e,n):r.appendChild(e),this},e.prototype.empty=function(){return this.trigger("beforemodalempty"),u.emptyEl(this.contentEl()),this.trigger("modalempty"),this},e.prototype.content=function(t){return"undefined"!=typeof t&&(this.content_=t),this.content_},e}(h["default"]);v.prototype.options_={temporary:!0},h["default"].registerComponent("ModalDialog",v),r["default"]=v,e.exports=r["default"]},{"./close-button":66,"./component":67,"./utils/dom":143,"./utils/fn":145,"./utils/log":148}],113:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./component.js"),u=i(s),l=t("global/document"),c=i(l),d=t("global/window"),f=i(d),h=t("./utils/events.js"),p=n(h),g=t("./utils/dom.js"),y=n(g),v=t("./utils/fn.js"),m=n(v),b=t("./utils/guid.js"),_=n(b),T=t("./utils/browser.js"),w=n(T),k=t("./utils/log.js"),E=i(k),S=t("./utils/to-title-case.js"),O=i(S),j=t("./utils/time-ranges.js"),C=t("./utils/buffer.js"),x=t("./utils/stylesheet.js"),A=n(x),P=t("./fullscreen-api.js"),L=i(P),R=t("./media-error.js"),D=i(R),M=t("safe-json-parse/tuple"),I=i(M),N=t("object.assign"),F=i(N),U=t("./utils/merge-options.js"),B=i(U),G=t("./tracks/text-track-list-converter.js"),H=i(G),V=t("./tracks/audio-track-list.js"),W=i(V),q=t("./tracks/video-track-list.js"),$=i(q),z=t("./tech/loader.js"),X=(i(z),t("./poster-image.js")),K=(i(X),t("./tracks/text-track-display.js")),Y=(i(K),t("./loading-spinner.js")),J=(i(Y),t("./big-play-button.js")),Q=(i(J),t("./control-bar/control-bar.js")),Z=(i(Q),t("./error-display.js")),tt=(i(Z),t("./tracks/text-track-settings.js")),et=(i(tt),t("./modal-dialog")),rt=i(et),nt=t("./tech/tech.js"),it=i(nt),ot=t("./tech/html5.js"),at=(i(ot),function(t){function e(r,n,i){var a=this;if(o(this,e),r.id=r.id||"vjs_video_"+_.newGUID(),n=F["default"](e.getTagSettings(r),n),n.initChildren=!1,n.createEl=!1,n.reportTouchActivity=!1,t.call(this,null,n,i),!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");this.tag=r,this.tagAttributes=r&&y.getElAttributes(r),this.language(this.options_.language),n.languages?!function(){var t={};Object.getOwnPropertyNames(n.languages).forEach(function(e){t[e.toLowerCase()]=n.languages[e]}),a.languages_=t}():this.languages_=e.prototype.options_.languages,this.cache_={},this.poster_=n.poster||"",this.controls_=!!n.controls,r.controls=!1,this.scrubbing_=!1,this.el_=this.createEl();var s=B["default"](this.options_);n.plugins&&!function(){var t=n.plugins;Object.getOwnPropertyNames(t).forEach(function(e){"function"==typeof this[e]?this[e](t[e]):E["default"].error("Unable to find plugin:",e)},a)}(),this.options_.playerOptions=s,this.initChildren(),this.isAudio("audio"===r.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label","audio player"):this.el_.setAttribute("aria-label","video player"),this.isAudio()&&this.addClass("vjs-audio"),this.flexNotSupported_()&&this.addClass("vjs-no-flex"),w.IS_IOS||this.addClass("vjs-workinghover"),e.players[this.id_]=this,this.userActive(!0),this.reportUserActivity(),this.listenForUserActivity_(),this.on("fullscreenchange",this.handleFullscreenChange_),this.on("stageclick",this.handleStageClick_)}return a(e,t),e.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var e=this.el_=t.prototype.createEl.call(this,"div"),r=this.tag;r.removeAttribute("width"),r.removeAttribute("height");var n=y.getElAttributes(r);if(Object.getOwnPropertyNames(n).forEach(function(t){"class"===t?e.className=n[t]:e.setAttribute(t,n[t])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=e.player=this,this.addClass("vjs-paused"),f["default"].VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=A.createStyleElement("vjs-styles-dimensions");var i=y.$(".vjs-styles-defaults"),o=y.$("head");o.insertBefore(this.styleEl_,i?i.nextSibling:o.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var a=r.getElementsByTagName("a"),s=0;s<a.length;s++){var u=a.item(s);y.addElClass(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&r.parentNode.insertBefore(e,r),y.insertElFirst(r,e),this.children_.unshift(r),this.el_=e,e},e.prototype.width=function(t){return this.dimension("width",t)},e.prototype.height=function(t){return this.dimension("height",t)},e.prototype.dimension=function(t,e){var r=t+"_";if(void 0===e)return this[r]||0;if(""===e)this[r]=void 0;else{var n=parseFloat(e);if(isNaN(n))return E["default"].error('Improper value "'+e+'" supplied for for '+t),this;this[r]=n}return this.updateStyleEl_(),this},e.prototype.fluid=function(t){return void 0===t?!!this.fluid_:(this.fluid_=!!t,void(t?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid")))},e.prototype.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},e.prototype.updateStyleEl_=function(){if(f["default"].VIDEOJS_NO_DYNAMIC_STYLE===!0){var t="number"==typeof this.width_?this.width_:this.options_.width,e="number"==typeof this.height_?this.height_:this.options_.height,r=this.tech_&&this.tech_.el();return void(r&&(t>=0&&(r.width=t),e>=0&&(r.height=e)))}var n=void 0,i=void 0,o=void 0,a=void 0;o=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9";var s=o.split(":"),u=s[1]/s[0];n=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/u:this.videoWidth()||300,i=void 0!==this.height_?this.height_:n*u,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",
this.addClass(a),A.setTextContent(this.styleEl_,"\n      ."+a+" {\n        width: "+n+"px;\n        height: "+i+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*u+"%;\n      }\n    ")},e.prototype.loadTech_=function(t,e){this.tech_&&this.unloadTech_(),"Html5"!==t&&this.tag&&(it["default"].getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=t,this.isReady_=!1;var r=F["default"]({nativeControlsForTouch:this.options_.nativeControlsForTouch,source:e,playerId:this.id(),techId:this.id()+"_"+t+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),"vtt.js":this.options_["vtt.js"]},this.options_[t.toLowerCase()]);this.tag&&(r.tag=this.tag),e&&(this.currentType_=e.type,e.src===this.cache_.src&&this.cache_.currentTime>0&&(r.startTime=this.cache_.currentTime),this.cache_.src=e.src);var n=it["default"].getTech(t);n||(n=u["default"].getComponent(t)),this.tech_=new n(r),this.tech_.ready(m.bind(this,this.handleTechReady_),!0),H["default"].jsonToTextTracks(this.textTracksJson_||[],this.tech_),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"progress",this.handleTechProgress_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"suspend",this.handleTechSuspend_),this.on(this.tech_,"abort",this.handleTechAbort_),this.on(this.tech_,"emptied",this.handleTechEmptied_),this.on(this.tech_,"stalled",this.handleTechStalled_),this.on(this.tech_,"loadedmetadata",this.handleTechLoadedMetaData_),this.on(this.tech_,"loadeddata",this.handleTechLoadedData_),this.on(this.tech_,"timeupdate",this.handleTechTimeUpdate_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.on(this.tech_,"volumechange",this.handleTechVolumeChange_),this.on(this.tech_,"texttrackchange",this.handleTechTextTrackChange_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===t&&this.tag||y.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.prototype.unloadTech_=function(){this.videoTracks_=this.videoTracks(),this.textTracks_=this.textTracks(),this.audioTracks_=this.audioTracks(),this.textTracksJson_=H["default"].textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},e.prototype.tech=function(t){if(t&&t.IWillNotUseThisInPlugins)return this.tech_;var e="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw f["default"].alert(e),new Error(e)},e.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},e.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),this.src()&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster}catch(t){E["default"]("deleting tag.poster throws in some browsers",t)}this.play()}},e.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},e.prototype.hasStarted=function(t){return void 0!==t?(this.hasStarted_!==t&&(this.hasStarted_=t,t?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},e.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.prototype.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return t.removeClass("vjs-waiting")})},e.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},e.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.prototype.handleTechProgress_=function(){this.trigger("progress")},e.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.prototype.handleTechClick_=function(t){0===t.button&&this.controls()&&(this.paused()?this.play():this.pause())},e.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},e.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.prototype.handleTechTouchEnd_=function(t){t.preventDefault()},e.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.prototype.handleStageClick_=function(){this.reportUserActivity()},e.prototype.handleTechFullscreenChange_=function(t,e){e&&this.isFullscreen(e.isFullscreen),this.trigger("fullscreenchange")},e.prototype.handleTechError_=function(){var t=this.tech_.error();this.error(t&&t.code)},e.prototype.handleTechSuspend_=function(){this.trigger("suspend")},e.prototype.handleTechAbort_=function(){this.trigger("abort")},e.prototype.handleTechEmptied_=function(){this.trigger("emptied")},e.prototype.handleTechStalled_=function(){this.trigger("stalled")},e.prototype.handleTechLoadedMetaData_=function(){this.trigger("loadedmetadata")},e.prototype.handleTechLoadedData_=function(){this.trigger("loadeddata")},e.prototype.handleTechTimeUpdate_=function(){this.trigger("timeupdate")},e.prototype.handleTechRateChange_=function(){this.trigger("ratechange")},e.prototype.handleTechVolumeChange_=function(){this.trigger("volumechange")},e.prototype.handleTechTextTrackChange_=function(){this.trigger("texttrackchange")},e.prototype.getCache=function(){return this.cache_},e.prototype.techCall_=function(t,e){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[t](e)},!0);else try{this.tech_[t](e)}catch(r){throw E["default"](r),r}},e.prototype.techGet_=function(t){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[t]()}catch(e){throw void 0===this.tech_[t]?E["default"]("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e):"TypeError"===e.name?(E["default"]("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1):E["default"](e),e}},e.prototype.play=function(){return this.techCall_("play"),this},e.prototype.pause=function(){return this.techCall_("pause"),this},e.prototype.paused=function(){return this.techGet_("paused")===!1?!1:!0},e.prototype.scrubbing=function(t){return void 0!==t?(this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},e.prototype.currentTime=function(t){return void 0!==t?(this.techCall_("setCurrentTime",t),this):this.cache_.currentTime=this.techGet_("currentTime")||0},e.prototype.duration=function(t){return void 0===t?this.cache_.duration||0:(t=parseFloat(t)||0,0>t&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},e.prototype.remainingTime=function(){return this.duration()-this.currentTime()},e.prototype.buffered=function r(){var r=this.techGet_("buffered");return r&&r.length||(r=j.createTimeRange(0,0)),r},e.prototype.bufferedPercent=function(){return C.bufferedPercent(this.buffered(),this.duration())},e.prototype.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),r=t.end(t.length-1);return r>e&&(r=e),r},e.prototype.volume=function(t){var e=void 0;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),this):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},e.prototype.muted=function(t){return void 0!==t?(this.techCall_("setMuted",t),this):this.techGet_("muted")||!1},e.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.prototype.isFullscreen=function(t){return void 0!==t?(this.isFullscreen_=!!t,this):!!this.isFullscreen_},e.prototype.requestFullscreen=function(){var t=L["default"];return this.isFullscreen(!0),t.requestFullscreen?(p.on(c["default"],t.fullscreenchange,m.bind(this,function e(r){this.isFullscreen(c["default"][t.fullscreenElement]),this.isFullscreen()===!1&&p.off(c["default"],t.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[t.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},e.prototype.exitFullscreen=function(){var t=L["default"];return this.isFullscreen(!1),t.requestFullscreen?c["default"][t.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},e.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=c["default"].documentElement.style.overflow,p.on(c["default"],"keydown",m.bind(this,this.fullWindowOnEscKey)),c["default"].documentElement.style.overflow="hidden",y.addElClass(c["default"].body,"vjs-full-window"),this.trigger("enterFullWindow")},e.prototype.fullWindowOnEscKey=function(t){27===t.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},e.prototype.exitFullWindow=function(){this.isFullWindow=!1,p.off(c["default"],"keydown",this.fullWindowOnEscKey),c["default"].documentElement.style.overflow=this.docOrigOverflow,y.removeElClass(c["default"].body,"vjs-full-window"),this.trigger("exitFullWindow")},e.prototype.canPlayType=function(t){for(var e=void 0,r=0,n=this.options_.techOrder;r<n.length;r++){var i=O["default"](n[r]),o=it["default"].getTech(i);if(o||(o=u["default"].getComponent(i)),o){if(o.isSupported()&&(e=o.canPlayType(t)))return e}else E["default"].error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.prototype.selectSource=function(t){var e=this.options_.techOrder.map(O["default"]).map(function(t){return[t,it["default"].getTech(t)||u["default"].getComponent(t)]}).filter(function(t){var e=t[0],r=t[1];return r?r.isSupported():(E["default"].error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(t,e,r){var n=void 0;return t.some(function(t){return e.some(function(e){return n=r(t,e),n?!0:void 0})}),n},n=void 0,i=function(t){return function(e,r){return t(r,e)}},o=function(t,e){var r=t[0],n=t[1];return n.canPlaySource(e)?{source:e,tech:r}:void 0};return n=this.options_.sourceOrder?r(t,e,i(o)):r(e,t,o),n||!1},e.prototype.src=function(t){if(void 0===t)return this.techGet_("src");var e=it["default"].getTech(this.techName_);return e||(e=u["default"].getComponent(this.techName_)),Array.isArray(t)?this.sourceList_(t):"string"==typeof t?this.src({src:t}):t instanceof Object&&(t.type&&!e.canPlaySource(t)?this.sourceList_([t]):(this.cache_.src=t.src,this.currentType_=t.type||"",this.ready(function(){e.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},e.prototype.sourceList_=function(t){var e=this.selectSource(t);e?e.tech===this.techName_?this.src(e.source):this.loadTech_(e.tech,e.source):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},e.prototype.load=function(){return this.techCall_("load"),this},e.prototype.reset=function(){return this.loadTech_(O["default"](this.options_.techOrder[0]),null),this.techCall_("reset"),this},e.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},e.prototype.currentType=function(){return this.currentType_||""},e.prototype.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),this.options_.preload=t,this):this.techGet_("preload")},e.prototype.autoplay=function(t){return void 0!==t?(this.techCall_("setAutoplay",t),this.options_.autoplay=t,this):this.techGet_("autoplay",t)},e.prototype.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),this.options_.loop=t,this):this.techGet_("loop")},e.prototype.poster=function(t){return void 0===t?this.poster_:(t||(t=""),this.poster_=t,this.techCall_("setPoster",t),this.trigger("posterchange"),this)},e.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},e.prototype.controls=function(t){return void 0!==t?(t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),t?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},e.prototype.usingNativeControls=function(t){return void 0!==t?(t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,t?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},e.prototype.error=function(t){return void 0===t?this.error_||null:null===t?(this.error_=t,this.removeClass("vjs-error"),this.errorDisplay.close(),this):(t instanceof D["default"]?this.error_=t:this.error_=new D["default"](t),this.addClass("vjs-error"),E["default"].error("(CODE:"+this.error_.code+" "+D["default"].errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},e.prototype.ended=function(){return this.techGet_("ended")},e.prototype.seeking=function(){return this.techGet_("seeking")},e.prototype.seekable=function(){return this.techGet_("seekable")},e.prototype.reportUserActivity=function(t){this.userActivity_=!0},e.prototype.userActive=function(t){return void 0!==t?(t=!!t,t!==this.userActive_&&(this.userActive_=t,t?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},e.prototype.listenForUserActivity_=function(){var t=void 0,e=void 0,r=void 0,n=m.bind(this,this.reportUserActivity),i=function(t){(t.screenX!==e||t.screenY!==r)&&(e=t.screenX,r=t.screenY,n())},o=function(){n(),this.clearInterval(t),t=this.setInterval(n,250)},a=function(e){n(),this.clearInterval(t)};this.on("mousedown",o),this.on("mousemove",i),this.on("mouseup",a),this.on("keydown",n),this.on("keyup",n);var s=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var t=this.options_.inactivityTimeout;t>0&&(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},e.prototype.playbackRate=function(t){return void 0!==t?(this.techCall_("setPlaybackRate",t),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},e.prototype.isAudio=function(t){return void 0!==t?(this.isAudio_=!!t,this):!!this.isAudio_},e.prototype.networkState=function(){return this.techGet_("networkState")},e.prototype.readyState=function(){return this.techGet_("readyState")},e.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new $["default"],this.videoTracks_)},e.prototype.audioTracks=function(){return this.tech_?this.tech_.audioTracks():(this.audioTracks_=this.audioTracks_||new W["default"],this.audioTracks_)},e.prototype.textTracks=function(){return this.tech_&&this.tech_.textTracks()},e.prototype.remoteTextTracks=function(){return this.tech_&&this.tech_.remoteTextTracks()},e.prototype.remoteTextTrackEls=function(){return this.tech_&&this.tech_.remoteTextTrackEls()},e.prototype.addTextTrack=function(t,e,r){return this.tech_&&this.tech_.addTextTrack(t,e,r)},e.prototype.addRemoteTextTrack=function(t){return this.tech_&&this.tech_.addRemoteTextTrack(t)},e.prototype.removeRemoteTextTrack=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.track,r=void 0===e?arguments[0]:e;this.tech_&&this.tech_.removeRemoteTextTrack(r)},e.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.prototype.language=function(t){return void 0===t?this.language_:(this.language_=(""+t).toLowerCase(),this)},e.prototype.languages=function(){return B["default"](e.prototype.options_.languages,this.languages_)},e.prototype.toJSON=function(){var t=B["default"](this.options_),e=t.tracks;t.tracks=[];for(var r=0;r<e.length;r++){var n=e[r];n=B["default"](n),n.player=void 0,t.tracks[r]=n}return t},e.prototype.createModal=function(t,e){var r=this;e=e||{},e.content=t||"";var n=new rt["default"](r,e);return r.addChild(n),n.on("dispose",function(){r.removeChild(n)}),n.open()},e.getTagSettings=function(t){var e={sources:[],tracks:[]},r=y.getElAttributes(t),n=r["data-setup"];if(null!==n){var i=I["default"](n||"{}"),o=i[0],a=i[1];o&&E["default"].error(o),F["default"](r,a)}if(F["default"](e,r),t.hasChildNodes())for(var s=t.childNodes,u=0,l=s.length;l>u;u++){var c=s[u],d=c.nodeName.toLowerCase();"source"===d?e.sources.push(y.getElAttributes(c)):"track"===d&&e.tracks.push(y.getElAttributes(c))}return e},e}(u["default"]));at.players={};var st=f["default"].navigator;at.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:c["default"].getElementsByTagName("html")[0].getAttribute("lang")||st.languages&&st.languages[0]||st.userLanguage||st.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},at.prototype.handleLoadedMetaData_,at.prototype.handleLoadedData_,at.prototype.handleUserActive_,at.prototype.handleUserInactive_,at.prototype.handleTimeUpdate_,at.prototype.handleTechEnded_,at.prototype.handleVolumeChange_,at.prototype.handleError_,at.prototype.flexNotSupported_=function(){var t=c["default"].createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},u["default"].registerComponent("Player",at),r["default"]=at,e.exports=r["default"]},{"./big-play-button.js":63,"./component.js":67,"./control-bar/control-bar.js":70,"./error-display.js":103,"./fullscreen-api.js":106,"./loading-spinner.js":107,"./media-error.js":108,"./modal-dialog":112,"./poster-image.js":117,"./tech/html5.js":122,"./tech/loader.js":123,"./tech/tech.js":124,"./tracks/audio-track-list.js":125,"./tracks/text-track-display.js":130,"./tracks/text-track-list-converter.js":131,"./tracks/text-track-settings.js":133,"./tracks/video-track-list.js":138,"./utils/browser.js":140,"./utils/buffer.js":141,"./utils/dom.js":143,"./utils/events.js":144,"./utils/fn.js":145,"./utils/guid.js":147,"./utils/log.js":148,"./utils/merge-options.js":149,"./utils/stylesheet.js":150,"./utils/time-ranges.js":151,"./utils/to-title-case.js":152,"global/document":1,"global/window":2,"object.assign":45,"safe-json-parse/tuple":54}],114:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}r.__esModule=!0;var i=t("./player.js"),o=n(i),a=function(t,e){o["default"].prototype[t]=e};r["default"]=a,e.exports=r["default"]},{"./player.js":113}],115:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../clickable-component.js"),u=i(s),l=t("../component.js"),c=i(l),d=t("./popup.js"),f=(i(d),t("../utils/dom.js")),h=(n(f),t("../utils/fn.js")),p=(n(h),t("../utils/to-title-case.js")),g=(i(p),function(t){function e(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),t.call(this,r,n),this.update()}return a(e,t),e.prototype.update=function(){var t=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=t,this.addChild(t),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},e.prototype.createPopup=function(){},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e.prototype.buildCSSClass=function(){var e="vjs-menu-button";return e+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},e}(u["default"]));c["default"].registerComponent("PopupButton",g),r["default"]=g,e.exports=r["default"]},{"../clickable-component.js":65,"../component.js":67,"../utils/dom.js":143,"../utils/fn.js":145,"../utils/to-title-case.js":152,"./popup.js":116}],116:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../component.js"),u=i(s),l=t("../utils/dom.js"),c=n(l),d=t("../utils/fn.js"),f=n(d),h=t("../utils/events.js"),p=n(h),g=function(t){function e(){o(this,e),t.apply(this,arguments)}return a(e,t),e.prototype.addItem=function(t){this.addChild(t),t.on("click",f.bind(this,function(){this.unlockShowing()}))},e.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=c.createEl(e,{className:"vjs-menu-content"});var r=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return r.appendChild(this.contentEl_),p.on(r,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),r},e}(u["default"]);u["default"].registerComponent("Popup",g),r["default"]=g,e.exports=r["default"]},{"../component.js":67,"../utils/dom.js":143,"../utils/events.js":144,"../utils/fn.js":145}],117:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./clickable-component.js"),u=i(s),l=t("./component.js"),c=i(l),d=t("./utils/fn.js"),f=n(d),h=t("./utils/dom.js"),p=n(h),g=t("./utils/browser.js"),y=n(g),v=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.update(),r.on("posterchange",f.bind(this,this.update))}return a(e,t),e.prototype.dispose=function(){this.player().off("posterchange",this.update),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var t=p.createEl("div",{className:"vjs-poster",tabIndex:-1});return y.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=p.createEl("img"),t.appendChild(this.fallbackImg_)),t},e.prototype.update=function(){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},e.prototype.setSrc=function(t){if(this.fallbackImg_)this.fallbackImg_.src=t;else{var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e}},e.prototype.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},e}(u["default"]);c["default"].registerComponent("PosterImage",v),r["default"]=v,e.exports=r["default"]},{"./clickable-component.js":65,"./component.js":67,"./utils/browser.js":140,"./utils/dom.js":143,"./utils/fn.js":145}],118:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}r.__esModule=!0;var o=t("./utils/events.js"),a=i(o),s=t("global/document"),u=n(s),l=t("global/window"),c=n(l),d=!1,f=void 0,h=function(){var t=u["default"].getElementsByTagName("video"),e=u["default"].getElementsByTagName("audio"),r=[];if(t&&t.length>0)for(var n=0,i=t.length;i>n;n++)r.push(t[n]);if(e&&e.length>0)for(var n=0,i=e.length;i>n;n++)r.push(e[n]);if(r&&r.length>0)for(var n=0,i=r.length;i>n;n++){var o=r[n];if(!o||!o.getAttribute){p(1);break}if(void 0===o.player){var a=o.getAttribute("data-setup");if(null!==a){f(o)}}}else d||p(1)},p=function(t,e){e&&(f=e),setTimeout(h,t)};"complete"===u["default"].readyState?d=!0:a.one(c["default"],"load",function(){d=!0});var g=function(){return d};r.autoSetup=h,r.autoSetupTimeout=p,r.hasLoaded=g},{"./utils/events.js":144,"global/document":1,"global/window":2}],119:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../component.js"),u=i(s),l=t("../utils/dom.js"),c=n(l),d=t("object.assign"),f=i(d),h=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(r,"controlsvisible",this.update),this.on(r,this.playerEvent,this.update)}return a(e,t),e.prototype.createEl=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return r.className=r.className+" vjs-slider",r=f["default"]({tabIndex:0},r),n=f["default"]({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),t.prototype.createEl.call(this,e,r,n)},e.prototype.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;t.preventDefault(),c.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},e.prototype.handleMouseMove=function(){},e.prototype.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;c.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},e.prototype.update=function(){if(this.el_){var t=this.getPercent(),e=this.bar;if(e){("number"!=typeof t||t!==t||0>t||t===1/0)&&(t=0);var r=(100*t).toFixed(2)+"%";this.vertical()?e.el().style.height=r:e.el().style.width=r}}},e.prototype.calculateDistance=function(t){var e=c.getPointerPosition(this.el_,t);return this.vertical()?e.y:e.x},e.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepBack()):(38===t.which||39===t.which)&&(t.preventDefault(),this.stepForward())},e.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},e.prototype.vertical=function(t){return void 0===t?this.vertical_||!1:(this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal"),this);
},e}(u["default"]);u["default"].registerComponent("Slider",h),r["default"]=h,e.exports=r["default"]},{"../component.js":67,"../utils/dom.js":143,"object.assign":45}],120:[function(t,e,r){"use strict";function n(t){return t.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},t.streamFromParts=function(t,e){return t+"&"+e},t.streamToParts=function(t){var e={connection:"",stream:""};if(!t)return e;var r=t.search(/&(?!\w+=)/),n=void 0;return-1!==r?n=r+1:(r=n=t.lastIndexOf("/")+1,0===r&&(r=n=t.length)),e.connection=t.substring(0,r),e.stream=t.substring(n,t.length),e},t.isStreamingType=function(e){return e in t.streamingFormats},t.RTMP_RE=/^rtmp[set]?:\/\//i,t.isStreamingSrc=function(e){return t.RTMP_RE.test(e)},t.rtmpSourceHandler={},t.rtmpSourceHandler.canPlayType=function(e){return t.isStreamingType(e)?"maybe":""},t.rtmpSourceHandler.canHandleSource=function(e){var r=t.rtmpSourceHandler.canPlayType(e.type);return r?r:t.isStreamingSrc(e.src)?"maybe":""},t.rtmpSourceHandler.handleSource=function(e,r,n){var i=t.streamToParts(e.src);r.setRtmpConnection(i.connection),r.setRtmpStream(i.stream)},t.registerSourceHandler(t.rtmpSourceHandler),t}r.__esModule=!0,r["default"]=n,e.exports=r["default"]},{}],121:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e=t.charAt(0).toUpperCase()+t.slice(1);O["set"+e]=function(e){return this.el_.vjs_setProperty(t,e)}}function u(t){O[t]=function(){return this.el_.vjs_getProperty(t)}}r.__esModule=!0;for(var l=t("./tech"),c=i(l),d=t("../utils/dom.js"),f=n(d),h=t("../utils/url.js"),p=n(h),g=t("../utils/time-ranges.js"),y=t("./flash-rtmp"),v=i(y),m=t("../component"),b=i(m),_=t("global/window"),T=i(_),w=t("object.assign"),k=i(w),E=T["default"].navigator,S=function(t){function e(r,n){o(this,e),t.call(this,r,n),r.source&&this.ready(function(){this.setSource(r.source)},!0),r.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(r.startTime)},!0),T["default"].videojs=T["default"].videojs||{},T["default"].videojs.Flash=T["default"].videojs.Flash||{},T["default"].videojs.Flash.onReady=e.onReady,T["default"].videojs.Flash.onEvent=e.onEvent,T["default"].videojs.Flash.onError=e.onError,this.on("seeked",function(){this.lastSeekTarget_=void 0})}return a(e,t),e.prototype.createEl=function(){var t=this.options_;t.swf||(t.swf="//vjs.zencdn.net/swf/5.0.1/video-js.swf");var r=t.techId,n=k["default"]({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:t.autoplay,preload:t.preload,loop:t.loop,muted:t.muted},t.flashVars),i=k["default"]({wmode:"opaque",bgcolor:"#000000"},t.params),o=k["default"]({id:r,name:r,"class":"vjs-tech"},t.attributes);return this.el_=e.embed(t.swf,n,i,o),this.el_.tech=this,this.el_},e.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},e.prototype.pause=function(){this.el_.vjs_pause()},e.prototype.src=function(t){return void 0===t?this.currentSrc():this.setSrc(t)},e.prototype.setSrc=function(t){if(t=p.getAbsoluteURL(t),this.el_.vjs_src(t),this.autoplay()){var e=this;this.setTimeout(function(){e.play()},0)}},e.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},e.prototype.setCurrentTime=function(e){var r=this.seekable();r.length&&(e=e>r.start(0)?e:r.start(0),e=e<r.end(r.length-1)?e:r.end(r.length-1),this.lastSeekTarget_=e,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",e),t.prototype.setCurrentTime.call(this))},e.prototype.currentTime=function(t){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},e.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},e.prototype.load=function(){this.el_.vjs_load()},e.prototype.poster=function(){this.el_.vjs_getProperty("poster")},e.prototype.setPoster=function(){},e.prototype.seekable=function(){var t=this.duration();return 0===t?g.createTimeRange():g.createTimeRange(0,t)},e.prototype.buffered=function(){var t=this.el_.vjs_getProperty("buffered");return 0===t.length?g.createTimeRange():g.createTimeRange(t[0][0],t[0][1])},e.prototype.supportsFullScreen=function(){return!1},e.prototype.enterFullScreen=function(){return!1},e}(c["default"]),O=S.prototype,j="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),C="networkState,readyState,initialTime,duration,startOffsetTime,paused,ended,videoWidth,videoHeight".split(","),x=0;x<j.length;x++)u(j[x]),s(j[x]);for(var x=0;x<C.length;x++)u(C[x]);S.isSupported=function(){return S.version()[0]>=10},c["default"].withSourceHandlers(S),S.nativeSourceHandler={},S.nativeSourceHandler.canPlayType=function(t){return t in S.formats?"maybe":""},S.nativeSourceHandler.canHandleSource=function(t){function e(t){var e=p.getFileExtension(t);return e?"video/"+e:""}var r;return r=t.type?t.type.replace(/;.*/,"").toLowerCase():e(t.src),S.nativeSourceHandler.canPlayType(r)},S.nativeSourceHandler.handleSource=function(t,e,r){e.setSrc(t.src)},S.nativeSourceHandler.dispose=function(){},S.registerSourceHandler(S.nativeSourceHandler),S.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},S.onReady=function(t){var e=f.getEl(t),r=e&&e.tech;r&&r.el()&&S.checkReady(r)},S.checkReady=function(t){t.el()&&(t.el().vjs_getProperty?t.triggerReady():this.setTimeout(function(){S.checkReady(t)},50))},S.onEvent=function(t,e){var r=f.getEl(t).tech;r.trigger(e)},S.onError=function(t,e){var r=f.getEl(t).tech;return"srcnotfound"===e?r.error(4):void r.error("FLASH: "+e)},S.version=function(){var t="0,0,0";try{t=new T["default"].ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{E.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=(E.plugins["Shockwave Flash 2.0"]||E.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(r){}}return t.split(",")},S.embed=function(t,e,r,n){var i=S.getEmbedCode(t,e,r,n),o=f.createEl("div",{innerHTML:i}).childNodes[0];return o},S.getEmbedCode=function(t,e,r,n){var i='<object type="application/x-shockwave-flash" ',o="",a="",s="";return e&&Object.getOwnPropertyNames(e).forEach(function(t){o+=t+"="+e[t]+"&amp;"}),r=k["default"]({movie:t,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},r),Object.getOwnPropertyNames(r).forEach(function(t){a+='<param name="'+t+'" value="'+r[t]+'" />'}),n=k["default"]({data:t,width:"100%",height:"100%"},n),Object.getOwnPropertyNames(n).forEach(function(t){s+=t+'="'+n[t]+'" '}),""+i+s+">"+a+"</object>"},v["default"](S),b["default"].registerComponent("Flash",S),c["default"].registerTech("Flash",S),r["default"]=S,e.exports=r["default"]},{"../component":67,"../utils/dom.js":143,"../utils/time-ranges.js":151,"../utils/url.js":153,"./flash-rtmp":120,"./tech":124,"global/window":2,"object.assign":45}],122:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){return t.raw=e,t}r.__esModule=!0;var u=s(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used. \n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used. \n            This may prevent text tracks from loading."]),l=t("./tech.js"),c=i(l),d=t("../component"),f=i(d),h=t("../utils/dom.js"),p=n(h),g=t("../utils/url.js"),y=n(g),v=t("../utils/fn.js"),m=n(v),b=t("../utils/log.js"),_=i(b),T=t("tsml"),w=i(T),k=t("../../../src/js/tracks/text-track.js"),E=(i(k),t("../utils/browser.js")),S=n(E),O=t("global/document"),j=i(O),C=t("global/window"),x=i(C),A=t("object.assign"),P=i(A),L=t("../utils/merge-options.js"),R=i(L),D=t("../utils/to-title-case.js"),M=i(D),I=function(t){function e(r,n){var i=this;o(this,e),t.call(this,r,n);var a=r.source,s=!1;if(a&&(this.el_.currentSrc!==a.src||r.tag&&3===r.tag.initNetworkState_)?this.setSource(a):this.handleLateInit_(this.el_),this.el_.hasChildNodes()){for(var l=this.el_.childNodes,c=l.length,d=[];c--;){var f=l[c],h=f.nodeName.toLowerCase();"track"===h&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(f),this.remoteTextTracks().addTrack_(f.track),s||this.el_.hasAttribute("crossorigin")||!y.isCrossOrigin(f.src)||(s=!0)):d.push(f))}for(var p=0;p<d.length;p++)this.el_.removeChild(d[p])}var g=["audio","video"];g.forEach(function(t){var e=M["default"](t);if(i["featuresNative"+e+"Tracks"]){var r=i.el()[t+"Tracks"];r&&r.addEventListener&&(r.addEventListener("change",m.bind(i,i["handle"+e+"TrackChange_"])),r.addEventListener("addtrack",m.bind(i,i["handle"+e+"TrackAdd_"])),r.addEventListener("removetrack",m.bind(i,i["handle"+e+"TrackRemove_"])))}}),this.featuresNativeTextTracks&&(s&&_["default"].warn(w["default"](u)),this.handleTextTrackChange_=m.bind(this,this.handleTextTrackChange),this.handleTextTrackAdd_=m.bind(this,this.handleTextTrackAdd),this.handleTextTrackRemove_=m.bind(this,this.handleTextTrackRemove),this.proxyNativeTextTracks_()),(S.TOUCH_ENABLED&&r.nativeControlsForTouch===!0||S.IS_IPHONE||S.IS_NATIVE_ANDROID)&&this.setControls(!0),this.triggerReady()}return a(e,t),e.prototype.dispose=function(){var r=this;["audio","video","text"].forEach(function(t){var e=M["default"](t),n=r.el_[t+"Tracks"];n&&n.removeEventListener&&(n.removeEventListener("change",r["handle"+e+"TrackChange_"]),n.removeEventListener("addtrack",r["handle"+e+"TrackAdd_"]),n.removeEventListener("removetrack",r["handle"+e+"TrackRemove_"]))}),e.disposeMediaElement(this.el_),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var t=this.options_.tag;if(!t||this.movingMediaElementInDOM===!1)if(t){var r=t.cloneNode(!0);t.parentNode.insertBefore(r,t),e.disposeMediaElement(t),t=r}else{t=j["default"].createElement("video");var n=this.options_.tag&&p.getElAttributes(this.options_.tag),i=R["default"]({},n);S.TOUCH_ENABLED&&this.options_.nativeControlsForTouch===!0||delete i.controls,p.setElAttributes(t,P["default"](i,{id:this.options_.techId,"class":"vjs-tech"}))}for(var o=["autoplay","preload","loop","muted"],a=o.length-1;a>=0;a--){var s=o[a],u={};"undefined"!=typeof this.options_[s]&&(u[s]=this.options_[s]),p.setElAttributes(t,u)}return t},e.prototype.handleLateInit_=function(t){var e=this;if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var r=function(){var t=!1,r=function(){t=!0};e.on("loadstart",r);var n=function(){t||this.trigger("loadstart")};return e.on("loadedmetadata",n),e.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",n),t||this.trigger("loadstart")}),{v:void 0}}();if("object"==typeof r)return r.v}var n=["loadstart"];n.push("loadedmetadata"),t.readyState>=2&&n.push("loadeddata"),t.readyState>=3&&n.push("canplay"),t.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(t){this.trigger(t)},this)})}},e.prototype.proxyNativeTextTracks_=function(){var t=this.el().textTracks;if(t){for(var e=0;e<t.length;e++)this.textTracks().addTrack_(t[e]);t.addEventListener&&(t.addEventListener("change",this.handleTextTrackChange_),t.addEventListener("addtrack",this.handleTextTrackAdd_),t.addEventListener("removetrack",this.handleTextTrackRemove_))}},e.prototype.handleTextTrackChange=function(t){var e=this.textTracks();this.textTracks().trigger({type:"change",target:e,currentTarget:e,srcElement:e})},e.prototype.handleTextTrackAdd=function(t){this.textTracks().addTrack_(t.track)},e.prototype.handleTextTrackRemove=function(t){this.textTracks().removeTrack_(t.track)},e.prototype.handleVideoTrackChange_=function(t){var e=this.videoTracks();this.videoTracks().trigger({type:"change",target:e,currentTarget:e,srcElement:e})},e.prototype.handleVideoTrackAdd_=function(t){this.videoTracks().addTrack_(t.track)},e.prototype.handleVideoTrackRemove_=function(t){this.videoTracks().removeTrack_(t.track)},e.prototype.handleAudioTrackChange_=function(t){var e=this.audioTracks();this.audioTracks().trigger({type:"change",target:e,currentTarget:e,srcElement:e})},e.prototype.handleAudioTrackAdd_=function(t){this.audioTracks().addTrack_(t.track)},e.prototype.handleAudioTrackRemove_=function(t){this.audioTracks().removeTrack_(t.track)},e.prototype.play=function(){this.el_.play()},e.prototype.pause=function(){this.el_.pause()},e.prototype.paused=function(){return this.el_.paused},e.prototype.currentTime=function(){return this.el_.currentTime},e.prototype.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(e){_["default"](e,"Video is not ready. (Video.js)")}},e.prototype.duration=function(){return this.el_.duration||0},e.prototype.buffered=function(){return this.el_.buffered},e.prototype.volume=function(){return this.el_.volume},e.prototype.setVolume=function(t){this.el_.volume=t},e.prototype.muted=function(){return this.el_.muted},e.prototype.setMuted=function(t){this.el_.muted=t},e.prototype.width=function(){return this.el_.offsetWidth},e.prototype.height=function(){return this.el_.offsetHeight},e.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=x["default"].navigator.userAgent;if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},e.prototype.enterFullScreen=function(){var t=this.el_;"webkitDisplayingFullscreen"in t&&this.one("webkitbeginfullscreen",function(){this.one("webkitendfullscreen",function(){this.trigger("fullscreenchange",{isFullscreen:!1})}),this.trigger("fullscreenchange",{isFullscreen:!0})}),t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},e.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.prototype.src=function(t){return void 0===t?this.el_.src:void this.setSrc(t)},e.prototype.setSrc=function(t){this.el_.src=t},e.prototype.load=function(){this.el_.load()},e.prototype.reset=function(){e.resetMediaElement(this.el_)},e.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.prototype.poster=function(){return this.el_.poster},e.prototype.setPoster=function(t){this.el_.poster=t},e.prototype.preload=function(){return this.el_.preload},e.prototype.setPreload=function(t){this.el_.preload=t},e.prototype.autoplay=function(){return this.el_.autoplay},e.prototype.setAutoplay=function(t){this.el_.autoplay=t},e.prototype.controls=function(){return this.el_.controls},e.prototype.setControls=function(t){this.el_.controls=!!t},e.prototype.loop=function(){return this.el_.loop},e.prototype.setLoop=function(t){this.el_.loop=t},e.prototype.error=function(){return this.el_.error},e.prototype.seeking=function(){return this.el_.seeking},e.prototype.seekable=function(){return this.el_.seekable},e.prototype.ended=function(){return this.el_.ended},e.prototype.defaultMuted=function(){return this.el_.defaultMuted},e.prototype.playbackRate=function(){return this.el_.playbackRate},e.prototype.played=function(){return this.el_.played},e.prototype.setPlaybackRate=function(t){this.el_.playbackRate=t},e.prototype.networkState=function(){return this.el_.networkState},e.prototype.readyState=function(){return this.el_.readyState},e.prototype.videoWidth=function(){return this.el_.videoWidth},e.prototype.videoHeight=function(){return this.el_.videoHeight},e.prototype.textTracks=function(){return t.prototype.textTracks.call(this)},e.prototype.addTextTrack=function(e,r,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,r,n):t.prototype.addTextTrack.call(this,e,r,n)},e.prototype.addRemoteTextTrack=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!this.featuresNativeTextTracks)return t.prototype.addRemoteTextTrack.call(this,e);var r=j["default"].createElement("track");return e.kind&&(r.kind=e.kind),e.label&&(r.label=e.label),(e.language||e.srclang)&&(r.srclang=e.language||e.srclang),e["default"]&&(r["default"]=e["default"]),e.id&&(r.id=e.id),e.src&&(r.src=e.src),this.el().appendChild(r),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack_(r.track),r},e.prototype.removeRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return t.prototype.removeRemoteTextTrack.call(this,e);var r=void 0,n=void 0,i=this.remoteTextTrackEls().getTrackElementByTrack_(e);for(this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack_(e),r=this.$$("track"),n=r.length;n--;)(e===r[n]||e===r[n].track)&&this.el().removeChild(r[n])},e}(c["default"]);I.TEST_VID=j["default"].createElement("video");var N=j["default"].createElement("track");N.kind="captions",N.srclang="en",N.label="English",I.TEST_VID.appendChild(N),I.isSupported=function(){try{I.TEST_VID.volume=.5}catch(t){return!1}return!!I.TEST_VID.canPlayType},c["default"].withSourceHandlers(I),I.nativeSourceHandler={},I.nativeSourceHandler.canPlayType=function(t){try{return I.TEST_VID.canPlayType(t)}catch(e){return""}},I.nativeSourceHandler.canHandleSource=function(t){var e;return t.type?I.nativeSourceHandler.canPlayType(t.type):t.src?(e=y.getFileExtension(t.src),I.nativeSourceHandler.canPlayType("video/"+e)):""},I.nativeSourceHandler.handleSource=function(t,e,r){e.setSrc(t.src)},I.nativeSourceHandler.dispose=function(){},I.registerSourceHandler(I.nativeSourceHandler),I.canControlVolume=function(){try{var t=I.TEST_VID.volume;return I.TEST_VID.volume=t/2+.1,t!==I.TEST_VID.volume}catch(e){return!1}},I.canControlPlaybackRate=function(){if(S.IS_ANDROID&&S.IS_CHROME)return!1;try{var t=I.TEST_VID.playbackRate;return I.TEST_VID.playbackRate=t/2+.1,t!==I.TEST_VID.playbackRate}catch(e){return!1}},I.supportsNativeTextTracks=function(){var t;return t=!!I.TEST_VID.textTracks,t&&I.TEST_VID.textTracks.length>0&&(t="number"!=typeof I.TEST_VID.textTracks[0].mode),t&&S.IS_FIREFOX&&(t=!1),!t||"onremovetrack"in I.TEST_VID.textTracks||(t=!1),t},I.supportsNativeVideoTracks=function(){var t=!!I.TEST_VID.videoTracks;return t},I.supportsNativeAudioTracks=function(){var t=!!I.TEST_VID.audioTracks;return t},I.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],I.prototype.featuresVolumeControl=I.canControlVolume(),I.prototype.featuresPlaybackRate=I.canControlPlaybackRate(),I.prototype.movingMediaElementInDOM=!S.IS_IOS,I.prototype.featuresFullscreenResize=!0,I.prototype.featuresProgressEvents=!0,I.prototype.featuresNativeTextTracks=I.supportsNativeTextTracks(),I.prototype.featuresNativeVideoTracks=I.supportsNativeVideoTracks(),I.prototype.featuresNativeAudioTracks=I.supportsNativeAudioTracks();var F=void 0,U=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,B=/^video\/mp4/i;I.patchCanPlayType=function(){S.ANDROID_VERSION>=4&&(F||(F=I.TEST_VID.constructor.prototype.canPlayType),I.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&U.test(t)?"maybe":F.call(this,t)}),S.IS_OLD_ANDROID&&(F||(F=I.TEST_VID.constructor.prototype.canPlayType),I.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&B.test(t)?"maybe":F.call(this,t)})},I.unpatchCanPlayType=function(){var t=I.TEST_VID.constructor.prototype.canPlayType;return I.TEST_VID.constructor.prototype.canPlayType=F,F=null,t},I.patchCanPlayType(),I.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&!function(){try{t.load()}catch(e){}}()}},I.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),r=e.length;r--;)t.removeChild(e[r]);t.removeAttribute("src"),"function"==typeof t.load&&!function(){try{t.load()}catch(e){}}()}},f["default"].registerComponent("Html5",I),c["default"].registerTech("Html5",I),r["default"]=I,e.exports=r["default"]},{"../../../src/js/tracks/text-track.js":134,"../component":67,"../utils/browser.js":140,"../utils/dom.js":143,"../utils/fn.js":145,"../utils/log.js":148,"../utils/merge-options.js":149,"../utils/to-title-case.js":152,"../utils/url.js":153,"./tech.js":124,"global/document":1,"global/window":2,"object.assign":45,tsml:55}],123:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../component.js"),s=n(a),u=t("./tech.js"),l=n(u),c=t("global/window"),d=(n(c),t("../utils/to-title-case.js")),f=n(d),h=function(t){function e(r,n,o){if(i(this,e),t.call(this,r,n,o),n.playerOptions.sources&&0!==n.playerOptions.sources.length)r.src(n.playerOptions.sources);else for(var a=0,u=n.playerOptions.techOrder;a<u.length;a++){var c=f["default"](u[a]),d=l["default"].getTech(c);if(c||(d=s["default"].getComponent(c)),d&&d.isSupported()){r.loadTech_(c);break}}}return o(e,t),e}(s["default"]);s["default"].registerComponent("MediaLoader",h),r["default"]=h,e.exports=r["default"]},{"../component.js":67,"../utils/to-title-case.js":152,"./tech.js":124,"global/window":2}],124:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../component"),u=i(s),l=t("../tracks/html-track-element"),c=i(l),d=t("../tracks/html-track-element-list"),f=i(d),h=t("../utils/merge-options.js"),p=i(h),g=t("../tracks/text-track"),y=i(g),v=t("../tracks/text-track-list"),m=i(v),b=t("../tracks/video-track"),_=(i(b),t("../tracks/video-track-list")),T=i(_),w=t("../tracks/audio-track-list"),k=i(w),E=t("../tracks/audio-track"),S=(i(E),t("../utils/fn.js")),O=n(S),j=t("../utils/log.js"),C=i(j),x=t("../utils/time-ranges.js"),A=t("../utils/buffer.js"),P=t("../media-error.js"),L=i(P),R=t("global/window"),D=i(R),M=t("global/document"),I=i(M),N=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];o(this,e),r.reportTouchActivity=!1,t.call(this,null,r,n),this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),this.textTracks_=r.textTracks,this.videoTracks_=r.videoTracks,this.audioTracks_=r.audioTracks,this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),(r.nativeCaptions===!1||r.nativeTextTracks===!1)&&(this.featuresNativeTextTracks=!1),this.featuresNativeTextTracks||this.on("ready",this.emulateTextTracks),this.initTextTrackListeners(),this.initTrackListeners(),this.emitTapEvents()}/*! Time Tracking -------------------------------------------------------------- */
/**
     * Set event listeners for on play and pause and tracking current time
     *
     * @method manualTimeUpdatesOn
     */
return a(e,t),e.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.prototype.trackProgress=function(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(O.bind(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)},e.prototype.onDurationChange=function(){this.duration_=this.duration()},e.prototype.buffered=function(){return x.createTimeRange(0,0)},e.prototype.bufferedPercent=function(){return A.bufferedPercent(this.buffered(),this.duration_)},e.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.prototype.dispose=function(){this.clearTracks(["audio","video","text"]),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},e.prototype.clearTracks=function(t){var e=this;t=[].concat(t),t.forEach(function(t){for(var r=e[t+"Tracks"]()||[],n=r.length;n--;){var i=r[n];"text"===t&&e.removeRemoteTextTrack(i),r.removeTrack_(i)}})},e.prototype.reset=function(){},e.prototype.error=function(t){return void 0!==t&&(t instanceof L["default"]?this.error_=t:this.error_=new L["default"](t),this.trigger("error")),this.error_},e.prototype.played=function(){return this.hasStarted_?x.createTimeRange(0,0):x.createTimeRange()},e.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.prototype.initTextTrackListeners=function(){var t=O.bind(this,function(){this.trigger("texttrackchange")}),e=this.textTracks();e&&(e.addEventListener("removetrack",t),e.addEventListener("addtrack",t),this.on("dispose",O.bind(this,function(){e.removeEventListener("removetrack",t),e.removeEventListener("addtrack",t)})))},e.prototype.initTrackListeners=function(){var t=this,e=["video","audio"];e.forEach(function(e){var r=function(){t.trigger(e+"trackchange")},n=t[e+"Tracks"]();n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),t.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)})})},e.prototype.emulateTextTracks=function(){var t=this,e=this.textTracks();if(e){D["default"].WebVTT||null==this.el().parentNode||!function(){var e=I["default"].createElement("script");e.src=t.options_["vtt.js"]||"https://cdn.rawgit.com/gkatsev/vtt.js/vjs-v0.12.1/dist/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},t.on("dispose",function(){e.onload=null,e.onerror=null}),D["default"].WebVTT=!0,t.el().parentNode.appendChild(e)}();var r=function(){return t.trigger("texttrackchange")},n=function(){r();for(var t=0;t<e.length;t++){var n=e[t];n.removeEventListener("cuechange",r),"showing"===n.mode&&n.addEventListener("cuechange",r)}};n(),e.addEventListener("change",n),this.on("dispose",function(){e.removeEventListener("change",n)})}},e.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new T["default"],this.videoTracks_},e.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new k["default"],this.audioTracks_},e.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new m["default"],this.textTracks_},e.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new m["default"],this.remoteTextTracks_},e.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new f["default"],this.remoteTextTrackEls_},e.prototype.addTextTrack=function(t,e,r){if(!t)throw new Error("TextTrack kind is required but was not provided");return F(this,t,e,r)},e.prototype.addRemoteTextTrack=function(t){var e=p["default"](t,{tech:this}),r=new c["default"](e);return this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack_(r.track),this.textTracks().addTrack_(r.track),r},e.prototype.removeRemoteTextTrack=function(t){this.textTracks().removeTrack_(t);var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack_(t)},e.prototype.setPoster=function(){},e.prototype.canPlayType=function(){return""},e.isTech=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerTech=function(t,r){if(e.techs_||(e.techs_={}),!e.isTech(r))throw new Error("Tech "+t+" must be a Tech");return e.techs_[t]=r,r},e.getTech=function(t){return e.techs_&&e.techs_[t]?e.techs_[t]:D["default"]&&D["default"].videojs&&D["default"].videojs[t]?(C["default"].warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),D["default"].videojs[t]):void 0},e}(u["default"]);N.prototype.textTracks_,N.prototype.audioTracks_,N.prototype.videoTracks_;var F=function(t,e,r,n){var i=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],o=t.textTracks();i.kind=e,r&&(i.label=r),n&&(i.language=n),i.tech=t;var a=new y["default"](i);return o.addTrack_(a),a};N.prototype.featuresVolumeControl=!0,N.prototype.featuresFullscreenResize=!1,N.prototype.featuresPlaybackRate=!1,N.prototype.featuresProgressEvents=!1,N.prototype.featuresTimeupdateEvents=!1,N.prototype.featuresNativeTextTracks=!1,N.withSourceHandlers=function(t){t.registerSourceHandler=function(e,r){var n=t.sourceHandlers;n||(n=t.sourceHandlers=[]),void 0===r&&(r=n.length),n.splice(r,0,e)},t.canPlayType=function(e){for(var r=t.sourceHandlers||[],n=void 0,i=0;i<r.length;i++)if(n=r[i].canPlayType(e))return n;return""},t.selectSourceHandler=function(e){for(var r=t.sourceHandlers||[],n=void 0,i=0;i<r.length;i++)if(n=r[i].canHandleSource(e))return r[i];return null},t.canPlaySource=function(e){var r=t.selectSourceHandler(e);return r?r.canHandleSource(e):""};var e=["seekable","duration"];e.forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(e){var r=t.selectSourceHandler(e);return r||(t.nativeSourceHandler?r=t.nativeSourceHandler:C["default"].error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),r!==t.nativeSourceHandler&&(this.currentSource_=e,this.off(this.el_,"loadstart",t.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",t.prototype.successiveLoadStartListener_),this.one(this.el_,"loadstart",t.prototype.firstLoadStartListener_)),this.sourceHandler_=r.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler),this},t.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",t.prototype.successiveLoadStartListener_)},t.prototype.successiveLoadStartListener_=function(){this.currentSource_=null,this.disposeSourceHandler(),this.one(this.el_,"loadstart",t.prototype.successiveLoadStartListener_)},t.prototype.disposeSourceHandler=function(){this.sourceHandler_&&this.sourceHandler_.dispose&&(this.off(this.el_,"loadstart",t.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",t.prototype.successiveLoadStartListener_),this.sourceHandler_.dispose(),this.sourceHandler_=null)}},u["default"].registerComponent("Tech",N),u["default"].registerComponent("MediaTechController",N),N.registerTech("Tech",N),r["default"]=N,e.exports=r["default"]},{"../component":67,"../media-error.js":108,"../tracks/audio-track":126,"../tracks/audio-track-list":125,"../tracks/html-track-element":128,"../tracks/html-track-element-list":127,"../tracks/text-track":134,"../tracks/text-track-list":132,"../tracks/video-track":139,"../tracks/video-track-list":138,"../utils/buffer.js":141,"../utils/fn.js":145,"../utils/log.js":148,"../utils/merge-options.js":149,"../utils/time-ranges.js":151,"global/document":1,"global/window":2}],125:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./track-list"),u=i(s),l=t("../utils/browser.js"),c=n(l),d=t("global/document"),f=i(d),h=function(t,e){for(var r=0;r<t.length;r++)e.id!==t[r].id&&(t[r].enabled=!1)},p=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];o(this,e);for(var n=void 0,i=r.length-1;i>=0;i--)if(r[i].enabled){h(r,r[i]);break}if(c.IS_IE8){n=f["default"].createElement("custom");for(var a in u["default"].prototype)"constructor"!==a&&(n[a]=u["default"].prototype[a]);for(var a in e.prototype)"constructor"!==a&&(n[a]=e.prototype[a])}return n=t.call(this,r,n),n.changing_=!1,n}return a(e,t),e.prototype.addTrack_=function(e){var r=this;e.enabled&&h(this,e),t.prototype.addTrack_.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){r.changing_||(r.changing_=!0,h(r,e),r.changing_=!1,r.trigger("change"))})},e.prototype.addTrack=function(t){this.addTrack_(t)},e.prototype.removeTrack=function(e){t.prototype.removeTrack_.call(this,e)},e}(u["default"]);r["default"]=p,e.exports=r["default"]},{"../utils/browser.js":140,"./track-list":136,"global/document":1}],126:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./track-enums"),u=t("./track"),l=i(u),c=t("../utils/merge-options"),d=i(c),f=t("../utils/browser.js"),h=n(f),p=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,e);var n=d["default"](r,{kind:s.AudioTrackKind[r.kind]||""}),i=t.call(this,n),a=!1;if(h.IS_IE8)for(var u in e.prototype)"constructor"!==u&&(i[u]=e.prototype[u]);return Object.defineProperty(i,"enabled",{get:function(){return a},set:function(t){"boolean"==typeof t&&t!==a&&(a=t,this.trigger("enabledchange"))}}),n.enabled&&(i.enabled=n.enabled),i.loaded_=!0,i}return a(e,t),e}(l["default"]);r["default"]=p,e.exports=r["default"]},{"../utils/browser.js":140,"../utils/merge-options":149,"./track":137,"./track-enums":135}],127:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=t("../utils/browser.js"),s=i(a),u=t("global/document"),l=n(u),c=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];o(this,t);var r=this;if(s.IS_IE8){r=l["default"].createElement("custom");for(var n in t.prototype)"constructor"!==n&&(r[n]=t.prototype[n])}r.trackElements_=[],Object.defineProperty(r,"length",{get:function(){return this.trackElements_.length}});for(var i=0,a=e.length;a>i;i++)r.addTrackElement_(e[i]);return s.IS_IE8?r:void 0}return t.prototype.addTrackElement_=function(t){this.trackElements_.push(t)},t.prototype.getTrackElementByTrack_=function(t){for(var e=void 0,r=0,n=this.trackElements_.length;n>r;r++)if(t===this.trackElements_[r].track){e=this.trackElements_[r];break}return e},t.prototype.removeTrackElement_=function(t){for(var e=0,r=this.trackElements_.length;r>e;e++)if(t===this.trackElements_[e]){this.trackElements_.splice(e,1);break}},t}();r["default"]=c,e.exports=r["default"]},{"../utils/browser.js":140,"global/document":1}],128:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../utils/browser.js"),u=i(s),l=t("global/document"),c=n(l),d=t("../event-target"),f=n(d),h=t("../tracks/text-track"),p=n(h),g=0,y=1,v=2,m=3,b=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,e),t.call(this);var n=void 0,i=this;if(u.IS_IE8){i=c["default"].createElement("custom");for(var a in e.prototype)"constructor"!==a&&(i[a]=e.prototype[a])}var s=new p["default"](r);return i.kind=s.kind,i.src=s.src,i.srclang=s.language,i.label=s.label,i["default"]=s["default"],Object.defineProperty(i,"readyState",{get:function(){return n}}),Object.defineProperty(i,"track",{get:function(){return s}}),n=g,s.addEventListener("loadeddata",function(){n=v,i.trigger({type:"load",target:i})}),u.IS_IE8?i:void 0}return a(e,t),e}(f["default"]);b.prototype.allowedEvents_={load:"load"},b.NONE=g,b.LOADING=y,b.LOADED=v,b.ERROR=m,r["default"]=b,e.exports=r["default"]},{"../event-target":104,"../tracks/text-track":134,"../utils/browser.js":140,"global/document":1}],129:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=t("../utils/browser.js"),s=i(a),u=t("global/document"),l=n(u),c=function(){function t(e){o(this,t);var r=this;if(s.IS_IE8){r=l["default"].createElement("custom");for(var n in t.prototype)"constructor"!==n&&(r[n]=t.prototype[n])}return t.prototype.setCues_.call(r,e),Object.defineProperty(r,"length",{get:function(){return this.length_}}),s.IS_IE8?r:void 0}return t.prototype.setCues_=function(t){var e=this.length||0,r=0,n=t.length;this.cues_=t,this.length_=t.length;var i=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(n>e)for(r=e;n>r;r++)i.call(this,r)},t.prototype.getCueById=function(t){for(var e=null,r=0,n=this.length;n>r;r++){var i=this[r];if(i.id===t){e=i;break}}return e},t}();r["default"]=c,e.exports=r["default"]},{"../utils/browser.js":140,"global/document":1}],130:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){return"rgba("+parseInt(t[1]+t[1],16)+","+parseInt(t[2]+t[2],16)+","+parseInt(t[3]+t[3],16)+","+e+")"}function u(t,e,r){try{t.style[e]=r}catch(n){}}r.__esModule=!0;var l=t("../component"),c=i(l),d=t("../menu/menu.js"),f=(i(d),t("../menu/menu-item.js")),h=(i(f),t("../menu/menu-button.js")),p=(i(h),t("../utils/fn.js")),g=n(p),y=t("global/document"),v=(i(y),t("global/window")),m=i(v),b="#222",_="#ccc",T={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},w=function(t){function e(r,n,i){o(this,e),t.call(this,r,n,i),r.on("loadstart",g.bind(this,this.toggleDisplay)),r.on("texttrackchange",g.bind(this,this.updateDisplay)),r.ready(g.bind(this,function(){if(r.tech_&&r.tech_.featuresNativeTextTracks)return void this.hide();r.on("fullscreenchange",g.bind(this,this.updateDisplay));for(var t=this.options_.playerOptions.tracks||[],e=0;e<t.length;e++){var n=t[e];this.player_.addRemoteTextTrack(n)}var i={captions:1,subtitles:1},o=this.player_.textTracks(),a=void 0,s=void 0;if(o){for(var e=0;e<o.length;e++){var n=o[e];n["default"]&&("descriptions"!==n.kind||a?n.kind in i&&!s&&(s=n):a=n)}s?s.mode="showing":a&&(a.mode="showing")}}))}return a(e,t),e.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"assertive","aria-atomic":"true"})},e.prototype.clearDisplay=function(){"function"==typeof m["default"].WebVTT&&m["default"].WebVTT.processCues(m["default"],[],this.el_)},e.prototype.updateDisplay=function(){var t=this.player_.textTracks();if(this.clearDisplay(),t){for(var e=null,r=null,n=t.length;n--;){var i=t[n];"showing"===i.mode&&("descriptions"===i.kind?e=i:r=i)}r?this.updateForTrack(r):e&&this.updateForTrack(e)}},e.prototype.updateForTrack=function(t){if("function"==typeof m["default"].WebVTT&&t.activeCues){for(var e=this.player_.textTrackSettings.getValues(),r=[],n=0;n<t.activeCues.length;n++)r.push(t.activeCues[n]);m["default"].WebVTT.processCues(m["default"],r,this.el_);for(var i=r.length;i--;){var o=r[i];if(o){var a=o.displayState;if(e.color&&(a.firstChild.style.color=e.color),e.textOpacity&&u(a.firstChild,"color",s(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(a.firstChild.style.backgroundColor=e.backgroundColor),e.backgroundOpacity&&u(a.firstChild,"backgroundColor",s(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(e.windowOpacity?u(a,"backgroundColor",s(e.windowColor,e.windowOpacity)):a.style.backgroundColor=e.windowColor),e.edgeStyle&&("dropshadow"===e.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px "+b+", 2px 2px 4px "+b+", 2px 2px 5px "+b:"raised"===e.edgeStyle?a.firstChild.style.textShadow="1px 1px "+b+", 2px 2px "+b+", 3px 3px "+b:"depressed"===e.edgeStyle?a.firstChild.style.textShadow="1px 1px "+_+", 0 1px "+_+", -1px -1px "+b+", 0 -1px "+b:"uniform"===e.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px "+b+", 0 0 4px "+b+", 0 0 4px "+b+", 0 0 4px "+b)),e.fontPercent&&1!==e.fontPercent){var l=m["default"].parseFloat(a.style.fontSize);a.style.fontSize=l*e.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=T[e.fontFamily])}}}},e}(c["default"]);c["default"].registerComponent("TextTrackDisplay",w),r["default"]=w,e.exports=r["default"]},{"../component":67,"../menu/menu-button.js":109,"../menu/menu-item.js":110,"../menu/menu.js":111,"../utils/fn.js":145,"global/document":1,"global/window":2}],131:[function(t,e,r){"use strict";r.__esModule=!0;var n=function(t){var e=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,r,n){return t[r]&&(e[r]=t[r]),e},{cues:t.cues&&Array.prototype.map.call(t.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})});return e},i=function(t){var e=t.$$("track"),r=Array.prototype.map.call(e,function(t){return t.track}),i=Array.prototype.map.call(e,function(t){var e=n(t.track);return t.src&&(e.src=t.src),e});return i.concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===r.indexOf(t)}).map(n))},o=function(t,e){return t.forEach(function(t){var r=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return r.addCue(t)})}),e.textTracks()};r["default"]={textTracksToJson:i,jsonToTextTracks:o,trackToJson_:n},e.exports=r["default"]},{}],132:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./track-list"),u=i(s),l=t("../utils/fn.js"),c=n(l),d=t("../utils/browser.js"),f=n(d),h=t("global/document"),p=i(h),g=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];o(this,e);var n=void 0;if(f.IS_IE8){n=p["default"].createElement("custom");for(var i in u["default"].prototype)"constructor"!==i&&(n[i]=u["default"].prototype[i]);for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}return n=t.call(this,r,n)}return a(e,t),e.prototype.addTrack_=function(e){t.prototype.addTrack_.call(this,e),e.addEventListener("modechange",c.bind(this,function(){this.trigger("change")}))},e.prototype.removeTrack_=function(t){for(var e=void 0,r=0,n=this.length;n>r;r++)if(this[r]===t){e=this[r],e.off&&e.off(),this.tracks_.splice(r,1);break}e&&this.trigger({track:e,type:"removetrack"})},e.prototype.getTrackById=function(t){for(var e=null,r=0,n=this.length;n>r;r++){var i=this[r];if(i.id===t){e=i;break}}return e},e}(u["default"]);r["default"]=g,e.exports=r["default"]},{"../utils/browser.js":140,"../utils/fn.js":145,"./track-list":136,"global/document":1}],133:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e=void 0;return t.selectedOptions?e=t.selectedOptions[0]:t.options&&(e=t.options[t.options.selectedIndex]),e.value}function u(t,e){if(e){var r=void 0;for(r=0;r<t.options.length;r++){var n=t.options[r];if(n.value===e)break}t.selectedIndex=r}}function l(){var t='<div class="vjs-tracksettings">\n      <div class="vjs-tracksettings-colors">\n        <div class="vjs-fg-color vjs-tracksetting">\n            <label class="vjs-label">Foreground</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-text-opacity vjs-opacity">\n              <select>\n                <option value="">---</option>\n                <option value="1">Opaque</option>\n                <option value="0.5">Semi-Opaque</option>\n              </select>\n            </span>\n        </div> <!-- vjs-fg-color -->\n        <div class="vjs-bg-color vjs-tracksetting">\n            <label class="vjs-label">Background</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-bg-opacity vjs-opacity">\n                <select>\n                  <option value="">---</option>\n                  <option value="1">Opaque</option>\n                  <option value="0.5">Semi-Transparent</option>\n                  <option value="0">Transparent</option>\n                </select>\n            </span>\n        </div> <!-- vjs-bg-color -->\n        <div class="window-color vjs-tracksetting">\n            <label class="vjs-label">Window</label>\n            <select>\n              <option value="">---</option>\n              <option value="#FFF">White</option>\n              <option value="#000">Black</option>\n              <option value="#F00">Red</option>\n              <option value="#0F0">Green</option>\n              <option value="#00F">Blue</option>\n              <option value="#FF0">Yellow</option>\n              <option value="#F0F">Magenta</option>\n              <option value="#0FF">Cyan</option>\n            </select>\n            <span class="vjs-window-opacity vjs-opacity">\n                <select>\n                  <option value="">---</option>\n                  <option value="1">Opaque</option>\n                  <option value="0.5">Semi-Transparent</option>\n                  <option value="0">Transparent</option>\n                </select>\n            </span>\n        </div> <!-- vjs-window-color -->\n      </div> <!-- vjs-tracksettings -->\n      <div class="vjs-tracksettings-font">\n        <div class="vjs-font-percent vjs-tracksetting">\n          <label class="vjs-label">Font Size</label>\n          <select>\n            <option value="0.50">50%</option>\n            <option value="0.75">75%</option>\n            <option value="1.00" selected>100%</option>\n            <option value="1.25">125%</option>\n            <option value="1.50">150%</option>\n            <option value="1.75">175%</option>\n            <option value="2.00">200%</option>\n            <option value="3.00">300%</option>\n            <option value="4.00">400%</option>\n          </select>\n        </div> <!-- vjs-font-percent -->\n        <div class="vjs-edge-style vjs-tracksetting">\n          <label class="vjs-label">Text Edge Style</label>\n          <select>\n            <option value="none">None</option>\n            <option value="raised">Raised</option>\n            <option value="depressed">Depressed</option>\n            <option value="uniform">Uniform</option>\n            <option value="dropshadow">Dropshadow</option>\n          </select>\n        </div> <!-- vjs-edge-style -->\n        <div class="vjs-font-family vjs-tracksetting">\n          <label class="vjs-label">Font Family</label>\n          <select>\n            <option value="">Default</option>\n            <option value="monospaceSerif">Monospace Serif</option>\n            <option value="proportionalSerif">Proportional Serif</option>\n            <option value="monospaceSansSerif">Monospace Sans-Serif</option>\n            <option value="proportionalSansSerif">Proportional Sans-Serif</option>\n            <option value="casual">Casual</option>\n            <option value="script">Script</option>\n            <option value="small-caps">Small Caps</option>\n          </select>\n        </div> <!-- vjs-font-family -->\n      </div>\n    </div>\n    <div class="vjs-tracksettings-controls">\n      <button class="vjs-default-button">Defaults</button>\n      <button class="vjs-done-button">Done</button>\n    </div>';return t}r.__esModule=!0;var c=t("../component"),d=i(c),f=t("../utils/events.js"),h=n(f),p=t("../utils/fn.js"),g=n(p),y=t("../utils/log.js"),v=i(y),m=t("safe-json-parse/tuple"),b=i(m),_=t("global/window"),T=i(_),w=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.hide(),void 0===n.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),h.on(this.$(".vjs-done-button"),"click",g.bind(this,function(){this.saveSettings(),this.hide()})),h.on(this.$(".vjs-default-button"),"click",g.bind(this,function(){this.$(".vjs-fg-color > select").selectedIndex=0,this.$(".vjs-bg-color > select").selectedIndex=0,this.$(".window-color > select").selectedIndex=0,this.$(".vjs-text-opacity > select").selectedIndex=0,this.$(".vjs-bg-opacity > select").selectedIndex=0,this.$(".vjs-window-opacity > select").selectedIndex=0,this.$(".vjs-edge-style select").selectedIndex=0,this.$(".vjs-font-family select").selectedIndex=0,this.$(".vjs-font-percent select").selectedIndex=2,this.updateDisplay()})),h.on(this.$(".vjs-fg-color > select"),"change",g.bind(this,this.updateDisplay)),h.on(this.$(".vjs-bg-color > select"),"change",g.bind(this,this.updateDisplay)),h.on(this.$(".window-color > select"),"change",g.bind(this,this.updateDisplay)),h.on(this.$(".vjs-text-opacity > select"),"change",g.bind(this,this.updateDisplay)),h.on(this.$(".vjs-bg-opacity > select"),"change",g.bind(this,this.updateDisplay)),h.on(this.$(".vjs-window-opacity > select"),"change",g.bind(this,this.updateDisplay)),h.on(this.$(".vjs-font-percent select"),"change",g.bind(this,this.updateDisplay)),h.on(this.$(".vjs-edge-style select"),"change",g.bind(this,this.updateDisplay)),h.on(this.$(".vjs-font-family select"),"change",g.bind(this,this.updateDisplay)),this.options_.persistTextTrackSettings&&this.restoreSettings()}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-caption-settings vjs-modal-overlay",innerHTML:l()})},e.prototype.getValues=function(){var t=s(this.$(".vjs-edge-style select")),e=s(this.$(".vjs-font-family select")),r=s(this.$(".vjs-fg-color > select")),n=s(this.$(".vjs-text-opacity > select")),i=s(this.$(".vjs-bg-color > select")),o=s(this.$(".vjs-bg-opacity > select")),a=s(this.$(".window-color > select")),u=s(this.$(".vjs-window-opacity > select")),l=T["default"].parseFloat(s(this.$(".vjs-font-percent > select"))),c={
backgroundOpacity:o,textOpacity:n,windowOpacity:u,edgeStyle:t,fontFamily:e,color:r,backgroundColor:i,windowColor:a,fontPercent:l};for(var d in c)(""===c[d]||"none"===c[d]||"fontPercent"===d&&1===c[d])&&delete c[d];return c},e.prototype.setValues=function(t){u(this.$(".vjs-edge-style select"),t.edgeStyle),u(this.$(".vjs-font-family select"),t.fontFamily),u(this.$(".vjs-fg-color > select"),t.color),u(this.$(".vjs-text-opacity > select"),t.textOpacity),u(this.$(".vjs-bg-color > select"),t.backgroundColor),u(this.$(".vjs-bg-opacity > select"),t.backgroundOpacity),u(this.$(".window-color > select"),t.windowColor),u(this.$(".vjs-window-opacity > select"),t.windowOpacity);var e=t.fontPercent;e&&(e=e.toFixed(2)),u(this.$(".vjs-font-percent > select"),e)},e.prototype.restoreSettings=function(){var t=void 0,e=void 0;try{var r=b["default"](T["default"].localStorage.getItem("vjs-text-track-settings"));t=r[0],e=r[1],t&&v["default"].error(t)}catch(n){v["default"].warn(n)}e&&this.setValues(e)},e.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.getOwnPropertyNames(t).length>0?T["default"].localStorage.setItem("vjs-text-track-settings",JSON.stringify(t)):T["default"].localStorage.removeItem("vjs-text-track-settings")}catch(e){v["default"].warn(e)}}},e.prototype.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},e}(d["default"]);d["default"].registerComponent("TextTrackSettings",w),r["default"]=w,e.exports=r["default"]},{"../component":67,"../utils/events.js":144,"../utils/fn.js":145,"../utils/log.js":148,"global/window":2,"safe-json-parse/tuple":54}],134:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./text-track-cue-list"),u=i(s),l=t("../utils/fn.js"),c=n(l),d=t("./track-enums"),f=t("../utils/log.js"),h=i(f),p=t("global/document"),g=(i(p),t("global/window")),y=i(g),v=t("./track.js"),m=i(v),b=t("../utils/url.js"),_=t("xhr"),T=i(_),w=t("../utils/merge-options"),k=i(w),E=t("../utils/browser.js"),S=n(E),O=function(t,e){var r=new y["default"].WebVTT.Parser(y["default"],y["default"].vttjs,y["default"].WebVTT.StringDecoder()),n=[];r.oncue=function(t){e.addCue(t)},r.onparsingerror=function(t){n.push(t)},r.onflush=function(){e.trigger({type:"loadeddata",target:e})},r.parse(t),n.length>0&&(console.groupCollapsed&&console.groupCollapsed("Text Track parsing errors for "+e.src),n.forEach(function(t){return h["default"].error(t)}),console.groupEnd&&console.groupEnd()),r.flush()},j=function(t,e){var r={uri:t},n=b.isCrossOrigin(t);n&&(r.cors=n),T["default"](r,c.bind(this,function(t,r,n){return t?h["default"].error(t,r):(e.loaded_=!0,void("function"!=typeof y["default"].WebVTT?e.tech_&&!function(){var t=function(){return O(n,e)};e.tech_.on("vttjsloaded",t),e.tech_.on("vttjserror",function(){h["default"].error("vttjs failed to load, stopping trying to process "+e.src),e.tech_.off("vttjsloaded",t)})}():O(n,e)))}))},C=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,e),!r.tech)throw new Error("A tech was not provided.");var n=k["default"](r,{kind:d.TextTrackKind[r.kind]||"subtitles",language:r.language||r.srclang||""}),i=d.TextTrackMode[n.mode]||"disabled",a=n["default"];("metadata"===n.kind||"chapters"===n.kind)&&(i="hidden");var s=t.call(this,n);if(s.tech_=n.tech,S.IS_IE8)for(var l in e.prototype)"constructor"!==l&&(s[l]=e.prototype[l]);s.cues_=[],s.activeCues_=[];var f=new u["default"](s.cues_),h=new u["default"](s.activeCues_),p=!1,g=c.bind(s,function(){this.activeCues,p&&(this.trigger("cuechange"),p=!1)});return"disabled"!==i&&s.tech_.on("timeupdate",g),Object.defineProperty(s,"default",{get:function(){return a},set:function(){}}),Object.defineProperty(s,"mode",{get:function(){return i},set:function(t){d.TextTrackMode[t]&&(i=t,"showing"===i&&this.tech_.on("timeupdate",g),this.trigger("modechange"))}}),Object.defineProperty(s,"cues",{get:function(){return this.loaded_?f:null},set:function(){}}),Object.defineProperty(s,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return h;for(var t=this.tech_.currentTime(),e=[],r=0,n=this.cues.length;n>r;r++){var i=this.cues[r];i.startTime<=t&&i.endTime>=t?e.push(i):i.startTime===i.endTime&&i.startTime<=t&&i.startTime+.5>=t&&e.push(i)}if(p=!1,e.length!==this.activeCues_.length)p=!0;else for(var r=0;r<e.length;r++)-1===this.activeCues_.indexOf(e[r])&&(p=!0);return this.activeCues_=e,h.setCues_(this.activeCues_),h},set:function(){}}),n.src?(s.src=n.src,j(n.src,s)):s.loaded_=!0,s}return a(e,t),e.prototype.addCue=function(t){var e=this.tech_.textTracks();if(e)for(var r=0;r<e.length;r++)e[r]!==this&&e[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},e.prototype.removeCue=function(t){for(var e=!1,r=0,n=this.cues_.length;n>r;r++){var i=this.cues_[r];i===t&&(this.cues_.splice(r,1),e=!0)}e&&this.cues.setCues_(this.cues_)},e}(m["default"]);C.prototype.allowedEvents_={cuechange:"cuechange"},r["default"]=C,e.exports=r["default"]},{"../utils/browser.js":140,"../utils/fn.js":145,"../utils/log.js":148,"../utils/merge-options":149,"../utils/url.js":153,"./text-track-cue-list":129,"./track-enums":135,"./track.js":137,"global/document":1,"global/window":2,xhr:56}],135:[function(t,e,r){"use strict";r.__esModule=!0;var n={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},i={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},o={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},a={disabled:"disabled",hidden:"hidden",showing:"showing"};r["default"]={VideoTrackKind:n,AudioTrackKind:i,TextTrackKind:o,TextTrackMode:a},e.exports=r["default"]},{}],136:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../event-target"),u=i(s),l=t("../utils/fn.js"),c=(n(l),t("../utils/browser.js")),d=n(c),f=t("global/document"),h=i(f),p=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(o(this,e),t.call(this),!n&&(n=this,d.IS_IE8)){n=h["default"].createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}n.tracks_=[],Object.defineProperty(n,"length",{get:function(){return this.tracks_.length}});for(var a=0;a<r.length;a++)n.addTrack_(r[a]);return n}return a(e,t),e.prototype.addTrack_=function(t){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack"}))},e.prototype.removeTrack_=function(t){for(var e=void 0,r=0,n=this.length;n>r;r++)if(this[r]===t){e=this[r],e.off&&e.off(),this.tracks_.splice(r,1);break}e&&this.trigger({track:e,type:"removetrack"})},e.prototype.getTrackById=function(t){for(var e=null,r=0,n=this.length;n>r;r++){var i=this[r];if(i.id===t){e=i;break}}return e},e}(u["default"]);p.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var g in p.prototype.allowedEvents_)p.prototype["on"+g]=null;r["default"]=p,e.exports=r["default"]},{"../event-target":104,"../utils/browser.js":140,"../utils/fn.js":145,"global/document":1}],137:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../utils/browser.js"),u=i(s),l=t("global/document"),c=n(l),d=t("../utils/guid.js"),f=i(d),h=t("../event-target"),p=n(h),g=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,e),t.call(this);var n=this;if(u.IS_IE8){n=c["default"].createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}var a={id:r.id||"vjs_track_"+f.newGUID(),kind:r.kind||"",label:r.label||"",language:r.language||""},s=function(t){Object.defineProperty(n,t,{get:function(){return a[t]},set:function(){}})};for(var l in a)s(l);return n}return a(e,t),e}(p["default"]);r["default"]=g,e.exports=r["default"]},{"../event-target":104,"../utils/browser.js":140,"../utils/guid.js":147,"global/document":1}],138:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./track-list"),u=i(s),l=t("../utils/browser.js"),c=n(l),d=t("global/document"),f=i(d),h=function(t,e){for(var r=0;r<t.length;r++)e.id!==t[r].id&&(t[r].selected=!1)},p=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];o(this,e);for(var n=void 0,i=r.length-1;i>=0;i--)if(r[i].selected){h(r,r[i]);break}if(c.IS_IE8){n=f["default"].createElement("custom");for(var a in u["default"].prototype)"constructor"!==a&&(n[a]=u["default"].prototype[a]);for(var a in e.prototype)"constructor"!==a&&(n[a]=e.prototype[a])}return n=t.call(this,r,n),n.changing_=!1,Object.defineProperty(n,"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),n}return a(e,t),e.prototype.addTrack_=function(e){var r=this;e.selected&&h(this,e),t.prototype.addTrack_.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){r.changing_||(r.changing_=!0,h(r,e),r.changing_=!1,r.trigger("change"))})},e.prototype.addTrack=function(t){this.addTrack_(t)},e.prototype.removeTrack=function(e){t.prototype.removeTrack_.call(this,e)},e}(u["default"]);r["default"]=p,e.exports=r["default"]},{"../utils/browser.js":140,"./track-list":136,"global/document":1}],139:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./track-enums"),u=t("./track"),l=i(u),c=t("../utils/merge-options"),d=i(c),f=t("../utils/browser.js"),h=n(f),p=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];o(this,e);var n=d["default"](r,{kind:s.VideoTrackKind[r.kind]||""}),i=t.call(this,n),a=!1;if(h.IS_IE8)for(var u in e.prototype)"constructor"!==u&&(i[u]=e.prototype[u]);return Object.defineProperty(i,"selected",{get:function(){return a},set:function(t){"boolean"==typeof t&&t!==a&&(a=t,this.trigger("selectedchange"))}}),n.selected&&(i.selected=n.selected),i}return a(e,t),e}(l["default"]);r["default"]=p,e.exports=r["default"]},{"../utils/browser.js":140,"../utils/merge-options":149,"./track":137,"./track-enums":135}],140:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}r.__esModule=!0;var i=t("global/document"),o=n(i),a=t("global/window"),s=n(a),u=s["default"].navigator.userAgent,l=/AppleWebKit\/([\d.]+)/i.exec(u),c=l?parseFloat(l.pop()):null,d=/iPad/i.test(u);r.IS_IPAD=d;var f=/iPhone/i.test(u)&&!d;r.IS_IPHONE=f;var h=/iPod/i.test(u);r.IS_IPOD=h;var p=f||d||h;r.IS_IOS=p;var g=function(){var t=u.match(/OS (\d+)_/i);return t&&t[1]?t[1]:void 0}();r.IOS_VERSION=g;var y=/Android/i.test(u);r.IS_ANDROID=y;var v=function(){var t,e,r=u.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return r?(t=r[1]&&parseFloat(r[1]),e=r[2]&&parseFloat(r[2]),t&&e?parseFloat(r[1]+"."+r[2]):t?t:null):null}();r.ANDROID_VERSION=v;var m=y&&/webkit/i.test(u)&&2.3>v;r.IS_OLD_ANDROID=m;var b=y&&5>v&&537>c;r.IS_NATIVE_ANDROID=b;var _=/Firefox/i.test(u);r.IS_FIREFOX=_;var T=/Edge/i.test(u);r.IS_EDGE=T;var w=!T&&/Chrome/i.test(u);r.IS_CHROME=w;var k=/MSIE\s8\.0/.test(u);r.IS_IE8=k;var E=!!("ontouchstart"in s["default"]||s["default"].DocumentTouch&&o["default"]instanceof s["default"].DocumentTouch);r.TOUCH_ENABLED=E;var S="backgroundSize"in o["default"].createElement("video").style;r.BACKGROUND_SIZE_SUPPORTED=S},{"global/document":1,"global/window":2}],141:[function(t,e,r){"use strict";function n(t,e){var r,n,o=0;if(!e)return 0;t&&t.length||(t=i.createTimeRange(0,0));for(var a=0;a<t.length;a++)r=t.start(a),n=t.end(a),n>e&&(n=e),o+=n-r;return o/e}r.__esModule=!0,r.bufferedPercent=n;var i=t("./time-ranges.js")},{"./time-ranges.js":151}],142:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}r.__esModule=!0;var i=t("./log.js"),o=n(i),a={get:function(t,e){return t[e]},set:function(t,e,r){return t[e]=r,!0}};r["default"]=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("function"==typeof Proxy){var r=function(){var r={};return Object.keys(e).forEach(function(t){a.hasOwnProperty(t)&&(r[t]=function(){return o["default"].warn(e[t]),a[t].apply(this,arguments)})}),{v:new Proxy(t,r)}}();if("object"==typeof r)return r.v}return t},e.exports=r["default"]},{"./log.js":148}],143:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){return t.raw=e,t}function a(t){return"string"==typeof t&&/\S/.test(t)}function s(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function u(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function l(t){return function(e,r){return a(e)?(a(r)&&(r=M["default"].querySelector(r)),(j(r)?r:M["default"])[t](e)):M["default"][t](null)}}function c(t){return 0===t.indexOf("#")&&(t=t.slice(1)),M["default"].getElementById(t)}function d(){var t=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=M["default"].createElement(t);return Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(G["default"].warn(V["default"](R,t,r)),n.setAttribute(t,r)):n[t]=r}),Object.getOwnPropertyNames(r).forEach(function(t){r[t];n.setAttribute(t,r[t])}),n}function f(t,e){"undefined"==typeof t.textContent?t.innerText=e:t.textContent=e}function h(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function p(t){var e=t[q];return e||(e=t[q]=U.newGUID()),W[e]||(W[e]={}),W[e]}function g(t){var e=t[q];return e?!!Object.getOwnPropertyNames(W[e]).length:!1}function y(t){var e=t[q];if(e){delete W[e];try{delete t[q]}catch(r){t.removeAttribute?t.removeAttribute(q):t[q]=null}}}function v(t,e){return t.classList?t.classList.contains(e):(s(e),u(e).test(t.className))}function m(t,e){return t.classList?t.classList.add(e):v(t,e)||(t.className=(t.className+" "+e).trim()),t}function b(t,e){return t.classList?t.classList.remove(e):(s(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function _(t,e,r){var n=v(t,e);return"function"==typeof r&&(r=r(t,e)),"boolean"!=typeof r&&(r=!n),r!==n?(r?m(t,e):b(t,e),t):void 0}function T(t,e){Object.getOwnPropertyNames(e).forEach(function(r){var n=e[r];null===n||"undefined"==typeof n||n===!1?t.removeAttribute(r):t.setAttribute(r,n===!0?"":n)})}function w(t){var e,r,n,i,o;if(e={},r=",autoplay,controls,loop,muted,default,",t&&t.attributes&&t.attributes.length>0){n=t.attributes;for(var a=n.length-1;a>=0;a--)i=n[a].name,o=n[a].value,("boolean"==typeof t[i]||-1!==r.indexOf(","+i+","))&&(o=null!==o?!0:!1),e[i]=o}return e}function k(){M["default"].body.focus(),M["default"].onselectstart=function(){return!1}}function E(){M["default"].onselectstart=function(){return!0}}function S(t){var e=void 0;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var r=M["default"].documentElement,n=M["default"].body,i=r.clientLeft||n.clientLeft||0,o=N["default"].pageXOffset||n.scrollLeft,a=e.left+o-i,s=r.clientTop||n.clientTop||0,u=N["default"].pageYOffset||n.scrollTop,l=e.top+u-s;return{left:Math.round(a),top:Math.round(l)}}function O(t,e){var r={},n=S(t),i=t.offsetWidth,o=t.offsetHeight,a=n.top,s=n.left,u=e.pageY,l=e.pageX;return e.changedTouches&&(l=e.changedTouches[0].pageX,u=e.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(a-u+o)/o)),r.x=Math.max(0,Math.min(1,(l-s)/i)),r}function j(t){return!!t&&"object"==typeof t&&1===t.nodeType}function C(t){return!!t&&"object"==typeof t&&3===t.nodeType}function x(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function A(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),j(t)||C(t)?t:"string"==typeof t&&/\S/.test(t)?M["default"].createTextNode(t):void 0}).filter(function(t){return t})}function P(t,e){return A(e).forEach(function(e){return t.appendChild(e)}),t}function L(t,e){return P(x(t),e)}r.__esModule=!0,r.getEl=c,r.createEl=d,r.textContent=f,r.insertElFirst=h,r.getElData=p,r.hasElData=g,r.removeElData=y,r.hasElClass=v,r.addElClass=m,r.removeElClass=b,r.toggleElClass=_,r.setElAttributes=T,r.getElAttributes=w,r.blockTextSelection=k,r.unblockTextSelection=E,r.findElPosition=S,r.getPointerPosition=O,r.isEl=j,r.isTextNode=C,r.emptyEl=x,r.normalizeContent=A,r.appendContent=P,r.insertContent=L;var R=o(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),D=t("global/document"),M=i(D),I=t("global/window"),N=i(I),F=t("./guid.js"),U=n(F),B=t("./log.js"),G=i(B),H=t("tsml"),V=i(H),W={},q="vdata"+(new Date).getTime(),$=l("querySelector");r.$=$;var z=l("querySelectorAll");r.$$=z},{"./guid.js":147,"./log.js":148,"global/document":1,"global/window":2,tsml:55}],144:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t,e,r){if(Array.isArray(e))return d(o,t,e,r);var n=h.getElData(t);n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),r.guid||(r.guid=g.newGUID()),n.handlers[e].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(e,r){if(!n.disabled){e=l(e);var i=n.handlers[e.type];if(i)for(var o=i.slice(0),a=0,s=o.length;s>a&&!e.isImmediatePropagationStopped();a++)o[a].call(t,e,r)}}),1===n.handlers[e].length&&(t.addEventListener?t.addEventListener(e,n.dispatcher,!1):t.attachEvent&&t.attachEvent("on"+e,n.dispatcher))}function a(t,e,r){if(h.hasElData(t)){var n=h.getElData(t);if(n.handlers){if(Array.isArray(e))return d(a,t,e,r);var i=function(e){n.handlers[e]=[],c(t,e)};if(e){var o=n.handlers[e];if(o){if(!r)return void i(e);if(r.guid)for(var s=0;s<o.length;s++)o[s].guid===r.guid&&o.splice(s--,1);c(t,e)}}else for(var u in n.handlers)i(u)}}}function s(t,e,r){var n=h.hasElData(t)?h.getElData(t):{},i=t.parentNode||t.ownerDocument;if("string"==typeof e&&(e={type:e,target:t}),e=l(e),n.dispatcher&&n.dispatcher.call(t,e,r),i&&!e.isPropagationStopped()&&e.bubbles===!0)s.call(null,i,e,r);else if(!i&&!e.defaultPrevented){var o=h.getElData(e.target);e.target[e.type]&&(o.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),o.disabled=!1)}return!e.defaultPrevented}function u(t,e,r){if(Array.isArray(e))return d(u,t,e,r);var n=function i(){a(t,e,i),r.apply(this,arguments)};n.guid=r.guid=r.guid||g.newGUID(),o(t,e,n)}function l(t){function e(){return!0}function r(){return!1}if(!t||!t.isPropagationStopped){var n=t||v["default"].event;t={};for(var i in n)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&n.preventDefault||(t[i]=n[i]));if(t.target||(t.target=t.srcElement||b["default"]),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=r,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=r,null!=t.clientX){var o=b["default"].documentElement,a=b["default"].body;t.pageX=t.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}t.which=t.charCode||t.keyCode,null!=t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t}function c(t,e){var r=h.getElData(t);0===r.handlers[e].length&&(delete r.handlers[e],t.removeEventListener?t.removeEventListener(e,r.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),0===Object.getOwnPropertyNames(r).length&&h.removeElData(t)}function d(t,e,r,n){r.forEach(function(r){t(e,r,n)})}r.__esModule=!0,r.on=o,r.off=a,r.trigger=s,r.one=u,r.fixEvent=l;var f=t("./dom.js"),h=i(f),p=t("./guid.js"),g=i(p),y=t("global/window"),v=n(y),m=t("global/document"),b=n(m)},{"./dom.js":143,"./guid.js":147,"global/document":1,"global/window":2}],145:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./guid.js"),i=function(t,e,r){e.guid||(e.guid=n.newGUID());var i=function(){return e.apply(t,arguments)};return i.guid=r?r+"_"+e.guid:e.guid,i};r.bind=i},{"./guid.js":147}],146:[function(t,e,r){"use strict";function n(t){var e=arguments.length<=1||void 0===arguments[1]?t:arguments[1];return function(){t=0>t?0:t;var r=Math.floor(t%60),n=Math.floor(t/60%60),i=Math.floor(t/3600),o=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(i=n=r="-"),i=i>0||a>0?i+":":"",n=((i||o>=10)&&10>n?"0"+n:n)+":",r=10>r?"0"+r:r,i+n+r}()}r.__esModule=!0,r["default"]=n,e.exports=r["default"]},{}],147:[function(t,e,r){"use strict";function n(){return i++}r.__esModule=!0,r.newGUID=n;var i=1},{}],148:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var r=Array.prototype.slice.call(e),n=function(){},i=a["default"].console||{log:n,warn:n,error:n};t?r.unshift(t.toUpperCase()+":"):t="log",s.history.push(r),r.unshift("VIDEOJS:"),i[t].apply?i[t].apply(i,r):i[t](r.join(" "))}r.__esModule=!0;var o=t("global/window"),a=n(o),s=function(){i(null,arguments)};s.history=[],s.error=function(){i("error",arguments)},s.warn=function(){i("warn",arguments)},r["default"]=s,e.exports=r["default"]},{"global/window":2}],149:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t){return!!t&&"object"==typeof t&&"[object Object]"===t.toString()&&t.constructor===Object}function o(){var t=Array.prototype.slice.call(arguments);return t.unshift({}),t.push(u),s["default"].apply(null,t),t[0]}r.__esModule=!0,r["default"]=o;var a=t("lodash-compat/object/merge"),s=n(a),u=function(t,e){return i(e)?i(t)?void 0:o(e):e};e.exports=r["default"]},{"lodash-compat/object/merge":40}],150:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}r.__esModule=!0;var i=t("global/document"),o=n(i),a=function(t){var e=o["default"].createElement("style");return e.className=t,e};r.createStyleElement=a;var s=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};r.setTextContent=s},{"global/document":1}],151:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){return Array.isArray(t)?o(t):void 0===t||void 0===e?o():o([[t,e]])}function o(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:a.bind(null,"start",0,t),end:a.bind(null,"end",1,t)}}function a(t,e,r,n){return void 0===n&&(l["default"].warn("DEPRECATED: Function '"+t+"' on 'TimeRanges' called without an index argument."),n=0),s(t,n,r.length-1),r[n][e]}function s(t,e,r){if(0>e||e>r)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is greater than or equal to the maximum bound ("+r+").")}r.__esModule=!0,r.createTimeRanges=i;var u=t("./log.js"),l=n(u);r.createTimeRange=i},{"./log.js":148}],152:[function(t,e,r){"use strict";function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}r.__esModule=!0,r["default"]=n,e.exports=r["default"]},{}],153:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}r.__esModule=!0;var i=t("global/document"),o=n(i),a=t("global/window"),s=n(a),u=function(t){var e=["protocol","hostname","port","pathname","search","hash","host"],r=o["default"].createElement("a");r.href=t;var n=""===r.host&&"file:"!==r.protocol,i=void 0;n&&(i=o["default"].createElement("div"),i.innerHTML='<a href="'+t+'"></a>',r=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),o["default"].body.appendChild(i));for(var a={},s=0;s<e.length;s++)a[e[s]]=r[e[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),n&&o["default"].body.removeChild(i),a};r.parseUrl=u;var l=function(t){if(!t.match(/^https?:\/\//)){var e=o["default"].createElement("div");e.innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href}return t};r.getAbsoluteURL=l;var c=function(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,r=e.exec(t);if(r)return r.pop().toLowerCase()}return""};r.getFileExtension=c;var d=function(t){var e=s["default"].location,r=u(t),n=":"===r.protocol?e.protocol:r.protocol,i=n+r.host!==e.protocol+e.host;return i};r.isCrossOrigin=d},{"global/document":1,"global/window":2}],154:[function(e,r,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function o(t){return t&&t.__esModule?t:{"default":t}}function a(t,e,r){var n=void 0;if("string"==typeof t){if(0===t.indexOf("#")&&(t=t.slice(1)),a.getPlayers()[t])return e&&B["default"].warn('Player "'+t+'" is already initialised. Options will not be applied.'),r&&a.getPlayers()[t].ready(r),a.getPlayers()[t];n=H.getEl(t)}else n=t;if(!n||!n.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return n.player||w["default"].players[n.playerId]||new w["default"](n,e,r)}n.__esModule=!0;var s=e("global/window"),u=o(s),l=e("global/document"),c=o(l),d=e("./setup"),f=i(d),h=e("./utils/stylesheet.js"),p=i(h),g=e("./component"),y=o(g),v=e("./event-target"),m=o(v),b=e("./utils/events.js"),_=i(b),T=e("./player"),w=o(T),k=e("./plugins.js"),E=o(k),S=e("../../src/js/utils/merge-options.js"),O=o(S),j=e("./utils/fn.js"),C=i(j),x=e("./tracks/text-track.js"),A=o(x),P=e("./tracks/audio-track.js"),L=o(P),R=e("./tracks/video-track.js"),D=o(R),M=e("object.assign"),I=(o(M),e("./utils/time-ranges.js")),N=e("./utils/format-time.js"),F=o(N),U=e("./utils/log.js"),B=o(U),G=e("./utils/dom.js"),H=i(G),V=e("./utils/browser.js"),W=i(V),q=e("./utils/url.js"),$=i(q),z=e("./extend.js"),X=o(z),K=e("lodash-compat/object/merge"),Y=o(K),J=e("./utils/create-deprecation-proxy.js"),Q=o(J),Z=e("xhr"),tt=o(Z),et=e("./tech/tech.js"),rt=o(et),nt=e("./tech/html5.js"),it=(o(nt),e("./tech/flash.js"));o(it);if("undefined"==typeof HTMLVideoElement&&(c["default"].createElement("video"),c["default"].createElement("audio"),c["default"].createElement("track")),u["default"].VIDEOJS_NO_DYNAMIC_STYLE!==!0){var ot=H.$(".vjs-styles-defaults");if(!ot){ot=p.createStyleElement("vjs-styles-defaults");var at=H.$("head");at.insertBefore(ot,at.firstChild),p.setTextContent(ot,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}f.autoSetupTimeout(1,a),a.VERSION="5.10.8",a.options=w["default"].prototype.options_,a.getPlayers=function(){return w["default"].players},a.players=Q["default"](w["default"].players,{get:"Access to videojs.players is deprecated; use videojs.getPlayers instead",set:"Modification of videojs.players is deprecated"}),a.getComponent=y["default"].getComponent,a.registerComponent=function(t,e){rt["default"].isTech(e)&&B["default"].warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),y["default"].registerComponent.call(y["default"],t,e)},a.getTech=rt["default"].getTech,a.registerTech=rt["default"].registerTech,a.browser=W,a.TOUCH_ENABLED=W.TOUCH_ENABLED,a.extend=X["default"],a.mergeOptions=O["default"],a.bind=C.bind,a.plugin=E["default"],a.addLanguage=function(t,e){var r;return t=(""+t).toLowerCase(),Y["default"](a.options.languages,(r={},r[t]=e,r))[t]},a.log=B["default"],a.createTimeRange=a.createTimeRanges=I.createTimeRanges,a.formatTime=F["default"],a.parseUrl=$.parseUrl,a.isCrossOrigin=$.isCrossOrigin,a.EventTarget=m["default"],a.on=_.on,a.one=_.one,a.off=_.off,a.trigger=_.trigger,a.xhr=tt["default"],a.TextTrack=A["default"],a.AudioTrack=L["default"],
a.VideoTrack=D["default"],a.isEl=H.isEl,a.isTextNode=H.isTextNode,a.createEl=H.createEl,a.hasClass=H.hasElClass,a.addClass=H.addElClass,a.removeClass=H.removeElClass,a.toggleClass=H.toggleElClass,a.setAttributes=H.setElAttributes,a.getAttributes=H.getElAttributes,a.emptyEl=H.emptyEl,a.appendContent=H.appendContent,a.insertContent=H.insertContent,"function"==typeof t&&t.amd?t("videojs",[],function(){return a}):"object"==typeof n&&"object"==typeof r&&(r.exports=a),n["default"]=a,r.exports=n["default"]},{"../../src/js/utils/merge-options.js":149,"./component":67,"./event-target":104,"./extend.js":105,"./player":113,"./plugins.js":114,"./setup":118,"./tech/flash.js":121,"./tech/html5.js":122,"./tech/tech.js":124,"./tracks/audio-track.js":126,"./tracks/text-track.js":134,"./tracks/video-track.js":139,"./utils/browser.js":140,"./utils/create-deprecation-proxy.js":142,"./utils/dom.js":143,"./utils/events.js":144,"./utils/fn.js":145,"./utils/format-time.js":146,"./utils/log.js":148,"./utils/stylesheet.js":150,"./utils/time-ranges.js":151,"./utils/url.js":153,"global/document":1,"global/window":2,"lodash-compat/object/merge":40,"object.assign":45,xhr:56}]},{},[154])(154)}),function(t){var e=t.vttjs={},r=e.VTTCue,n=e.VTTRegion,i=t.VTTCue,o=t.VTTRegion;e.shim=function(){e.VTTCue=r,e.VTTRegion=n},e.restore=function(){e.VTTCue=i,e.VTTRegion=o}}(this),/**
 * Copyright 2013 vtt.js Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){function r(t){if("string"!=typeof t)return!1;var e=s[t.toLowerCase()];return e?t.toLowerCase():!1}function n(t){if("string"!=typeof t)return!1;var e=u[t.toLowerCase()];return e?t.toLowerCase():!1}function i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function o(t,e,o){var s=this,u=/MSIE\s8\.0/.test(navigator.userAgent),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=t,h=e,p=o,g=null,y="",v=!0,m="auto",b="start",_=50,T="middle",w=50,k="middle";return Object.defineProperty(s,"id",i({},l,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(s,"pauseOnExit",i({},l,{get:function(){return d},set:function(t){d=!!t}})),Object.defineProperty(s,"startTime",i({},l,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},l,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},l,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},l,{get:function(){return g},set:function(t){g=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},l,{get:function(){return y},set:function(t){var e=r(t);if(e===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},l,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},l,{get:function(){return m},set:function(t){if("number"!=typeof t&&t!==a)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},l,{get:function(){return b},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},l,{get:function(){return _},set:function(t){if(0>t||t>100)throw new Error("Position must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},l,{get:function(){return T},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},l,{get:function(){return w},set:function(t){if(0>t||t>100)throw new Error("Size must be between 0 and 100.");w=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},l,{get:function(){return k},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");k=e,this.hasBeenReset=!0}})),s.displayState=void 0,u?s:void 0}var a="auto",s={"":!0,lr:!0,rl:!0},u={start:!0,middle:!0,end:!0,left:!0,right:!0};o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},t.VTTCue=t.VTTCue||o,e.VTTCue=o}(this,this.vttjs||{}),/**
 * Copyright 2013 vtt.js Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){function r(t){if("string"!=typeof t)return!1;var e=o[t.toLowerCase()];return e?t.toLowerCase():!1}function n(t){return"number"==typeof t&&t>=0&&100>=t}function i(){var t=100,e=3,i=0,o=100,a=0,s=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!n(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return e},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");e=t}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(t){if(!n(t))throw new Error("RegionAnchorX must be between 0 and 100.");o=t}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(t){if(!n(t))throw new Error("RegionAnchorY must be between 0 and 100.");i=t}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!n(t))throw new Error("ViewportAnchorY must be between 0 and 100.");s=t}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(t){if(!n(t))throw new Error("ViewportAnchorX must be between 0 and 100.");a=t}},scroll:{enumerable:!0,get:function(){return u},set:function(t){var e=r(t);if(e===!1)throw new SyntaxError("An invalid or illegal string was specified.");u=e}}})}var o={"":!0,up:!0};t.VTTRegion=t.VTTRegion||i,e.VTTRegion=i}(this,this.vttjs||{}),/**
 * Copyright 2013 vtt.js Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){function e(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function r(t){function e(t,e,r,n){return 3600*(0|t)+60*(0|e)+(0|r)+(0|n)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function n(){this.values=p(null)}function i(t,e,r,n){var i=n?t.split(n):[t];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(r);if(2===a.length){var s=a[0],u=a[1];e(s,u)}}}function o(t,o,a){function s(){var n=r(t);if(null===n)throw new e(e.Errors.BadTimeStamp,"Malformed timestamp: "+c);return t=t.replace(/^[^\sa-zA-Z-]+/,""),n}function u(t,e){var r=new n;i(t,function(t,e){switch(t){case"region":for(var n=a.length-1;n>=0;n--)if(a[n].id===e){r.set(t,a[n].region);break}break;case"vertical":r.alt(t,e,["rl","lr"]);break;case"line":var i=e.split(","),o=i[0];r.integer(t,o),r.percent(t,o)?r.set("snapToLines",!1):null,r.alt(t,o,["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=e.split(","),r.percent(t,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":r.percent(t,e);break;case"align":r.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical",""),e.line=r.get("line","auto"),e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align","middle"),e.position=r.get("position",{start:0,left:0,middle:50,end:100,right:100},e.align),e.positionAlign=r.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align)}function l(){t=t.replace(/^\s+/,"")}var c=t;if(l(),o.startTime=s(),l(),"-->"!==t.substr(0,3))throw new e(e.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+c);t=t.substr(3),l(),o.endTime=s(),l(),u(t,o)}function a(t,e){function n(){function t(t){return e=e.substr(t.length),t}if(!e)return null;var r=e.match(/^([^<]*)(<[^>]+>?)?/);return t(r[1]?r[1]:r[2])}function i(t){return g[t]}function o(t){for(;p=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(p[0],i);return t}function a(t,e){return!m[e.localName]||m[e.localName]===t.localName}function s(e,r){var n=y[e];if(!n)return null;var i=t.document.createElement(n);i.localName=n;var o=v[e];return o&&r&&(i[o]=r.trim()),i}for(var u,l=t.document.createElement("div"),c=l,d=[];null!==(u=n());)if("<"!==u[0])c.appendChild(t.document.createTextNode(o(u)));else{if("/"===u[1]){d.length&&d[d.length-1]===u.substr(2).replace(">","")&&(d.pop(),c=c.parentNode);continue}var f,h=r(u.substr(1,u.length-2));if(h){f=t.document.createProcessingInstruction("timestamp",h),c.appendChild(f);continue}var p=u.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(f=s(p[1],p[3]),!f)continue;if(!a(c,f))continue;p[2]&&(f.className=p[2].substr(1).replace("."," ")),d.push(p[1]),c.appendChild(f),c=f}return l}function s(t){function e(t,e){for(var r=e.childNodes.length-1;r>=0;r--)t.push(e.childNodes[r])}function r(t){if(!t||!t.length)return null;var n=t.pop(),i=n.textContent||n.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?(t.length=0,o[0]):i}return"ruby"===n.tagName?r(t):n.childNodes?(e(t,n),r(t)):void 0}var n,i=[],o="";if(!t||!t.childNodes)return"ltr";for(e(i,t);o=r(i);)for(var a=0;a<o.length;a++){n=o.charCodeAt(a);for(var s=0;s<b.length;s++)if(b[s]===n)return"rtl"}return"ltr"}function u(t){if("number"==typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,r=e.textTrackList,n=0,i=0;i<r.length&&r[i]!==e;i++)"showing"===r[i].mode&&n++;return-1*++n}function l(){}function c(t,e,r){var n=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)";n&&(i="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),l.call(this),this.cue=e,this.cueDiv=a(t,e.text);var u={color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};n||(u.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",u.unicodeBidi="plaintext"),this.applyStyles(u,this.cueDiv),this.div=t.document.createElement("div"),u={textAlign:"middle"===e.align?"center":e.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},n||(u.direction=s(this.cueDiv),u.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(u),this.div.appendChild(this.cueDiv);var c=0;switch(e.positionAlign){case"start":c=e.position;break;case"middle":c=e.position-e.size/2;break;case"end":c=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(c,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(c,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function d(t){var e,r,n,i,o=/MSIE\s8\.0/.test(navigator.userAgent);if(t.div){r=t.div.offsetHeight,n=t.div.offsetWidth,i=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||r,this.bottom=t.bottom||i+(t.height||r),this.width=t.width||n,this.lineHeight=void 0!==e?e:t.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function f(t,e,r,n){function i(t,e){for(var i,o=new d(t),a=1,s=0;s<e.length;s++){for(;t.overlapsOppositeAxis(r,e[s])||t.within(r)&&t.overlapsAny(n);)t.move(e[s]);if(t.within(r))return t;var u=t.intersectPercentage(r);a>u&&(i=new d(t),a=u),t=new d(o)}return i||o}var o=new d(e),a=e.cue,s=u(a),l=[];if(a.snapToLines){var c;switch(a.vertical){case"":l=["+y","-y"],c="height";break;case"rl":l=["+x","-x"],c="width";break;case"lr":l=["-x","+x"],c="width"}var f=o.lineHeight,h=f*Math.round(s),p=r[c]+f,g=l[0];Math.abs(h)>p&&(h=0>h?-1:1,h*=Math.ceil(p/f)*f),0>s&&(h+=""===a.vertical?r.height:r.width,l=l.reverse()),o.move(g,h)}else{var y=o.lineHeight/r.height*100;switch(a.lineAlign){case"middle":s-=y/2;break;case"end":s-=y}switch(a.vertical){case"":e.applyStyles({top:e.formatStyle(s,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(s,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(s,"%")})}l=["+y","-x","+x","-y"],o=new d(e)}var v=i(o,l);e.move(v.toCSSCompatValues(r))}function h(){}var p=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();e.prototype=p(Error.prototype),e.prototype.constructor=e,e.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},n.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){var r;return(r=e.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(e=parseFloat(e),e>=0&&100>=e)?(this.set(t,e),!0):!1}};var g={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},y={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},v={v:"title",lang:"lang"},m={rt:"ruby"},b=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];l.prototype.applyStyles=function(t,e){e=e||this.div;for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])},l.prototype.formatStyle=function(t,e){return 0===t?0:t+e},c.prototype=p(l.prototype),c.prototype.constructor=c,d.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},d.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},d.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},d.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},d.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},d.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),r=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),n=e*r;return n/(this.height*this.width)},d.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},d.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,r=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var i={left:t.left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||r};return i},h.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},h.convertCueToDOMTree=function(t,e){return t&&e?a(t,e):null};var _=.05,T="sans-serif",w="1.5%";h.processCues=function(t,e,r){function n(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}if(!t||!e||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var i=t.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=w,r.appendChild(i),n(e)){var o=[],a=d.getSimpleBoxPosition(i),s=Math.round(a.height*_*100)/100,u={font:s+"px "+T};!function(){for(var r,n,s=0;s<e.length;s++)n=e[s],r=new c(t,n,u),i.appendChild(r.div),f(t,r,a,o),n.displayState=r.div,o.push(d.getSimpleBoxPosition(r))}()}else for(var l=0;l<e.length;l++)i.appendChild(e[l].displayState)},h.Parser=function(t,e,r){r||(r=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]},h.Parser.prototype={reportOrThrowError:function(t){if(!(t instanceof e))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){function r(){for(var t=u.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,u.buffer=t.substr(e),r}function a(t){var e=new n;if(i(t,function(t,r){switch(t){case"id":e.set(t,r);break;case"width":e.percent(t,r);break;case"lines":e.integer(t,r);break;case"regionanchor":case"viewportanchor":var i=r.split(",");if(2!==i.length)break;var o=new n;if(o.percent("x",i[0]),o.percent("y",i[1]),!o.has("x")||!o.has("y"))break;e.set(t+"X",o.get("x")),e.set(t+"Y",o.get("y"));break;case"scroll":e.alt(t,r,["up"])}},/=/,/\s/),e.has("id")){var r=new(u.vttjs.VTTRegion||u.window.VTTRegion);r.width=e.get("width",100),r.lines=e.get("lines",3),r.regionAnchorX=e.get("regionanchorX",0),r.regionAnchorY=e.get("regionanchorY",100),r.viewportAnchorX=e.get("viewportanchorX",0),r.viewportAnchorY=e.get("viewportanchorY",100),r.scroll=e.get("scroll",""),u.onregion&&u.onregion(r),u.regionList.push({id:e.get("id"),region:r})}}function s(t){i(t,function(t,e){switch(t){case"Region":a(e)}},/:/)}var u=this;t&&(u.buffer+=u.decoder.decode(t,{stream:!0}));try{var l;if("INITIAL"===u.state){if(!/\r\n|\n/.test(u.buffer))return this;l=r();var c=l.match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new e(e.Errors.BadSignature);u.state="HEADER"}for(var d=!1;u.buffer;){if(!/\r\n|\n/.test(u.buffer))return this;switch(d?d=!1:l=r(),u.state){case"HEADER":/:/.test(l)?s(l):l||(u.state="ID");continue;case"NOTE":l||(u.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){u.state="NOTE";break}if(!l)continue;if(u.cue=new(u.vttjs.VTTCue||u.window.VTTCue)(0,0,""),u.state="CUE",-1===l.indexOf("-->")){u.cue.id=l;continue}case"CUE":try{o(l,u.cue,u.regionList)}catch(f){u.reportOrThrowError(f),u.cue=null,u.state="BADCUE";continue}u.state="CUETEXT";continue;case"CUETEXT":var h=-1!==l.indexOf("-->");if(!l||h&&(d=!0)){u.oncue&&u.oncue(u.cue),u.cue=null,u.state="ID";continue}u.cue.text&&(u.cue.text+="\n"),u.cue.text+=l;continue;case"BADCUE":l||(u.state="ID");continue}}}catch(f){u.reportOrThrowError(f),"CUETEXT"===u.state&&u.cue&&u.oncue&&u.oncue(u.cue),u.cue=null,u.state="INITIAL"===u.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new e(e.Errors.BadSignature)}catch(r){t.reportOrThrowError(r)}return t.onflush&&t.onflush(),this}},t.WebVTT=h}(this,this.vttjs||{}),!function(){!function(t){var e=t&&t.videojs;if(e){e.CDN_VERSION="5.10.8";var r="https:"===t.location.protocol?"https://":"http://";e.options.flash.swf=r+"vjs.zencdn.net/swf/5.0.1/video-js.swf"}}(window),function(t,e,r,n,i,o,a){e&&e.HELP_IMPROVE_VIDEOJS!==!1&&(i.random()>.01||(o=e.location,a=e.videojs||{},t.src="//www.google-analytics.com/__utm.gif?utmwv=5.4.2&utmac=UA-16505296-3&utmn=1&utmhn="+n(o.hostname)+"&utmsr="+e.screen.availWidth+"x"+e.screen.availHeight+"&utmul="+(r.language||r.userLanguage||"").toLowerCase()+"&utmr="+n(o.href)+"&utmp="+n(o.hostname+o.pathname)+"&utmcc=__utma%3D1."+i.floor(1e10*i.random())+".1.1.1.1%3B&utme=8(vjsv*cdnv)9("+a.VERSION+"*"+a.CDN_VERSION+")"))}(new Image,window,navigator,encodeURIComponent,Math)}(),/**
 * videojs-contrib-hls
 * @version 3.6.13
 * @copyright 2016 Brightcove, Inc
 * @license Apache-2.0
 */
function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.videojsContribHls=t()}}(function(){var t;return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(u){i=!0,o=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=t("global/window"),a=n(o),s=function(t,e){for(var r=t.cues,n=0;n<r.length;n++){var i=r[n];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},u=function(t,e){var r=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(t.segments)for(var n=r,o=void 0,u=0;u<t.segments.length;u++){var l=t.segments[u];if(o||(o=s(e,n+l.duration/2)),o){if("cueIn"in l){o.endTime=n,o.adEndTime=n,n+=l.duration,o=null;continue}if(n<o.endTime){n+=l.duration;continue}o.endTime+=l.duration}else if("cueOut"in l&&(o=new a["default"].VTTCue(n,n+l.duration,l.cueOut),o.adStartTime=n,o.adEndTime=n+parseFloat(l.cueOut),e.addCue(o)),"cueOutCont"in l){var c=void 0,d=void 0,f=l.cueOutCont.split("/").map(parseFloat),h=i(f,2);c=h[0],d=h[1],o=new a["default"].VTTCue(n,n+l.duration,""),o.adStartTime=n-c,o.adEndTime=o.adStartTime+d,e.addCue(o)}n+=l.duration}};r["default"]={updateAdCues:u,findAdCue:s},e.exports=r["default"]},{"global/window":26}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e){return t.start(e)+"-"+t.end(e)},i=function(t,e){var r=t.toString(16);return"00".substring(0,2-r.length)+r+(e%2?" ":"")},o=function(t){return t>=32&&126>t?String.fromCharCode(t):"."},a={hexDump:function(t){for(var e=Array.prototype.slice.call(t),r=16,n="",a=void 0,s=void 0,u=0;u<e.length/r;u++)a=e.slice(u*r,u*r+r).map(i).join(""),s=e.slice(u*r,u*r+r).map(o).join(""),n+=a+" "+s+"\n";return n},tagDump:function(t){return a.hexDump(t.bytes)},textRanges:function(t){var e="",r=void 0;for(r=0;r<t.length;r++)e+=n(t,r)+" ";return e}};r["default"]=a,e.exports=r["default"]},{}],3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={GOAL_BUFFER_LENGTH:30},e.exports=r["default"]},{}],4:[function(t,e,r){(function(e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},u=t("./playlist-loader"),l=n(u),c=t("./segment-loader"),d=n(c),f=t("./ranges"),h=n(f),p="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,g=n(p),y=t("./ad-cue-tags"),v=n(y),m=3e5,b=void 0,_=function(t,e){if(typeof t!=typeof e)return!0;if(Object.keys(t).length!==Object.keys(e).length)return!0;for(var r in t)if(t[r]!==e[r])return!0;return!1},T=function(t){var e={codecCount:0,videoCodec:null,videoObjectTypeIndicator:null,audioProfile:null},r=void 0;return e.codecCount=t.split(",").length,e.codecCount=e.codecCount||2,r=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(t),r&&(e.videoCodec=r[2],e.videoObjectTypeIndicator=r[3]),e.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),e.audioProfile=e.audioProfile&&e.audioProfile[2],e},w=function(t,e){var r="mp2t",n={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},i=[],o=void 0,a=null;if(!e)return[];e.segments&&e.segments.length&&e.segments[0].map&&(r="mp4"),o=e.attributes||{},o.CODECS&&!function(){var t=T(o.CODECS);Object.keys(t).forEach(function(e){n[e]=t[e]||n[e]})}(),t.mediaGroups.AUDIO&&(i=t.mediaGroups.AUDIO[o.AUDIO]);for(var s in i){if(a&&!!i[s].uri!=!!a.uri)return["video/"+r+'; codecs="'+n.videoCodec+n.videoObjectTypeIndicator+", mp4a.40."+n.audioProfile+'"',"audio/"+r+'; codecs="mp4a.40.'+n.audioProfile+'"'];a=i[s]}return a&&a.uri?["video/"+r+'; codecs="'+n.videoCodec+n.videoObjectTypeIndicator+'"',"audio/"+r+'; codecs="mp4a.40.'+n.audioProfile+'"']:["video/"+r+'; codecs="'+n.videoCodec+n.videoObjectTypeIndicator+", mp4a.40."+n.audioProfile+'"']};r.mimeTypesForPlaylist_=w;var k=function(t){function e(t){var r=this;i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var n=t.url,o=t.withCredentials,a=t.mode,u=t.tech,c=t.bandwidth,f=t.externHls,h=t.useCueTags;if(!n)throw new Error("A non-empty playlist URL is required");b=f,this.withCredentials=o,this.tech_=u,this.hls_=u.hls,this.mode_=a,this.useCueTags_=h,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType="",this.tech_.textTracks().addTrack_(this.cueTagsTrack_)),this.audioTracks_=[],this.requestOptions_={withCredentials:this.withCredentials,timeout:null},this.audioGroups_={},this.mediaSource=new g["default"].MediaSource({mode:a}),this.audioinfo_=null,this.mediaSource.on("audioinfo",this.handleAudioinfoUpdate_.bind(this)),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this));var p={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},setCurrentTime:function(t){return r.tech_.setCurrentTime(t)},hasPlayed:function(){return 0!==r.tech_.played().length},bandwidth:c};this.masterPlaylistLoader_=new l["default"](n,this.hls_,this.withCredentials),this.setupMasterPlaylistLoaderListeners_(),this.audioPlaylistLoader_=null,this.mainSegmentLoader_=new d["default"](p),this.audioSegmentLoader_=new d["default"](p),this.setupSegmentLoaderListeners_(),this.masterPlaylistLoader_.start()}return o(e,t),a(e,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=t.masterPlaylistLoader_.media(),r=1.5*t.masterPlaylistLoader_.targetDuration*1e3;t.requestOptions_.timeout=r,e.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.expired(t.masterPlaylistLoader_.expired_),t.mainSegmentLoader_.load());try{t.setupSourceBuffers_()}catch(n){return g["default"].log.warn("Failed to create SourceBuffers",n),t.mediaSource.endOfStream("decode")}t.setupFirstPlay(),t.fillAudioTracks_(),t.setupAudio(),t.trigger("audioupdate"),t.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=t.masterPlaylistLoader_.media(),r=void 0;return e?(t.useCueTags_&&t.updateAdCues_(e,t.masterPlaylistLoader_.expired_),t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.expired(t.masterPlaylistLoader_.expired_),t.updateDuration(),r=t.seekable(),void(e.endList||0===r.length||t.mediaSource.addSeekableRange_(r.start(0),r.end(0)))):(t.initialMedia_=t.selectPlaylist(),void t.masterPlaylistLoader_.media(t.initialMedia_))}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=t.masterPlaylistLoader_.media(),r=1.5*t.masterPlaylistLoader_.targetDuration*1e3,n=void 0,i=void 0;t.masterPlaylistLoader_.isLowestEnabledRendition_()?t.requestOptions_.timeout=0:t.requestOptions_.timeout=r,t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.expired(t.masterPlaylistLoader_.expired_),t.mainSegmentLoader_.load(),n=t.activeAudioGroup(),i=n.filter(function(t){return t.enabled})[0],i||(t.setupAudio(),t.trigger("audioupdate")),t.tech_.trigger({type:"mediachange",bubbles:!0})})}},{key:"setupSegmentLoaderListeners_",value:function(){var t=this;this.mainSegmentLoader_.on("progress",function(){t.masterPlaylistLoader_.media(t.selectPlaylist()),t.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.audioSegmentLoader_.on("error",function(){g["default"].log.warn("Problem encountered with the current alternate audio track. Switching back to default."),t.audioSegmentLoader_.abort(),t.audioPlaylistLoader_=null,t.setupAudio()})}},{key:"handleAudioinfoUpdate_",value:function(t){if(b.supportsAudioInfoChange_()||!this.audioInfo_||!_(this.audioInfo_,t.info))return void(this.audioInfo_=t.info);var e="had different audio properties (channels, sample rate, etc.) or changed in some other way.  This behavior is currently unsupported in Firefox 48 and below due to an issue: \n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1247138\n\n",r=this.activeAudioGroup().map(function(t){return t.enabled}).indexOf(!0),n=this.activeAudioGroup()[r],i=this.activeAudioGroup().filter(function(t){return t.properties_&&t.properties_["default"]})[0];this.audioPlaylistLoader_?(e="The audio track '"+n.label+"' that we tried to "+("switch to "+e+" Unfortunately this means we will have to ")+("return you to the main track '"+i.label+"'. Sorry!"),i.enabled=!0,this.activeAudioGroup().splice(r,1),this.trigger("audioupdate")):(e="The rendition that we tried to switch to "+e+"Unfortunately that means we will have to blacklist the current playlist and switch to another. Sorry!",this.blacklistCurrentPlaylist()),g["default"].log.warn(e),this.setupAudio()}},{key:"mediaRequests_",value:function(){return this.audioSegmentLoader_.mediaRequests+this.mainSegmentLoader_.mediaRequests}},{key:"mediaTransferDuration_",value:function(){return this.audioSegmentLoader_.mediaTransferDuration+this.mainSegmentLoader_.mediaTransferDuration}},{key:"mediaBytesTransferred_",value:function(){return this.audioSegmentLoader_.mediaBytesTransferred+this.mainSegmentLoader_.mediaBytesTransferred}},{key:"fillAudioTracks_",value:function(){var t=this.master(),e=t.mediaGroups||{};e&&e.AUDIO&&0!==Object.keys(e.AUDIO).length&&"html5"===this.mode_||(e.AUDIO={main:{"default":{"default":!0}}});for(var r in e.AUDIO){this.audioGroups_[r]||(this.audioGroups_[r]=[]);for(var n in e.AUDIO[r]){var i=e.AUDIO[r][n],o=new g["default"].AudioTrack({id:n,kind:i["default"]?"main":"alternative",enabled:!1,language:i.language,label:n});o.properties_=i,this.audioGroups_[r].push(o)}}(this.activeAudioGroup().filter(function(t){return t.properties_["default"]})[0]||this.activeAudioGroup()[0]).enabled=!0}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.load()}},{key:"activeAudioGroup",value:function(){var t=this.masterPlaylistLoader_.media(),e=void 0;return t.attributes&&t.attributes.AUDIO&&(e=this.audioGroups_[t.attributes.AUDIO]),e||this.audioGroups_.main}},{key:"setupAudio",value:function(){var t=this,e=this.activeAudioGroup(),r=e.filter(function(t){return t.enabled})[0];r||(r=e.filter(function(t){return t.properties_["default"]})[0]||e[0],r.enabled=!0),this.audioPlaylistLoader_&&(this.audioPlaylistLoader_.dispose(),this.audioPlaylistLoader_=null),this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.clearBuffer(),r.properties_.resolvedUri&&(this.audioPlaylistLoader_=new l["default"](r.properties_.resolvedUri,this.hls_,this.withCredentials),this.audioPlaylistLoader_.start(),this.audioPlaylistLoader_.on("loadedmetadata",function(){var e=t.audioPlaylistLoader_.media();t.audioSegmentLoader_.playlist(e,t.requestOptions_),(!t.tech_.paused()||e.endList&&"none"!==t.tech_.preload())&&t.audioSegmentLoader_.load(),e.endList||t.audioPlaylistLoader_.trigger("firstplay")}),this.audioPlaylistLoader_.on("loadedplaylist",function(){var e=void 0;return t.audioPlaylistLoader_&&(e=t.audioPlaylistLoader_.media()),e?void t.audioSegmentLoader_.playlist(e,t.requestOptions_):void t.audioPlaylistLoader_.media(t.audioPlaylistLoader_.playlists.master.playlists[0])}),this.audioPlaylistLoader_.on("error",function(){g["default"].log.warn("Problem encountered loading the alternate audio track. Switching back to default."),t.audioSegmentLoader_.abort(),t.setupAudio()}))}},{key:"fastQualityChange_",value:function(){var t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.sourceUpdater_.remove(this.tech_.currentTime()+5,1/0))}},{key:"play",value:function(){return this.setupFirstPlay()?void 0:(this.tech_.ended()&&this.tech_.setCurrentTime(0),this.load(),this.tech_.duration()===1/0&&this.tech_.currentTime()<this.tech_.seekable().start(0)?this.tech_.setCurrentTime(this.tech_.seekable().start(0)):void 0)}},{key:"setupFirstPlay",value:function(){var t=void 0,e=this.masterPlaylistLoader_.media();return!e||e.endList||this.tech_.paused()||this.hasPlayed_?!1:(this.masterPlaylistLoader_.trigger("firstplay"),this.hasPlayed_=!0,t=this.seekable(),t.length&&this.tech_.setCurrentTime(t.end(0)),this.load(),!0)}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(t){return g["default"].log.warn("Failed to create Source Buffers",t),this.mediaSource.endOfStream("decode")}this.tech_.autoplay()&&this.tech_.play(),this.trigger("sourceopen")}},{key:"blacklistCurrentPlaylist",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=void 0,r=void 0;return(e=t.playlist||this.masterPlaylistLoader_.media())?(e.excludeUntil=Date.now()+m,(r=this.selectPlaylist())?(g["default"].log.warn("Problem encountered with the current HLS playlist. Switching to another playlist."),this.masterPlaylistLoader_.media(r)):(g["default"].log.warn("Problem encountered with the current HLS playlist. No suitable alternatives found."),this.error=t,this.mediaSource.endOfStream("network"))):(this.error=t,this.mediaSource.endOfStream("network"))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(t){var e=h["default"].findRange(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?e&&e.length?t:(this.mainSegmentLoader_.abort(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.abort(),void(this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.load()))):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:b.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){var t=void 0,e=void 0,r=void 0;return this.masterPlaylistLoader_&&(t=this.masterPlaylistLoader_.media())?(e=b.Playlist.seekable(t,this.masterPlaylistLoader_.expired_),0===e.length?e:this.audioPlaylistLoader_&&(r=b.Playlist.seekable(this.audioPlaylistLoader_.media(),this.audioPlaylistLoader_.expired_),0===r.length)?r:r?g["default"].createTimeRanges([[r.start(0)>e.start(0)?r.start(0):e.start(0),r.end(0)<e.end(0)?r.end(0):e.end(0)]]):e):g["default"].createTimeRanges()}},{key:"updateDuration",value:function(){var t=this,e=this.mediaSource.duration,r=b.Playlist.duration(this.masterPlaylistLoader_.media()),n=this.tech_.buffered(),i=function o(){t.mediaSource.duration=r,t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",o)};n.length>0&&(r=Math.max(r,n.end(n.length-1))),e!==r&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",i):i())}},{key:"dispose",value:function(){this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.audioSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var t=this.masterPlaylistLoader_.media(),e=void 0;if(t&&"open"===this.mediaSource.readyState){if(e=w(this.masterPlaylistLoader_.master,t),e.length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(e[0]),e[1]&&this.audioSegmentLoader_.mimeType(e[1]),this.excludeIncompatibleVariants_(t)}}},{key:"excludeIncompatibleVariants_",value:function(t){var e=this.masterPlaylistLoader_.master,r=2,n=null,i=null,o=void 0;t.attributes&&t.attributes.CODECS&&(o=T(t.attributes.CODECS),n=o.videoCodec,i=o.audioProfile,r=o.codecCount),e.playlists.forEach(function(t){var e={codecCount:2,videoCodec:null,audioProfile:null};if(t.attributes&&t.attributes.CODECS){var o=t.attributes.CODECS;e=T(o),window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+o+'"')&&(t.excludeUntil=1/0)}e.codecCount!==r&&(t.excludeUntil=1/0),e.videoCodec!==n&&(t.excludeUntil=1/0),("5"===e.audioProfile&&"5"!==i||"5"===i&&"5"!==e.audioProfile)&&(t.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1];v["default"].updateAdCues(t,this.cueTagsTrack_,e)}}]),e}(g["default"].EventTarget);r.MasterPlaylistController=k}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ad-cue-tags":1,"./playlist-loader":6,"./ranges":8,"./segment-loader":12}],5:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t("./ranges"),u=i(s),l="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,c=i(l),d=["seeking","seeked","pause","playing","error"],f=function(){function t(e){var r=this;o(this,t),this.tech_=e.tech,this.seekable=e.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,e.debug&&(this.logger_=c["default"].log.bind(c["default"],"playback-watcher ->")),this.logger_("initialize");var n=function(){return r.waiting_()},i=function(){return r.cancelTimer_()};this.tech_.on("waiting",n),this.tech_.on(d,i),this.monitorCurrentTime_(),this.dispose=function(){r.logger_("dispose"),r.tech_.off("waiting",n),r.tech_.off(d,i),r.checkCurrentTimeTimeout_&&clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}return a(t,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime();this.consecutiveUpdates>=5&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"waiting_",value:function(){var t=this.seekable(),e=this.tech_.currentTime();if(!this.tech_.seeking()&&null===this.timer_){if(this.fellOutOfLiveWindow_(t,e)){var r=t.end(t.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+r),this.cancelTimer_(),void this.tech_.setCurrentTime(r)}var n=this.tech_.buffered(),i=u["default"].findNextRange(n,e);if(this.videoUnderflow_(i,n,e))return this.cancelTimer_(),void this.tech_.setCurrentTime(e);if(i.length>0){var o=i.start(0)-e;this.logger_("Stopped at "+e+", setting timer for "+o+", seeking to "+i.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*o,e)}}}},{key:"fellOutOfLiveWindow_",value:function(t,e){return t.length&&t.start(0)>0&&e<t.start(0)?!0:!1}},{key:"videoUnderflow_",value:function(t,e,r){if(0===t.length){var n=this.gapFromVideoUnderflow_(e,r);if(n)return this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". Seeking to current time "+r),!0}return!1}},{key:"skipTheGap_",value:function(t){var e=this.tech_.buffered(),r=this.tech_.currentTime(),n=u["default"].findNextRange(e,r);this.cancelTimer_(),0!==n.length&&r===t&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",t,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+u["default"].TIME_FUDGE_FACTOR))}},{key:"gapFromVideoUnderflow_",value:function(t,e){for(var r=u["default"].findGaps(t),n=0;n<r.length;n++){var i=r.start(n),o=r.end(n);if(4>e-i&&e-i>2)return{start:i,end:o}}return null}},{key:"logger_",value:function(){}}]),t}();r["default"]=f,e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ranges":8}],6:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var o=t("./resolve-url"),a=i(o),s="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,u=t("./stream"),l=i(u),c=t("m3u8-parser"),d=i(c),f=t("global/window"),h=i(f),p=function(t,e,r){var n=e.slice(),i=void 0,o=void 0;for(r=r||0,i=Math.min(t.length,e.length+r),o=r;i>o;o++)n[o-r]=(0,s.mergeOptions)(t[o],n[o-r]);return n},g=function(t,e){for(var r=!1,n=(0,s.mergeOptions)(t,{}),i=t.playlists.length,o=void 0,u=void 0,l=void 0;i--;)if(o=n.playlists[i],o.uri===e.uri){if(o.segments&&e.segments&&o.segments.length===e.segments.length&&o.mediaSequence===e.mediaSequence)continue;for(n.playlists[i]=(0,s.mergeOptions)(o,e),n.playlists[e.uri]=n.playlists[i],o.segments&&(n.playlists[i].segments=p(o.segments,e.segments,e.mediaSequence-o.mediaSequence)),l=0,n.playlists[i].segments&&(l=n.playlists[i].segments.length);l--;)u=n.playlists[i].segments[l],u.resolvedUri||(u.resolvedUri=(0,a["default"])(o.resolvedUri,u.uri)),u.key&&!u.key.resolvedUri&&(u.key.resolvedUri=(0,a["default"])(o.resolvedUri,u.key.uri)),u.map&&!u.map.resolvedUri&&(u.map.resolvedUri=(0,a["default"])(o.resolvedUri,u.map.uri));r=!0}return r?n:null},y=function v(t,e,r){var n=this,i=this,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0;if(v.prototype.constructor.call(this),this.hls_=e,this.trackExpiredTime_=!1,!t)throw new Error("A non-empty playlist URL is required");l=function(t,e,r){i.setBandwidth(u||t),u=null,r&&(i.state=r),i.error={playlist:i.master.playlists[e],status:t.status,message:"HLS playlist request error at URL: "+e,responseText:t.responseText,code:t.status>=500?4:2},i.trigger("error")},c=function(t,e){var r=void 0,n=void 0,o=void 0;i.setBandwidth(u||t),u=null,i.state="HAVE_METADATA",r=new d["default"].Parser,r.push(t.responseText),r.end(),r.manifest.uri=e,o=g(i.master,r.manifest),n=1e3*(r.manifest.targetDuration||10),i.targetDuration=r.manifest.targetDuration,o?(i.master=o,i.updateMediaPlaylist_(r.manifest)):n/=2,i.media().endList||(h["default"].clearTimeout(s),s=h["default"].setTimeout(function(){i.trigger("mediaupdatetimeout")},n)),i.trigger("loadedplaylist")},i.state="HAVE_NOTHING",this.expired_=0,o=this.dispose,i.dispose=function(){i.stopRequest(),h["default"].clearTimeout(s),o.call(this)},i.stopRequest=function(){if(u){var t=u;u=null,t.onreadystatechange=null,t.abort()}},i.enabledPlaylists_=function(){return i.master.playlists.filter(function(t,e,r){return!t.excludeUntil||t.excludeUntil<=Date.now()}).length},i.isLowestEnabledRendition_=function(){var t=i.media();if(!t||!t.attributes)return!1;var e=i.media().attributes.BANDWIDTH||0;return!(i.master.playlists.filter(function(t){var r="undefined"==typeof t.excludeUntil||t.excludeUntil<=Date.now();if(!r)return!1;var n=0;return t&&t.attributes&&(n=t.attributes.BANDWIDTH),e>=n}).length>1)},i.media=function(t){var e=i.state,n=void 0;if(!t)return i.media_;if("HAVE_NOTHING"===i.state)throw new Error("Cannot switch media playlist from "+i.state);if("string"==typeof t){if(!i.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=i.master.playlists[t]}if(n=!i.media_||t.uri!==i.media_.uri,i.master.playlists[t.uri].endList)return u&&(u.onreadystatechange=null,u.abort(),u=null),i.state="HAVE_METADATA",i.media_=t,void(n&&(i.trigger("mediachanging"),i.trigger("mediachange")));if(n){if(i.state="SWITCHING_MEDIA",u){if((0,a["default"])(i.master.uri,t.uri)===u.url)return;u.onreadystatechange=null,u.abort(),u=null}this.media_&&this.trigger("mediachanging"),u=this.hls_.xhr({uri:(0,a["default"])(i.master.uri,t.uri),withCredentials:r},function(r,n){if(u){if(r)return l(u,t.uri,e);c(n,t.uri),"HAVE_MASTER"===e?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}},i.setBandwidth=function(t){i.bandwidth=t.bandwidth},i.on("firstplay",function(){this.trackExpiredTime_=!0}),i.on("mediaupdatetimeout",function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",u=this.hls_.xhr({uri:(0,a["default"])(i.master.uri,i.media().uri),withCredentials:r},function(t,e){return u?t?l(u,i.media().uri):void c(u,i.media().uri):void 0}))}),i.pause=function(){i.stopRequest(),h["default"].clearTimeout(s)},i.load=function(){i.started?i.media().endList?i.trigger("loadedplaylist"):i.trigger("mediaupdatetimeout"):i.start()},i.start=function(){i.started=!0,u=n.hls_.xhr({uri:t,withCredentials:r},function(e,r){var n=void 0,o=void 0,s=void 0;if(u){if(u=null,e)return i.error={status:r.status,message:"HLS playlist request error at URL: "+t,responseText:r.responseText,code:2},i.trigger("error");if(n=new d["default"].Parser,n.push(r.responseText),n.end(),i.state="HAVE_MASTER",n.manifest.uri=t,n.manifest.playlists){for(i.master=n.manifest,s=i.master.playlists.length;s--;)o=i.master.playlists[s],i.master.playlists[o.uri]=o,o.resolvedUri=(0,a["default"])(i.master.uri,o.uri);for(var l in i.master.mediaGroups.AUDIO)for(var f in i.master.mediaGroups.AUDIO[l]){var p=i.master.mediaGroups.AUDIO[l][f];p.uri&&(p.resolvedUri=(0,a["default"])(i.master.uri,p.uri))}return i.trigger("loadedplaylist"),void(u||i.media(n.manifest.playlists[0]))}return i.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:h["default"].location.href,playlists:[{uri:t}]},i.master.playlists[t]=i.master.playlists[0],i.master.playlists[0].resolvedUri=t,c(r,t),i.trigger("loadedmetadata")}})}};y.prototype=new l["default"],y.prototype.updateMediaPlaylist_=function(t){var e=void 0,r=void 0,n=void 0;if(e=this.media_,this.media_=this.master.playlists[t.uri],e&&this.trackExpiredTime_&&t.uri===e.uri){if(t.segments.length){if("undefined"!=typeof t.segments[0].start)return void(this.expired_=t.segments[0].start);if("undefined"!=typeof t.segments[0].end)return void(this.expired_=t.segments[0].end-t.segments[0].duration)}for(r=t.mediaSequence-e.mediaSequence-1;r>=0;r--)if(n=e.segments[r]){if("undefined"!=typeof n.end)return void(this.expired_=n.end);if("undefined"!=typeof n.start)return void(this.expired_=n.start+n.duration);this.expired_+=n.duration}else this.expired_+=e.targetDuration||10}},r["default"]=y,e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./resolve-url":11,"./stream":14,"global/window":26,"m3u8-parser":63}],7:[function(t,e,r){(function(e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,o=t("global/window"),a=n(o),s={UNSAFE_LIVE_SEGMENTS:3},u=function(t,e){var r=0,n=e-t.mediaSequence,i=t.segments[n];if(i){if("undefined"!=typeof i.start)return{result:i.start,precise:!0};if("undefined"!=typeof i.end)return{result:i.end-i.duration,precise:!0}}for(;n--;){if(i=t.segments[n],"undefined"!=typeof i.end)return{result:r+i.end,precise:!0};if(r+=i.duration,"undefined"!=typeof i.start)return{result:r+i.start,precise:!0}}return{result:r,precise:!1}},l=function(t,e){for(var r=0,n=void 0,i=e-t.mediaSequence;i<t.segments.length;i++){if(n=t.segments[i],"undefined"!=typeof n.start)return{result:n.start-r,precise:!0};if(r+=n.duration,"undefined"!=typeof n.end)return{result:n.end-r,precise:!0}}return{result:-1,precise:!1}},c=function(t,e,r){var n=void 0,i=void 0;return"undefined"==typeof e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence?0:(n=u(t,e),n.precise?n.result:(i=l(t,e),i.precise?i.result:n.result+r))},d=function(t,e,r){if(!t)return 0;if("number"!=typeof r&&(r=0),"undefined"==typeof e){if(t.totalDuration)return t.totalDuration;if(!t.endList)return a["default"].Infinity}return c(t,e,r)};r.duration=d;var f=function(t,e){var r=void 0,n=void 0,o=void 0;return"number"!=typeof e&&(e=0),t&&t.segments?t.endList?(0,i.createTimeRange)(0,d(t)):(r=c(t,t.mediaSequence,e),o=Math.max(0,t.segments.length-s.UNSAFE_LIVE_SEGMENTS),n=c(t,t.mediaSequence+o,e),(0,i.createTimeRange)(r,n)):(0,i.createTimeRange)()};r.seekable=f;var h=function(t,e,r){var n=void 0,i=void 0,o=e,a=t.segments.length,s=a-1,u=void 0,l=void 0,c=void 0,d=void 0;if(!t)return 0;if(0>e)return 0;if(0===e&&!r)return 0;for(r=r||0,n=0;a>n;n++)if(i=t.segments[n],i.end){if(i.end>e){d=i.end,l=n;break}c=i.end,u=n+1}if(u===a)return a;if("undefined"!=typeof u){for(e-=c,n=u;(l||a)>n;n++)if(i=t.segments[n],e-=i.duration,0>e)return n;return n>=l?u+Math.floor((o-c)/(d-c)*(l-u)):s}if("undefined"!=typeof l){for(e=d-e,n=l;n>=0;n--)if(i=t.segments[n],e-=i.duration,0>e)return n;return 0===e?0:-1}if(e-=r,0>e)return-1;for(n=0;a>n;n++)if(i=t.segments[n],e-=i.duration,0>e)return n;return s};r.getMediaIndexForTime_=h,s.duration=d,s.seekable=f,s.getMediaIndexForTime_=h,r["default"]=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":26}],8:[function(t,e,r){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(u){i=!0,o=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance");
}}(),o="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,a=n(o),s=1/30,u=function(t,e){var r=i(e,2),n=r[0],o=r[1];return Math.min(Math.max(n,t),o)},l=function(t,e){var r=[],n=void 0;if(t&&t.length)for(n=0;n<t.length;n++)e(t.start(n),t.end(n))&&r.push([t.start(n),t.end(n)]);return a["default"].createTimeRanges(r)},c=function(t,e){return l(t,function(t,r){return e>=t-s&&r+s>=e})},d=function(t,e){return l(t,function(t){return t-s>=e})},f=function(t){if(t.length<2)return a["default"].createTimeRanges();for(var e=[],r=1;r<t.length;r++){var n=t.end(r-1),i=t.start(r);e.push([n,i])}return a["default"].createTimeRanges(e)},h=function(t,e){var r=void 0,n=void 0,i=void 0,o=[],a=[],s=function(t){return t[0]<=i&&t[1]>=i};if(t)for(r=0;r<t.length;r++)n=t.start(r),i=t.end(r),a.push([n,i]);if(e)for(r=0;r<e.length;r++)n=e.start(r),i=e.end(r),a.some(s)||o.push(i);return 1!==o.length?null:o[0]},p=function(t,e){var r=null,n=null,i=0,o=[],s=[];if(!(t&&t.length&&e&&e.length))return a["default"].createTimeRange();for(var u=t.length;u--;)o.push({time:t.start(u),type:"start"}),o.push({time:t.end(u),type:"end"});for(u=e.length;u--;)o.push({time:e.start(u),type:"start"}),o.push({time:e.end(u),type:"end"});for(o.sort(function(t,e){return t.time-e.time}),u=0;u<o.length;u++)"start"===o[u].type?(i++,2===i&&(r=o[u].time)):"end"===o[u].type&&(i--,1===i&&(n=o[u].time)),null!==r&&null!==n&&(s.push([r,n]),r=null,n=null);return a["default"].createTimeRanges(s)},g=function(t,e,r,n){for(var i=e.end(0)-e.start(0),o=t.end(0)-t.start(0),a=i-o,s=p(t,n),u=p(e,n),l=0,c=0,d=s.length;d--;)l+=s.end(d)-s.start(d),s.start(d)===r&&(l+=a);for(d=u.length;d--;)c+=u.end(d)-u.start(d);return Math.max(l,c)/i*100},y=function(t,e,r,n){var i=t+e,o=a["default"].createTimeRanges([[t,i]]),s=a["default"].createTimeRanges([[u(t,[r,i]),i]]);if(s.start(0)===s.end(0))return 0;var l=g(s,o,r,n);return isNaN(l)||l===1/0||l===-(1/0)?0:l};r["default"]={findRange:c,findNextRange:d,findGaps:f,findSoleUncommonTimeRangesEnd:h,getSegmentBufferedPercent:y,TIME_FUDGE_FACTOR:s},e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,r){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,o=n(i),a={errorInterval:30,getSource:function(t){var e=this.tech({IWillNotUseThisInPlugins:!0}),r=e.currentSource_;return t(r)}},s=function l(t,e){var r=0,n=0,i=o["default"].mergeOptions(a,e),s=function(){n&&t.currentTime(n)},u=function(e){null!==e&&void 0!==e&&(n=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(e),t.play())},c=function(){return Date.now()-r<1e3*i.errorInterval?void 0:i.getSource&&"function"==typeof i.getSource?(r=Date.now(),i.getSource.call(t,u)):void o["default"].log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},d=function h(){t.off("loadedmetadata",s),t.off("error",c),t.off("dispose",h)},f=function(e){d(),l(t,e)};t.on("error",c),t.on("dispose",d),t.reloadSourceOnError=f},u=function(t){s(this,t)};r["default"]=u,e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(t,e,r){var n="undefined"==typeof t.excludeUntil||t.excludeUntil<=Date.now();return"undefined"==typeof r?n:(r!==n&&(r?delete t.excludeUntil:t.excludeUntil=1/0,e()),r)},o=function s(t,e,r){n(this,s);var o=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);if(e.attributes){var a=e.attributes;if(a.RESOLUTION){var u=a.RESOLUTION;this.width=u.width,this.height=u.height}this.bandwidth=a.BANDWIDTH}this.id=r,this.enabled=i.bind(this,e,o)},a=function(t){var e=t.playlists;t.representations=function(){return e.master.playlists.map(function(e,r){return new o(t,e,r)})}};r["default"]=a,e.exports=r["default"]},{}],11:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=t("url-toolkit"),o=n(i),a=t("global/window"),s=n(a),u=function(t,e){return/^[a-z]+:/i.test(e)?e:(/\/\//i.test(t)||(t=o["default"].buildAbsoluteURL(s["default"].location.href,t)),o["default"].buildAbsoluteURL(t,e))};r["default"]=u,e.exports=r["default"]},{"global/window":26,"url-toolkit":85}],12:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},l=t("./ranges"),c=i(l),d=t("./playlist"),f="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,h=i(f),p=t("./source-updater"),g=i(p),y=t("aes-decrypter"),v=t("mux.js/lib/mp4/probe"),m=i(v),b=t("./config"),_=i(b),T=t("global/window"),w=i(T),k=500,E=function(t,e,r){if(!t)return!1;var n=t.segments[e],i=t.segments[e-1];return r&&n?(n.end=r,i?i.end&&(n.duration=n.end-i.end):n.duration=n.end,!0):!1},S=function(t,e,r){if(!t)return!1;var n=t.segments,i=r===n.length;return t.endList&&"open"===e.readyState&&i},O=function(t){var e=void 0,r=void 0;return r=t.offset+t.length-1,e=t.offset,"bytes="+e+"-"+r},j=function(t){var e={};return"byterange"in t&&(e.Range=O(t.byterange)),e},C=function(t){var e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},x=function(t){function e(t){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var r=void 0;if(!t)throw new TypeError("Initialization options are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");r=h["default"].mergeOptions(h["default"].options.hls,t),this.state="INIT",this.bandwidth=r.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.hasPlayed_=r.hasPlayed,this.currentTime_=r.currentTime,this.seekable_=r.seekable,this.seeking_=r.seeking,this.setCurrentTime_=r.setCurrentTime,this.mediaSource_=r.mediaSource,this.hls_=r.hls,this.checkBufferTimeout_=null,this.error_=void 0,this.expired_=0,this.timeCorrection_=0,this.currentTimeline_=-1,this.zeroOffset_=NaN,this.xhr_=null,this.pendingSegment_=null,this.mimeType_=null,this.sourceUpdater_=null,this.xhrOptions_=null,this.activeInitSegmentId_=null,this.initSegments_={}}return a(e,t),s(e,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaTransferDuration=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()}},{key:"abort",value:function(){"WAITING"===this.state&&(this.abort_(),this.paused()||(this.state="READY",this.fillBuffer_()))}},{key:"error",value:function(t){return"undefined"!=typeof t&&(this.error_=t),this.pendingSegment_=null,this.error_}},{key:"load",value:function(){return this.monitorBuffer_(),this.playlist_?"INIT"===this.state&&this.mimeType_?this.init_():void(!this.sourceUpdater_||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY",this.fillBuffer_())):void 0}},{key:"playlist",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t)return this.playlist_=t,this.xhrOptions_=e,this.mimeType_&&"INIT"===this.state&&!this.paused()?this.init_():void 0}},{key:"pause",value:function(){this.checkBufferTimeout_&&(w["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"expired",value:function(t){this.expired_=t}},{key:"mimeType",value:function(t){this.mimeType_||(this.mimeType_=t,this.playlist_&&"INIT"===this.state&&!this.paused()&&this.init_())}},{key:"monitorBuffer_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&w["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=w["default"].setTimeout(this.monitorBuffer_.bind(this),k)}},{key:"checkBuffer_",value:function(t,e,r,n,i,o){var a=c["default"].findRange(t,r);0===a.length&&0===r&&(a=c["default"].findRange(t,r+c["default"].TIME_FUDGE_FACTOR));var s=void 0,u=void 0,l=void 0;if(!e.segments.length)return null;if(0===a.length)l=(0,d.getMediaIndexForTime_)(e,r+o,i);else{if(u=a.end(0),s=Math.max(0,u-r),!n&&s>=1)return null;if(n&&s>=_["default"].GOAL_BUFFER_LENGTH)return null;l=(0,d.getMediaIndexForTime_)(e,u+o,i)}return l}},{key:"abort_",value:function(){this.xhr_&&this.xhr_.abort(),this.pendingSegment_=null}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new g["default"](this.mediaSource_,this.mimeType_),this.clearBuffer(),this.fillBuffer_()}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){var t=this.sourceUpdater_.buffered(),e=this.playlist_,r=this.currentTime_(),n=this.hasPlayed_(),i=this.expired_,o=this.timeCorrection_,a=this.checkBuffer_(t,e,r,n,i,o);if(null!==a){var s=S(e,this.mediaSource_,a);if(s)return void this.mediaSource_.endOfStream();if((a!==e.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&!(0>a||a>=e.segments.length)){var u=this.playlist_.segments[a],l={uri:u.resolvedUri,mediaIndex:a,playlist:e,bytes:null,encryptedBytes:null,buffered:null,timestampOffset:NaN,timeline:u.timeline,duration:u.duration},f=(0,d.duration)(e,e.mediaSequence+l.mediaIndex,i);l.timestampOffset=this.sourceUpdater_.timestampOffset(),(u.timeline!==this.currentTimeline_||f<this.sourceUpdater_.timestampOffset())&&(l.timestampOffset=f);var h=c["default"].getSegmentBufferedPercent(f,u.duration,r,t);if(h>=90){var p=this.incrementTimeCorrection_(e.targetDuration/2,1);return void(p&&!this.paused()&&this.fillBuffer_())}this.loadSegment_(l)}}}}},{key:"trimBuffer_",value:function(t){var e=this.seekable_(),r=this.currentTime_(),n=void 0;if(e.length&&e.start(0)>0&&e.start(0)<r)return e.start(0);if(n=r-60,!this.playlist_.endList)return n;for(var i=1;i<=t.playlist.segments.length;i++){var o=(0,d.duration)(t.playlist,t.playlist.mediaSequence+i,this.expired_),a=(0,d.duration)(t.playlist,t.playlist.mediaSequence+(i-1),this.expired_);if(o>=n){n=a;break}}return n}},{key:"loadSegment_",value:function(t){var e=void 0,r=void 0,n=void 0,i=void 0,o=0;if(o=this.trimBuffer_(t),o>0&&this.sourceUpdater_.remove(0,o),e=t.playlist.segments[t.mediaIndex],e.key){var a=h["default"].mergeOptions(this.xhrOptions_,{uri:e.key.resolvedUri,responseType:"arraybuffer"});r=this.hls_.xhr(a,this.handleResponse_.bind(this))}if(e.map&&!this.initSegments_[C(e.map)]){var s=h["default"].mergeOptions(this.xhrOptions_,{uri:e.map.resolvedUri,responseType:"arraybuffer",headers:j(e.map)});n=this.hls_.xhr(s,this.handleResponse_.bind(this))}this.pendingSegment_=t;var u=h["default"].mergeOptions(this.xhrOptions_,{uri:t.uri,responseType:"arraybuffer",headers:j(e)});i=this.hls_.xhr(u,this.handleResponse_.bind(this)),this.xhr_={keyXhr:r,initSegmentXhr:n,segmentXhr:i,abort:function(){this.segmentXhr&&(this.segmentXhr.onreadystatechange=null,this.segmentXhr.abort(),this.segmentXhr=null),this.initSegmentXhr&&(this.initSegmentXhr.onreadystatechange=null,this.initSegmentXhr.abort(),this.initSegmentXhr=null),this.keyXhr&&(this.keyXhr.onreadystatechange=null,this.keyXhr.abort(),this.keyXhr=null)}},this.state="WAITING"}},{key:"handleResponse_",value:function(t,e){var r=void 0,n=void 0,i=void 0,o=void 0;if(this.xhr_&&(e===this.xhr_.segmentXhr||e===this.xhr_.keyXhr||e===this.xhr_.initSegmentXhr)){if(r=this.pendingSegment_,n=r.playlist.segments[r.mediaIndex],e.timedout)return this.abort_(),this.bandwidth=1,this.roundTrip=NaN,this.state="READY",this.trigger("progress");if(!e.aborted&&t)return i=this.xhr_.keyXhr,this.abort_(),this.error({status:e.status,message:e===i?"HLS key request error at URL: "+n.key.uri:"HLS segment request error at URL: "+r.uri,code:2,xhr:e}),this.state="READY",this.pause(),this.trigger("error");if(!e.response)return void this.abort_();if(e===this.xhr_.segmentXhr&&(this.xhr_.segmentXhr=null,r.startOfAppend=Date.now(),this.roundTrip=e.roundTripTime,this.bandwidth=e.bandwidth,this.mediaBytesTransferred+=e.bytesReceived||0,this.mediaRequests+=1,this.mediaTransferDuration+=e.roundTripTime||0,n.key?r.encryptedBytes=new Uint8Array(e.response):r.bytes=new Uint8Array(e.response)),e===this.xhr_.keyXhr){if(i=this.xhr_.segmentXhr,this.xhr_.keyXhr=null,16!==e.response.byteLength)return this.abort_(),this.error({status:e.status,message:"Invalid HLS key at URL: "+n.key.uri,code:2,xhr:e}),this.state="READY",this.pause(),this.trigger("error");o=new DataView(e.response),n.key.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),n.key.iv=n.key.iv||new Uint32Array([0,0,0,r.mediaIndex+r.playlist.mediaSequence])}e===this.xhr_.initSegmentXhr&&(this.xhr_.initSegmentXhr=null,n.map.bytes=new Uint8Array(e.response),this.initSegments_[C(n.map)]=n.map),this.xhr_.segmentXhr||this.xhr_.keyXhr||this.xhr_.initSegmentXhr||(this.xhr_=null,this.processResponse_())}}},{key:"clearBuffer",value:function(){this.sourceUpdater_&&this.sourceUpdater_.buffered().length&&this.sourceUpdater_.remove(0,1/0)}},{key:"processResponse_",value:function(){var t=void 0,e=void 0;if(this.state="DECRYPTING",t=this.pendingSegment_,e=t.playlist.segments[t.mediaIndex],e.map&&isNaN(this.zeroOffset_)){var r=m["default"].timescale(e.map.bytes),n=m["default"].startTime(r,t.bytes);this.zeroOffset_=n,t.timestampOffset-=n}e.key?new y.Decrypter(t.encryptedBytes,e.key.bytes,e.key.iv,function(e,r){t.bytes=r,this.handleSegment_()}.bind(this)):this.handleSegment_()}},{key:"handleSegment_",value:function(){var t=this,e=void 0,r=void 0;this.state="APPENDING",e=this.pendingSegment_,e.buffered=this.sourceUpdater_.buffered(),r=e.playlist.segments[e.mediaIndex],this.currentTimeline_=e.timeline,e.timestampOffset!==this.sourceUpdater_.timestampOffset()&&this.sourceUpdater_.timestampOffset(e.timestampOffset),r.map&&!function(){var e=C(r.map);if(!t.activeInitSegmentId_||t.activeInitSegmentId_!==e){var n=t.initSegments_[e];t.sourceUpdater_.appendBuffer(n.bytes,function(){t.activeInitSegmentId_=e})}}(),e.byteLength=e.bytes.byteLength,this.sourceUpdater_.appendBuffer(e.bytes,this.handleUpdateEnd_.bind(this))}},{key:"handleUpdateEnd_",value:function(){var t=this.pendingSegment_,e=this.currentTime_();this.pendingSegment_=null,this.recordThroughput_(t);var r=this.updateTimeline_(t);this.trigger("progress");var n=t.mediaIndex;n+=t.playlist.mediaSequence-this.playlist_.mediaSequence;var i=c["default"].findRange(this.sourceUpdater_.buffered(),e),o=S(t.playlist,this.mediaSource_,n+1);o&&this.mediaSource_.endOfStream();var a=this.seekable_(),s=c["default"].findNextRange(this.sourceUpdater_.buffered(),e);if(this.seeking_()&&0===i.length&&a.length&&e<a.start(0)&&s.length&&(h["default"].log("tried seeking to",e,"but that was too early, retrying at",s.start(0)),this.setCurrentTime_(s.start(0)+c["default"].TIME_FUDGE_FACTOR)),this.state="READY",r)return this.timeCorrection_=0,void(this.paused()||this.fillBuffer_());var u=this.incrementTimeCorrection_(t.duration,4);u&&!this.paused()&&this.fillBuffer_()}},{key:"updateTimeline_",value:function(t){var e=void 0,r=void 0,n=!1,i=t.playlist,o=t.mediaIndex;return o+=i.mediaSequence-this.playlist_.mediaSequence,e=i.segments[o],e&&t&&t.playlist.uri===this.playlist_.uri&&(r=c["default"].findSoleUncommonTimeRangesEnd(t.buffered,this.sourceUpdater_.buffered()),n=E(i,o,r)),n}},{key:"recordThroughput_",value:function(t){var e=this.throughput.rate,r=Date.now()-t.startOfAppend+1,n=Math.floor(t.byteLength/r*8*1e3);this.throughput.rate+=(n-e)/++this.throughput.count}},{key:"incrementTimeCorrection_",value:function(t,e){return this.timeCorrection_>=this.playlist_.targetDuration*e?(this.timeCorrection_=0,!1):(this.timeCorrection_+=t,!0)}}]),e}(h["default"].EventTarget);r["default"]=x,e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":3,"./playlist":7,"./ranges":8,"./source-updater":13,"aes-decrypter":19,"global/window":26,"mux.js/lib/mp4/probe":81}],13:[function(t,e,r){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,s=n(a),u=function(){function t(e,r){var n=this;i(this,t);var o=function(){n.sourceBuffer_=e.addSourceBuffer(r),n.onUpdateendCallback_=function(){var t=n.pendingCallback_;n.pendingCallback_=null,t&&t(),n.runCallback_()},n.sourceBuffer_.addEventListener("updateend",n.onUpdateendCallback_),n.runCallback_()};this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,"closed"===e.readyState?e.addEventListener("sourceopen",o):o()}return o(t,[{key:"abort",value:function(t){var e=this;this.queueCallback_(function(){e.sourceBuffer_.abort()},t)}},{key:"appendBuffer",value:function(t,e){var r=this;this.queueCallback_(function(){r.sourceBuffer_.appendBuffer(t)},e)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:s["default"].createTimeRanges()}},{key:"duration",value:function(t){var e=this;this.queueCallback_(function(){e.sourceBuffer_.duration=t})}},{key:"remove",value:function(t,e){var r=this;this.queueCallback_(function(){r.sourceBuffer_.remove(t,e)})}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating}},{key:"timestampOffset",value:function(t){var e=this;return"undefined"!=typeof t&&(this.queueCallback_(function(){e.sourceBuffer_.timestampOffset=t}),this.timestampOffset_=t),this.timestampOffset_}},{key:"queueCallback_",value:function(t,e){this.callbacks_.push([t.bind(this),e]),this.runCallback_()}},{key:"runCallback_",value:function(){var t=void 0;this.sourceBuffer_&&!this.sourceBuffer_.updating&&this.callbacks_.length&&(t=this.callbacks_.shift(),this.pendingCallback_=t[1],t[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),t}();r["default"]=u,e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){n(this,t),this.listeners={}}return i(t,[{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"off",value:function(t,e){var r=void 0;return this.listeners[t]?(r=this.listeners[t].indexOf(e),this.listeners[t].splice(r,1),r>-1):!1}},{key:"trigger",value:function(t){var e=void 0,r=void 0,n=void 0,i=void 0;if(e=this.listeners[t])if(2===arguments.length)for(n=e.length,r=0;n>r;++r)e[r].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),n=e.length,r=0;n>r;++r)e[r].apply(this,i)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(t){this.on("data",function(e){t.push(e)})}}]),t}();r["default"]=o,e.exports=r["default"]},{}],15:[function(t,e,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,i=function(){var t=function e(t,r){if(t=(0,n.mergeOptions)({timeout:45e3},t),e.beforeRequest&&"function"==typeof e.beforeRequest){var i=e.beforeRequest(t);i&&(t=i)}var o=(0,n.xhr)(t,function(t,e){!t&&o.response&&(o.responseTime=Date.now(),o.roundTripTime=o.responseTime-o.requestTime,o.bytesReceived=o.response.byteLength||o.response.length,o.bandwidth||(o.bandwidth=Math.floor(o.bytesReceived/o.roundTripTime*8*1e3))),t||o.timedout?o.timedout=o.timedout||"ETIMEDOUT"===t.code:o.timedout=!1,t||200===e.statusCode||206===e.statusCode||0===e.statusCode||(t=new Error("XHR Failed with a response of: "+(o&&(o.response||o.responseText)))),r(t,o)});return o.requestTime=Date.now(),o};return t};r["default"]=i,e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(t,e,r){/**
   * @file aes.js
   *
   * This file contains an adaptation of the AES decryption algorithm
   * from the Standford Javascript Cryptography Library. That work is
   * covered by the following copyright and permissions notice:
   *
   * Copyright 2009-2010 Emily Stark, Mike Hamburg, Dan Boneh.
   * All rights reserved.
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are
   * met:
   *
   * 1. Redistributions of source code must retain the above copyright
   *    notice, this list of conditions and the following disclaimer.
   *
   * 2. Redistributions in binary form must reproduce the above
   *    copyright notice, this list of conditions and the following
   *    disclaimer in the documentation and/or other materials provided
   *    with the distribution.
   *
   * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR
   * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR CONTRIBUTORS BE
   * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
   * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
   * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
   * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
   * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
   * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN
   * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   *
   * The views and conclusions contained in the software and documentation
   * are those of the authors and should not be interpreted as representing
   * official policies, either expressed or implied, of the authors.
   */
"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],e=t[0],r=t[1],n=e[4],i=r[4],o=void 0,a=void 0,s=void 0,u=[],l=[],c=void 0,d=void 0,f=void 0,h=void 0,p=void 0,g=void 0;for(o=0;256>o;o++)l[(u[o]=o<<1^283*(o>>7))^o]=o;for(a=s=0;!n[a];a^=c||1,s=l[s]||1)for(h=s^s<<1^s<<2^s<<3^s<<4,h=h>>8^255&h^99,n[a]=h,i[h]=a,f=u[d=u[c=u[a]]],g=16843009*f^65537*d^257*c^16843008*a,p=257*u[h]^16843008*h,o=0;4>o;o++)e[o][a]=p=p<<24^p>>>8,r[o][h]=g=g<<24^g>>>8;for(o=0;5>o;o++)e[o]=e[o].slice(0),r[o]=r[o].slice(0);return t},a=null,s=function(){function t(e){n(this,t),a||(a=o()),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];var r=void 0,i=void 0,s=void 0,u=void 0,l=void 0,c=this._tables[0][4],d=this._tables[1],f=e.length,h=1;if(4!==f&&6!==f&&8!==f)throw new Error("Invalid aes key size");for(u=e.slice(0),l=[],this._key=[u,l],r=f;4*f+28>r;r++)s=u[r-1],(r%f===0||8===f&&r%f===4)&&(s=c[s>>>24]<<24^c[s>>16&255]<<16^c[s>>8&255]<<8^c[255&s],r%f===0&&(s=s<<8^s>>>24^h<<24,h=h<<1^283*(h>>7))),u[r]=u[r-f]^s;for(i=0;r;i++,r--)s=u[3&i?r:r-4],4>=r||4>i?l[i]=s:l[i]=d[0][c[s>>>24]]^d[1][c[s>>16&255]]^d[2][c[s>>8&255]]^d[3][c[255&s]]}return i(t,[{key:"decrypt",value:function(t,e,r,n,i,o){var a=this._key[1],s=t^a[0],u=n^a[1],l=r^a[2],c=e^a[3],d=void 0,f=void 0,h=void 0,p=a.length/4-2,g=void 0,y=4,v=this._tables[1],m=v[0],b=v[1],_=v[2],T=v[3],w=v[4];for(g=0;p>g;g++)d=m[s>>>24]^b[u>>16&255]^_[l>>8&255]^T[255&c]^a[y],f=m[u>>>24]^b[l>>16&255]^_[c>>8&255]^T[255&s]^a[y+1],h=m[l>>>24]^b[c>>16&255]^_[s>>8&255]^T[255&u]^a[y+2],c=m[c>>>24]^b[s>>16&255]^_[u>>8&255]^T[255&l]^a[y+3],y+=4,s=d,u=f,l=h;for(g=0;4>g;g++)i[(3&-g)+o]=w[s>>>24]<<24^w[u>>16&255]<<16^w[l>>8&255]<<8^w[255&c]^a[y++],d=s,s=u,u=l,l=c,c=d}}]),t}();r["default"]=s,e.exports=r["default"]},{}],17:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},u=t("./stream"),l=n(u),c=function(t){function e(){i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,l["default"]),this.jobs=[],this.delay=1,this.timeout_=null}return o(e,t),a(e,[{key:"processJob_",value:function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}},{key:"push",value:function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),e}(l["default"]);r["default"]=c,e.exports=r["default"]},{"./stream":20}],18:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("./aes"),s=n(a),u=t("./async-stream"),l=n(u),c=t("pkcs7"),d=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},f=function(t,e,r){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),i=new s["default"](Array.prototype.slice.call(e)),o=new Uint8Array(t.byteLength),a=new Int32Array(o.buffer),u=void 0,l=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,y=void 0,v=void 0;for(u=r[0],l=r[1],c=r[2],f=r[3],v=0;v<n.length;v+=4)h=d(n[v]),p=d(n[v+1]),g=d(n[v+2]),y=d(n[v+3]),i.decrypt(h,p,g,y,a,v),a[v]=d(a[v]^u),a[v+1]=d(a[v+1]^l),a[v+2]=d(a[v+2]^c),a[v+3]=d(a[v+3]^f),u=h,l=p,c=g,f=y;return o};r.decrypt=f;var h=function(){function t(e,r,n,o){i(this,t);var a=t.STEP,s=new Int32Array(e.buffer),u=new Uint8Array(e.byteLength),f=0;for(this.asyncStream_=new l["default"],this.asyncStream_.push(this.decryptChunk_(s.subarray(f,f+a),r,n,u)),f=a;f<s.length;f+=a)n=new Uint32Array([d(s[f-4]),d(s[f-3]),d(s[f-2]),d(s[f-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(f,f+a),r,n,u));this.asyncStream_.push(function(){o(null,(0,c.unpad)(u))})}return o(t,[{key:"decryptChunk_",value:function(t,e,r,n){return function(){var i=f(t,e,r);n.set(i,t.byteOffset)}}}],[{key:"STEP",get:function(){return 32e3}}]),t}();r.Decrypter=h,r["default"]={Decrypter:h,decrypt:f}},{"./aes":16,"./async-stream":17,pkcs7:22}],19:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=t("./decrypter"),o=t("./async-stream"),a=n(o);r["default"]={decrypt:i.decrypt,Decrypter:i.Decrypter,AsyncStream:a["default"]},e.exports=r["default"]},{"./async-stream":17,"./decrypter":18}],20:[function(t,e,r){arguments[4][14][0].apply(r,arguments)},{dup:14}],21:[function(t,e,r){/*
   * pkcs7.pad
   * https://github.com/brightcove/pkcs7
   *
   * Copyright (c) 2014 Brightcove
   * Licensed under the apache2 license.
   */
"use strict";var n;e.exports=function(t){var e=n[t.byteLength%16||0],r=new Uint8Array(t.byteLength+e.length);return r.set(t),r.set(e,t.byteLength),r},n=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],22:[function(t,e,r){/*
   * pkcs7
   * https://github.com/brightcove/pkcs7
   *
   * Copyright (c) 2014 Brightcove
   * Licensed under the apache2 license.
   */
"use strict";r.pad=t("./pad.js"),r.unpad=t("./unpad.js")},{"./pad.js":21,"./unpad.js":23}],23:[function(t,e,r){/*
   * pkcs7.unpad
   * https://github.com/brightcove/pkcs7
   *
   * Copyright (c) 2014 Brightcove
   * Licensed under the apache2 license.
   */
"use strict";e.exports=function(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}},{}],24:[function(t,e,r){},{}],25:[function(t,e,r){(function(r){var n="undefined"!=typeof r?r:"undefined"!=typeof window?window:{},i=t("min-document");if("undefined"!=typeof document)e.exports=document;else{var o=n["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":24}],26:[function(t,e,r){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(t,e,r){function n(t,e){if("function"!=typeof t)throw new TypeError(i);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var r=arguments,n=-1,i=o(r.length-e,0),a=Array(i);++n<i;)a[n]=r[e+n];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}var s=Array(e+1);for(n=-1;++n<e;)s[n]=r[n];return s[e]=a,t.apply(this,s)}}var i="Expected a function",o=Math.max;e.exports=n},{}],28:[function(t,e,r){function n(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}e.exports=n},{}],29:[function(t,e,r){function n(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}e.exports=n},{}],30:[function(t,e,r){function n(t,e,r){r||(r={});for(var n=-1,i=e.length;++n<i;){var o=e[n];r[o]=t[o]}return r}e.exports=n},{}],31:[function(t,e,r){var n=t("./createBaseFor"),i=n();e.exports=i},{"./createBaseFor":38}],32:[function(t,e,r){function n(t,e){return i(t,e,o)}var i=t("./baseFor"),o=t("../object/keysIn");e.exports=n},{"../object/keysIn":59,"./baseFor":31}],33:[function(t,e,r){function n(t,e,r,f,h){if(!u(t))return t;var p=s(e)&&(a(e)||c(e)),g=p?void 0:d(e);return i(g||e,function(i,a){if(g&&(a=i,i=e[a]),l(i))f||(f=[]),h||(h=[]),o(t,e,a,n,r,f,h);else{var s=t[a],u=r?r(s,i,a,t,e):void 0,c=void 0===u;c&&(u=i),void 0===u&&(!p||a in t)||!c&&(u===u?u===s:s!==s)||(t[a]=u)}}),t}var i=t("./arrayEach"),o=t("./baseMergeDeep"),a=t("../lang/isArray"),s=t("./isArrayLike"),u=t("../lang/isObject"),l=t("./isObjectLike"),c=t("../lang/isTypedArray"),d=t("../object/keys");e.exports=n},{"../lang/isArray":50,"../lang/isObject":53,"../lang/isTypedArray":56,"../object/keys":58,"./arrayEach":29,"./baseMergeDeep":34,"./isArrayLike":41,"./isObjectLike":46}],34:[function(t,e,r){function n(t,e,r,n,d,f,h){for(var p=f.length,g=e[r];p--;)if(f[p]==g)return void(t[r]=h[p]);var y=t[r],v=d?d(y,g,r,t,e):void 0,m=void 0===v;m&&(v=g,s(g)&&(a(g)||l(g))?v=a(y)?y:s(y)?i(y):[]:u(g)||o(g)?v=o(y)?c(y):u(y)?y:{}:m=!1),f.push(g),h.push(v),m?t[r]=n(v,g,d,f,h):(v===v?v!==y:y===y)&&(t[r]=v)}var i=t("./arrayCopy"),o=t("../lang/isArguments"),a=t("../lang/isArray"),s=t("./isArrayLike"),u=t("../lang/isPlainObject"),l=t("../lang/isTypedArray"),c=t("../lang/toPlainObject");e.exports=n},{"../lang/isArguments":49,"../lang/isArray":50,"../lang/isPlainObject":54,"../lang/isTypedArray":56,"../lang/toPlainObject":57,"./arrayCopy":28,"./isArrayLike":41}],35:[function(t,e,r){function n(t){return function(e){return null==e?void 0:i(e)[t]}}var i=t("./toObject");e.exports=n},{"./toObject":48}],36:[function(t,e,r){function n(t,e,r){if("function"!=typeof t)return i;if(void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)};case 5:return function(r,n,i,o,a){return t.call(e,r,n,i,o,a)}}return function(){return t.apply(e,arguments)}}var i=t("../utility/identity");e.exports=n},{"../utility/identity":62}],37:[function(t,e,r){function n(t){return a(function(e,r){var n=-1,a=null==e?0:r.length,s=a>2?r[a-2]:void 0,u=a>2?r[2]:void 0,l=a>1?r[a-1]:void 0;for("function"==typeof s?(s=i(s,l,5),a-=2):(s="function"==typeof l?l:void 0,a-=s?1:0),u&&o(r[0],r[1],u)&&(s=3>a?void 0:s,a=1);++n<a;){var c=r[n];c&&t(e,c,s)}return e})}var i=t("./bindCallback"),o=t("./isIterateeCall"),a=t("../function/restParam");e.exports=n},{"../function/restParam":27,"./bindCallback":36,"./isIterateeCall":44}],38:[function(t,e,r){function n(t){return function(e,r,n){for(var o=i(e),a=n(e),s=a.length,u=t?s:-1;t?u--:++u<s;){var l=a[u];if(r(o[l],l,o)===!1)break}return e}}var i=t("./toObject");e.exports=n},{"./toObject":48}],39:[function(t,e,r){var n=t("./baseProperty"),i=n("length");e.exports=i},{"./baseProperty":35}],40:[function(t,e,r){function n(t,e){var r=null==t?void 0:t[e];return i(r)?r:void 0}var i=t("../lang/isNative");e.exports=n},{"../lang/isNative":52}],41:[function(t,e,r){function n(t){return null!=t&&o(i(t))}var i=t("./getLength"),o=t("./isLength");e.exports=n},{"./getLength":39,"./isLength":45}],42:[function(t,e,r){var n=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();e.exports=n},{}],43:[function(t,e,r){function n(t,e){return t="number"==typeof t||i.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&e>t}var i=/^\d+$/,o=9007199254740991;e.exports=n},{}],44:[function(t,e,r){function n(t,e,r){if(!a(r))return!1;var n=typeof e;if("number"==n?i(r)&&o(e,r.length):"string"==n&&e in r){var s=r[e];return t===t?t===s:s!==s}return!1}var i=t("./isArrayLike"),o=t("./isIndex"),a=t("../lang/isObject");e.exports=n},{"../lang/isObject":53,"./isArrayLike":41,"./isIndex":43}],45:[function(t,e,r){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&i>=t}var i=9007199254740991;e.exports=n},{}],46:[function(t,e,r){function n(t){return!!t&&"object"==typeof t}e.exports=n},{}],47:[function(t,e,r){function n(t){for(var e=l(t),r=e.length,n=r&&t.length,c=!!n&&s(n)&&(o(t)||i(t)||u(t)),f=-1,h=[];++f<r;){var p=e[f];(c&&a(p,n)||d.call(t,p))&&h.push(p)}return h}var i=t("../lang/isArguments"),o=t("../lang/isArray"),a=t("./isIndex"),s=t("./isLength"),u=t("../lang/isString"),l=t("../object/keysIn"),c=Object.prototype,d=c.hasOwnProperty;e.exports=n},{"../lang/isArguments":49,"../lang/isArray":50,"../lang/isString":55,"../object/keysIn":59,"./isIndex":43,"./isLength":45}],48:[function(t,e,r){function n(t){if(a.unindexedChars&&o(t)){for(var e=-1,r=t.length,n=Object(t);++e<r;)n[e]=t.charAt(e);return n}return i(t)?t:Object(t)}var i=t("../lang/isObject"),o=t("../lang/isString"),a=t("../support");e.exports=n},{"../lang/isObject":53,"../lang/isString":55,"../support":61}],49:[function(t,e,r){function n(t){return o(t)&&i(t)&&s.call(t,"callee")&&!u.call(t,"callee")}var i=t("../internal/isArrayLike"),o=t("../internal/isObjectLike"),a=Object.prototype,s=a.hasOwnProperty,u=a.propertyIsEnumerable;e.exports=n},{"../internal/isArrayLike":41,"../internal/isObjectLike":46}],50:[function(t,e,r){var n=t("../internal/getNative"),i=t("../internal/isLength"),o=t("../internal/isObjectLike"),a="[object Array]",s=Object.prototype,u=s.toString,l=n(Array,"isArray"),c=l||function(t){return o(t)&&i(t.length)&&u.call(t)==a};e.exports=c},{"../internal/getNative":40,"../internal/isLength":45,"../internal/isObjectLike":46}],51:[function(t,e,r){function n(t){return i(t)&&s.call(t)==o}var i=t("./isObject"),o="[object Function]",a=Object.prototype,s=a.toString;e.exports=n},{"./isObject":53}],52:[function(t,e,r){function n(t){return null==t?!1:i(t)?d.test(l.call(t)):a(t)&&(o(t)?d:s).test(t)}var i=t("./isFunction"),o=t("../internal/isHostObject"),a=t("../internal/isObjectLike"),s=/^\[object .+?Constructor\]$/,u=Object.prototype,l=Function.prototype.toString,c=u.hasOwnProperty,d=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},{"../internal/isHostObject":42,"../internal/isObjectLike":46,"./isFunction":51}],53:[function(t,e,r){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=n},{}],54:[function(t,e,r){function n(t){var e;if(!s(t)||f.call(t)!=l||a(t)||o(t)||!d.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var r;return u.ownLast?(i(t,function(t,e,n){return r=d.call(n,e),!1}),r!==!1):(i(t,function(t,e){r=e}),void 0===r||d.call(t,r))}var i=t("../internal/baseForIn"),o=t("./isArguments"),a=t("../internal/isHostObject"),s=t("../internal/isObjectLike"),u=t("../support"),l="[object Object]",c=Object.prototype,d=c.hasOwnProperty,f=c.toString;e.exports=n},{"../internal/baseForIn":32,"../internal/isHostObject":42,"../internal/isObjectLike":46,"../support":61,"./isArguments":49}],55:[function(t,e,r){function n(t){return"string"==typeof t||i(t)&&s.call(t)==o}var i=t("../internal/isObjectLike"),o="[object String]",a=Object.prototype,s=a.toString;e.exports=n},{"../internal/isObjectLike":46}],56:[function(t,e,r){function n(t){return o(t)&&i(t.length)&&!!x[P.call(t)]}var i=t("../internal/isLength"),o=t("../internal/isObjectLike"),a="[object Arguments]",s="[object Array]",u="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",y="[object Set]",v="[object String]",m="[object WeakMap]",b="[object ArrayBuffer]",_="[object Float32Array]",T="[object Float64Array]",w="[object Int8Array]",k="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",j="[object Uint16Array]",C="[object Uint32Array]",x={};x[_]=x[T]=x[w]=x[k]=x[E]=x[S]=x[O]=x[j]=x[C]=!0,x[a]=x[s]=x[b]=x[u]=x[l]=x[c]=x[d]=x[f]=x[h]=x[p]=x[g]=x[y]=x[v]=x[m]=!1;var A=Object.prototype,P=A.toString;e.exports=n},{"../internal/isLength":45,"../internal/isObjectLike":46}],57:[function(t,e,r){function n(t){return i(t,o(t))}var i=t("../internal/baseCopy"),o=t("../object/keysIn");e.exports=n},{"../internal/baseCopy":30,"../object/keysIn":59}],58:[function(t,e,r){var n=t("../internal/getNative"),i=t("../internal/isArrayLike"),o=t("../lang/isObject"),a=t("../internal/shimKeys"),s=t("../support"),u=n(Object,"keys"),l=u?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||("function"==typeof t?s.enumPrototypes:i(t))?a(t):o(t)?u(t):[]}:a;e.exports=l},{"../internal/getNative":40,"../internal/isArrayLike":41,"../internal/shimKeys":47,"../lang/isObject":53,"../support":61}],59:[function(t,e,r){function n(t){if(null==t)return[];c(t)||(t=Object(t));var e=t.length;e=e&&l(e)&&(a(t)||o(t)||d(t))&&e||0;for(var r=t.constructor,n=-1,i=s(r)&&r.prototype||E,h=i===t,p=Array(e),g=e>0,v=f.enumErrorProps&&(t===k||t instanceof Error),m=f.enumPrototypes&&s(t);++n<e;)p[n]=n+"";for(var _ in t)m&&"prototype"==_||v&&("message"==_||"name"==_)||g&&u(_,e)||"constructor"==_&&(h||!O.call(t,_))||p.push(_);if(f.nonEnumShadows&&t!==E){var x=t===S?T:t===k?y:j.call(t),A=C[x]||C[b];for(x==b&&(i=E),e=w.length;e--;){_=w[e];var P=A[_];h&&P||(P?!O.call(t,_):t[_]===i[_])||p.push(_)}}return p}var i=t("../internal/arrayEach"),o=t("../lang/isArguments"),a=t("../lang/isArray"),s=t("../lang/isFunction"),u=t("../internal/isIndex"),l=t("../internal/isLength"),c=t("../lang/isObject"),d=t("../lang/isString"),f=t("../support"),h="[object Array]",p="[object Boolean]",g="[object Date]",y="[object Error]",v="[object Function]",m="[object Number]",b="[object Object]",_="[object RegExp]",T="[object String]",w=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],k=Error.prototype,E=Object.prototype,S=String.prototype,O=E.hasOwnProperty,j=E.toString,C={};C[h]=C[g]=C[m]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},C[p]=C[T]={constructor:!0,toString:!0,valueOf:!0},C[y]=C[v]=C[_]={constructor:!0,toString:!0},C[b]={constructor:!0},i(w,function(t){for(var e in C)if(O.call(C,e)){var r=C[e];r[t]=O.call(r,t)}}),e.exports=n},{"../internal/arrayEach":29,"../internal/isIndex":43,"../internal/isLength":45,"../lang/isArguments":49,"../lang/isArray":50,"../lang/isFunction":51,"../lang/isObject":53,"../lang/isString":55,"../support":61}],60:[function(t,e,r){var n=t("../internal/baseMerge"),i=t("../internal/createAssigner"),o=i(n);e.exports=o},{"../internal/baseMerge":33,"../internal/createAssigner":37}],61:[function(t,e,r){var n=Array.prototype,i=Error.prototype,o=Object.prototype,a=o.propertyIsEnumerable,s=n.splice,u={};!function(t){var e=function(){this.x=t},r={0:t,length:t},n=[];e.prototype={valueOf:t,y:t};for(var o in new e)n.push(o);u.enumErrorProps=a.call(i,"message")||a.call(i,"name"),u.enumPrototypes=a.call(e,"prototype"),u.nonEnumShadows=!/valueOf/.test(n),u.ownLast="x"!=n[0],u.spliceObjects=(s.call(r,0,1),!r[0]),u.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),e.exports=u},{}],62:[function(t,e,r){function n(t){return t}e.exports=n},{}],63:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=t("./line-stream"),o=n(i),a=t("./parse-stream"),s=n(a),u=t("./parser"),l=n(u);r["default"]={LineStream:o["default"],ParseStream:s["default"],Parser:l["default"]},e.exports=r["default"]},{"./line-stream":64,"./parse-stream":65,"./parser":66}],64:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},u=t("./stream"),l=n(u),c=function(t){function e(){i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.buffer=""}return o(e,t),a(e,[{key:"push",value:function(t){var e=void 0;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)}}]),e}(l["default"]);r["default"]=c,e.exports=r["default"]},{"./stream":67}],65:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(u){i=!0,o=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},l=t("./stream"),c=n(l),d=function(){var t="[^=]*",e='"[^"]*"|[^,]*',r="(?:"+t+")=(?:"+e+")";return new RegExp("(?:^|,)("+r+")")},f=function(t){for(var e=t.split(d()),r=e.length,n={},i=void 0;r--;)""!==e[r]&&(i=/([^=]*)=(.*)/.exec(e[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),n[i[0]]=i[1]);return n},h=function(t){function e(){i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return o(e,t),s(e,[{key:"push",value:function(t){var e=void 0,r=void 0;if(t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),0!==t.length){if("#"!==t[0])return void this.trigger("data",{type:"uri",uri:t});if(0!==t.indexOf("#EXT"))return void this.trigger("data",{type:"comment",text:t.slice(1)});if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))return void this.trigger("data",{type:"tag",tagType:"m3u"});if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return r={type:"tag",tagType:"inf"},e[1]&&(r.duration=parseFloat(e[1])),e[2]&&(r.title=e[2]),void this.trigger("data",r);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return r={type:"tag",tagType:"targetduration"},e[1]&&(r.duration=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return r={type:"tag",tagType:"totalduration"},e[1]&&(r.duration=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return r={type:"tag",tagType:"version"},e[1]&&(r.version=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return r={type:"tag",tagType:"media-sequence"},e[1]&&(r.number=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return r={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(r.number=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return r={type:"tag",tagType:"playlist-type"},e[1]&&(r.playlistType=e[1]),void this.trigger("data",r);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return r={type:"tag",tagType:"byterange"},e[1]&&(r.length=parseInt(e[1],10)),e[2]&&(r.offset=parseInt(e[2],10)),void this.trigger("data",r);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return r={type:"tag",tagType:"allow-cache"},e[1]&&(r.allowed=!/NO/.test(e[1])),void this.trigger("data",r);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(r={type:"tag",tagType:"map"},e[1]){var n=f(e[1]);if(n.URI&&(r.uri=n.URI),n.BYTERANGE){var i=n.BYTERANGE.split("@"),o=a(i,2),s=o[0],u=o[1];r.byterange={},s&&(r.byterange.length=parseInt(s,10)),u&&(r.byterange.offset=parseInt(u,10))}}return void this.trigger("data",r)}if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(r={type:"tag",tagType:"stream-inf"},e[1]){if(r.attributes=f(e[1]),r.attributes.RESOLUTION){var l=r.attributes.RESOLUTION.split("x"),c={};l[0]&&(c.width=parseInt(l[0],10)),l[1]&&(c.height=parseInt(l[1],10)),r.attributes.RESOLUTION=c}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}return void this.trigger("data",r)}return(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))?(r={type:"tag",tagType:"media"},e[1]&&(r.attributes=f(e[1])),void this.trigger("data",r)):(e=/^#EXT-X-ENDLIST/.exec(t))?void this.trigger("data",{type:"tag",tagType:"endlist"}):(e=/^#EXT-X-DISCONTINUITY/.exec(t))?void this.trigger("data",{type:"tag",tagType:"discontinuity"}):(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))?(r={type:"tag",tagType:"program-date-time"},e[1]&&(r.dateTimeString=e[1],r.dateTimeObject=new Date(e[1])),void this.trigger("data",r)):(e=/^#EXT-X-KEY:?(.*)$/.exec(t))?(r={type:"tag",tagType:"key"},e[1]&&(r.attributes=f(e[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r)):(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))?(r={type:"tag",tagType:"cue-out-cont"},e[1]?r.data=e[1]:r.data="",void this.trigger("data",r)):(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))?(r={type:"tag",tagType:"cue-out"},e[1]?r.data=e[1]:r.data="",void this.trigger("data",r)):(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))?(r={type:"tag",tagType:"cue-in"},e[1]?r.data=e[1]:r.data="",void this.trigger("data",r)):void this.trigger("data",{type:"tag",data:t.slice(4)})}}}]),e}(c["default"]);r["default"]=h,e.exports=r["default"]},{"./stream":67}],66:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},u=t("./stream"),l=n(u),c=t("./line-stream"),d=n(c),f=t("./parse-stream"),h=n(f),p=t("lodash-compat/object/merge"),g=n(p),y=function(t){function e(){i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.lineStream=new d["default"],this.parseStream=new h["default"],this.lineStream.pipe(this.parseStream);var t=this,r=[],n={},o=void 0,a=void 0,u=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;this.manifest={allowCache:!0,discontinuityStarts:[]},this.parseStream.on("data",function(e){var i=void 0,s=void 0;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function d(){var d={};"length"in e&&(n.byterange=d,d.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(n.byterange=d,d.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(n.duration=e.duration),0===e.duration&&(n.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=r},key:function(){return e.attributes?"NONE"===e.attributes.METHOD?void(a=null):e.attributes.URI?(e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void("undefined"!=typeof e.attributes.IV&&(a.iv=e.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){return isFinite(e.number)?void(this.manifest.mediaSequence=e.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){return isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,void(c=e.number)):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){return/VOD|EVENT/.test(e.playlistType)?void(this.manifest.playlistType=e.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){o={},e.uri&&(o.uri=e.uri),e.byterange&&(o.byterange=e.byterange)},"stream-inf":function(){return this.manifest.playlists=r,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(n.attributes||(n.attributes={}),void(n.attributes=(0,g["default"])(n.attributes,e.attributes))):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});var t=this.manifest.mediaGroups[e.attributes.TYPE];t[e.attributes["GROUP-ID"]]=t[e.attributes["GROUP-ID"]]||{},i=t[e.attributes["GROUP-ID"]],s={"default":/yes/i.test(e.attributes.DEFAULT)},s["default"]?s.autoselect=!0:s.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(s.language=e.attributes.LANGUAGE),e.attributes.URI&&(s.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(s.instreamId=e.attributes["INSTREAM-ID"]),i[e.attributes.NAME]=s},discontinuity:function(){c+=1,n.discontinuity=!0,this.manifest.discontinuityStarts.push(r.length)},"program-date-time":function(){this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject},targetduration:function(){return!isFinite(e.duration)||e.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):void(this.manifest.targetDuration=e.duration)},totalduration:function(){return!isFinite(e.duration)||e.duration<0?void this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):void(this.manifest.totalDuration=e.duration)},"cue-out":function(){n.cueOut=e.data},"cue-out-cont":function(){n.cueOutCont=e.data},"cue-in":function(){n.cueIn=e.data}})[e.tagType]||u).call(t)},uri:function(){n.uri=e.uri,r.push(n),!this.manifest.targetDuration||"duration"in n||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),n.duration=this.manifest.targetDuration),a&&(n.key=a),n.timeline=c,o&&(n.map=o),n={}},comment:function(){}})[e.type].call(t)})}return o(e,t),a(e,[{key:"push",value:function(t){this.lineStream.push(t)}},{key:"end",value:function(){this.lineStream.push("\n")}}]),e}(l["default"]);r["default"]=y,e.exports=r["default"]},{"./line-stream":64,"./parse-stream":65,"./stream":67,"lodash-compat/object/merge":60}],67:[function(t,e,r){arguments[4][14][0].apply(r,arguments)},{dup:14}],68:[function(t,e,r){/**
   * mux.js
   *
   * Copyright (c) 2016 Brightcove
   * All rights reserved.
   *
   * A stream-based aac to mp4 converter. This utility can be used to
   * deliver mp4s to a SourceBuffer on platforms that support native
   * Media Source Extensions.
   */
"use strict";var n,i=t("../utils/stream.js");n=function(){var t=new Uint8Array,e=0;n.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.parseId3TagSize=function(t,e){var r=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9],n=t[e+5],i=(16&n)>>4;return i?r+20:r+10},this.parseAdtsSize=function(t,e){var r=(224&t[e+5])>>5,n=t[e+4]<<3,i=6144&t[e+3];return i|n|r},this.push=function(r){var n,i,o,a,s=0,u=0;for(t.length?(a=t.length,t=new Uint8Array(r.byteLength+a),t.set(t.subarray(0,a)),t.set(r,a)):t=r;t.length-u>=3;)if(t[u]!=="I".charCodeAt(0)||t[u+1]!=="D".charCodeAt(0)||t[u+2]!=="3".charCodeAt(0))if(t[u]&!0&&240===(240&t[u+1])){if(t.length-u<7)break;if(s=this.parseAdtsSize(t,u),s>t.length)break;o={type:"audio",data:t.subarray(u,u+s),pts:e,dts:e},this.trigger("data",o),u+=s}else u++;else{if(t.length-u<10)break;if(s=this.parseId3TagSize(t,u),s>t.length)break;i={type:"timed-metadata",data:t.subarray(u,u+s)},this.trigger("data",i),u+=s}n=t.length-u,t=n>0?t.subarray(u):new Uint8Array}},n.prototype=new i,e.exports=n},{"../utils/stream.js":84}],69:[function(t,e,r){"use strict";var n,i=t("../utils/stream.js"),o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];n=function(){var t;n.prototype.init.call(this),this.push=function(e){var r,n,i,a,s,u,l=0,c=0;if("audio"===e.type)for(t?(a=t,t=new Uint8Array(a.byteLength+e.data.byteLength),t.set(a),t.set(e.data,a.byteLength)):t=e.data;l+5<t.length;)if(255===t[l]&&240===(246&t[l+1])){if(n=2*(1&~t[l+1]),r=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,s=1024*((3&t[l+6])+1),u=9e4*s/o[(60&t[l+2])>>>2],i=l+r,t.byteLength<i)return;if(this.trigger("data",{pts:e.pts+c*u,dts:e.dts+c*u,sampleCount:s,audioobjecttype:(t[l+2]>>>6&3)+1,channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:o[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+n,i)}),t.byteLength===i)return void(t=void 0);c++,t=t.subarray(i)}else l++},this.flush=function(){this.trigger("done")}},n.prototype=new i,e.exports=n},{"../utils/stream.js":84}],70:[function(t,e,r){"use strict";var n,i,o,a=t("../utils/stream.js"),s=t("../utils/exp-golomb.js");i=function(){var t,e,r=0;i.prototype.init.call(this),this.push=function(n){var i;for(e?(i=new Uint8Array(e.byteLength+n.data.byteLength),i.set(e),i.set(n.data,e.byteLength),e=i):e=n.data;r<e.byteLength-3;r++)if(1===e[r+2]){t=r+5;break}for(;t<e.byteLength;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}r+3!==t-2&&this.trigger("data",e.subarray(r+3,t-2));do t++;while(1!==e[t]&&t<e.length);r=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(r+3,t-2)),r=t-2,t+=3;break;default:t+=3}e=e.subarray(r),t-=r,r=0},this.flush=function(){e&&e.byteLength>3&&this.trigger("data",e.subarray(r+3)),e=null,r=0,this.trigger("done")}},i.prototype=new a,o={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},n=function(){var t,e,r,a,u,l,c,d=new i;n.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(e=t.trackId,r=t.pts,a=t.dts,d.push(t))},d.on("data",function(n){var i={trackId:e,pts:r,dts:a,data:n};switch(31&n[0]){case 5:i.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:i.nalUnitType="sei_rbsp",i.escapedRBSP=u(n.subarray(1));break;case 7:i.nalUnitType="seq_parameter_set_rbsp",i.escapedRBSP=u(n.subarray(1)),i.config=l(i.escapedRBSP);break;case 8:i.nalUnitType="pic_parameter_set_rbsp";break;case 9:i.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",i)}),d.on("done",function(){t.trigger("done")}),this.flush=function(){d.flush()},c=function(t,e){var r,n,i=8,o=8;for(r=0;t>r;r++)0!==o&&(n=e.readExpGolomb(),o=(i+n+256)%256),i=0===o?i:o},u=function(t){for(var e,r,n=t.byteLength,i=[],o=1;n-2>o;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return t;e=n-i.length,r=new Uint8Array(e);var a=0;for(o=0;e>o;a++,o++)a===i[0]&&(a++,i.shift()),r[o]=t[a];return r},l=function(t){var e,r,n,i,a,u,l,d,f,h,p,g,y,v,m=0,b=0,_=0,T=0,w=1;if(e=new s(t),r=e.readUnsignedByte(),i=e.readUnsignedByte(),n=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),o[r]&&(a=e.readUnsignedExpGolomb(),3===a&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(p=3!==a?8:12,v=0;p>v;v++)e.readBoolean()&&(6>v?c(16,e):c(64,e));if(e.skipUnsignedExpGolomb(),u=e.readUnsignedExpGolomb(),0===u)e.readUnsignedExpGolomb();else if(1===u)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),l=e.readUnsignedExpGolomb(),v=0;l>v;v++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),d=e.readUnsignedExpGolomb(),f=e.readUnsignedExpGolomb(),h=e.readBits(1),0===h&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(m=e.readUnsignedExpGolomb(),b=e.readUnsignedExpGolomb(),_=e.readUnsignedExpGolomb(),T=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(y=e.readUnsignedByte()){case 1:g=[1,1];break;case 2:g=[12,11];break;case 3:g=[10,11];break;case 4:g=[16,11];break;case 5:g=[40,33];break;case 6:g=[24,11];break;case 7:g=[20,11];break;case 8:g=[32,11];break;case 9:g=[80,33];break;case 10:g=[18,11];break;case 11:g=[15,11];break;case 12:g=[64,33];break;case 13:g=[160,99];break;case 14:g=[4,3];break;case 15:g=[3,2];break;case 16:g=[2,1];break;case 255:g=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}g&&(w=g[0]/g[1])}return{profileIdc:r,levelIdc:n,profileCompatibility:i,width:Math.ceil((16*(d+1)-2*m-2*b)*w),height:(2-h)*(f+1)*16-2*_-2*T}}},n.prototype=new a,e.exports={H264Stream:n,NalByteStream:i}},{"../utils/exp-golomb.js":83,"../utils/stream.js":84}],71:[function(t,e,r){"use strict";var n;n=function(t,e){var r,i=0,o=16384,a=function(t,e){var r,n=t.position+e;n<t.bytes.byteLength||(r=new Uint8Array(2*n),r.set(t.bytes.subarray(0,t.position),0),t.bytes=r,t.view=new DataView(t.bytes.buffer))},s=n.widthBytes||new Uint8Array("width".length),u=n.heightBytes||new Uint8Array("height".length),l=n.videocodecidBytes||new Uint8Array("videocodecid".length);if(!n.widthBytes){for(r=0;r<"width".length;r++)s[r]="width".charCodeAt(r);for(r=0;r<"height".length;r++)u[r]="height".charCodeAt(r);for(r=0;r<"videocodecid".length;r++)l[r]="videocodecid".charCodeAt(r);n.widthBytes=s,n.heightBytes=u,n.videocodecidBytes=l}switch(this.keyFrame=!1,t){case n.VIDEO_TAG:this.length=16,o*=6;break;case n.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case n.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(o),this.view=new DataView(this.bytes.buffer),this.bytes[0]=t,this.position=this.length,this.keyFrame=e,this.pts=0,this.dts=0,this.writeBytes=function(t,e,r){var n,i=e||0;r=r||t.byteLength,n=i+r,a(this,r),this.bytes.set(t.subarray(i,n),this.position),this.position+=r,this.length=Math.max(this.length,this.position)},this.writeByte=function(t){a(this,1),this.bytes[this.position]=t,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(t){a(this,2),this.view.setUint16(this.position,t),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(t){return this.bytes[this.length-t]},this.nalUnitSize=function(){return 0===i?0:this.length-(i+4)},this.startNalUnit=function(){if(i>0)throw new Error("Attempted to create new NAL wihout closing the old one");i=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(t){var e,r;this.length===i+4?this.length-=4:i>0&&(e=i+4,r=this.length-e,this.position=i,this.view.setUint32(this.position,r),this.position=this.length,t&&t.push(this.bytes.subarray(e,e+r))),i=0},this.writeMetaDataDouble=function(t,e){var r;if(a(this,2+t.length+9),this.view.setUint16(this.position,t.length),this.position+=2,"width"===t)this.bytes.set(s,this.position),this.position+=5;else if("height"===t)this.bytes.set(u,this.position),this.position+=6;else if("videocodecid"===t)this.bytes.set(l,this.position),this.position+=12;else for(r=0;r<t.length;r++)this.bytes[this.position]=t.charCodeAt(r),this.position++;this.position++,this.view.setFloat64(this.position,e),this.position+=8,this.length=Math.max(this.length,this.position),++i},this.writeMetaDataBoolean=function(t,e){var r;for(a(this,2),this.view.setUint16(this.position,t.length),this.position+=2,r=0;r<t.length;r++)a(this,1),this.bytes[this.position]=t.charCodeAt(r),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,e?1:0),this.position++,this.length=Math.max(this.length,this.position),++i},this.finalize=function(){var t,r;switch(this.bytes[0]){case n.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||e?16:32),this.bytes[12]=e?0:1,t=this.pts-this.dts,this.bytes[13]=(16711680&t)>>>16,this.bytes[14]=(65280&t)>>>8,this.bytes[15]=(255&t)>>>0;break;case n.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=e?0:1;break;case n.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,i),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return r=this.length-11,this.bytes[1]=(16711680&r)>>>16,this.bytes[2]=(65280&r)>>>8,this.bytes[3]=(255&r)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=n.frameTime(this.bytes),this}},n.AUDIO_TAG=8,n.VIDEO_TAG=9,n.METADATA_TAG=18,n.isAudioFrame=function(t){return n.AUDIO_TAG===t[0]},n.isVideoFrame=function(t){return n.VIDEO_TAG===t[0]},n.isMetaData=function(t){return n.METADATA_TAG===t[0]},n.isKeyFrame=function(t){return n.isVideoFrame(t)?23===t[11]:n.isAudioFrame(t)?!0:n.isMetaData(t)?!0:!1},n.frameTime=function(t){var e=t[4]<<16;return e|=t[5]<<8,e|=t[6]<<0,e|=t[7]<<24},e.exports=n},{}],72:[function(t,e,r){e.exports={tag:t("./flv-tag"),Transmuxer:t("./transmuxer")}},{"./flv-tag":71,"./transmuxer":73}],73:[function(t,e,r){"use strict";var n,i,o,a,s,u,l,c=t("../utils/stream.js"),d=t("./flv-tag.js"),f=t("../m2ts/m2ts.js"),h=t("../codecs/adts.js"),p=t("../codecs/h264").H264Stream;s=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts?t.timelineStartInfo.pts=e.pts:t.timelineStartInfo.pts=Math.min(t.timelineStartInfo.pts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts?t.timelineStartInfo.dts=e.dts:t.timelineStartInfo.dts=Math.min(t.timelineStartInfo.dts,e.dts))},u=function(t,e){var r=new d(d.METADATA_TAG);return r.dts=e,r.pts=e,r.writeMetaDataDouble("videocodecid",7),r.writeMetaDataDouble("width",t.width),r.writeMetaDataDouble("height",t.height),r},l=function(t,e){var r,n=new d(d.VIDEO_TAG,!0);for(n.dts=e,n.pts=e,n.writeByte(1),n.writeByte(t.profileIdc),n.writeByte(t.profileCompatibility),n.writeByte(t.levelIdc),n.writeByte(255),n.writeByte(225),n.writeShort(t.sps[0].length),n.writeBytes(t.sps[0]),n.writeByte(t.pps.length),r=0;r<t.pps.length;++r)n.writeShort(t.pps[r].length),n.writeBytes(t.pps[r]);return n},o=function(t){var e,r=[];o.prototype.init.call(this),this.push=function(e){s(t,e),t&&void 0===t.channelcount&&(t.audioobjecttype=e.audioobjecttype,t.channelcount=e.channelcount,t.samplerate=e.samplerate,t.samplingfrequencyindex=e.samplingfrequencyindex,t.samplesize=e.samplesize,t.extraData=t.audioobjecttype<<11|t.samplingfrequencyindex<<7|t.channelcount<<3),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),r.push(e)},this.flush=function(){var n,i,o,a=[];if(0===r.length)return void this.trigger("done");for(o=-(1/0);r.length;)n=r.shift(),(t.extraData!==e||n.pts-o>=1e3)&&(i=new d(d.METADATA_TAG),i.pts=n.pts,i.dts=n.dts,i.writeMetaDataDouble("audiocodecid",10),i.writeMetaDataBoolean("stereo",2===t.channelcount),i.writeMetaDataDouble("audiosamplerate",t.samplerate),i.writeMetaDataDouble("audiosamplesize",16),a.push(i),e=t.extraData,i=new d(d.AUDIO_TAG,!0),i.pts=n.pts,i.dts=n.dts,i.view.setUint16(i.position,t.extraData),i.position+=2,i.length=Math.max(i.length,i.position),a.push(i),o=n.pts),i=new d(d.AUDIO_TAG),i.pts=n.pts,i.dts=n.dts,i.writeBytes(n.data),a.push(i);e=null,this.trigger("data",{track:t,tags:a}),this.trigger("done")}},o.prototype=new c,i=function(t){var e,r,n=[];i.prototype.init.call(this),this.finishFrame=function(n,i){i&&(e&&t&&t.newMetadata&&(i.keyFrame||0===n.length)&&(n.push(u(e,i.dts)),n.push(l(t,i.dts)),t.newMetadata=!1),i.endNalUnit(),n.push(i),r=null)},this.push=function(e){s(t,e),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),n.push(e)},this.flush=function(){for(var i,o=[];n.length&&"access_unit_delimiter_rbsp"!==n[0].nalUnitType;)n.shift();if(0===n.length)return void this.trigger("done");for(;n.length;)i=n.shift(),"seq_parameter_set_rbsp"===i.nalUnitType?(t.newMetadata=!0,e=i.config,t.width=e.width,t.height=e.height,t.sps=[i.data],t.profileIdc=e.profileIdc,t.levelIdc=e.levelIdc,t.profileCompatibility=e.profileCompatibility,r.endNalUnit()):"pic_parameter_set_rbsp"===i.nalUnitType?(t.newMetadata=!0,t.pps=[i.data],r.endNalUnit()):"access_unit_delimiter_rbsp"===i.nalUnitType?(r&&this.finishFrame(o,r),r=new d(d.VIDEO_TAG),r.pts=i.pts,r.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(r.keyFrame=!0),r.endNalUnit()),r.startNalUnit(),r.writeBytes(i.data);r&&this.finishFrame(o,r),this.trigger("data",{track:t,tags:o}),this.trigger("done")}},i.prototype=new c,a=function(t){this.numberOfTracks=0,this.metadataStream=t.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,a.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):("video"===t.track.type&&(this.videoTrack=t.track,this.videoTags=t.tags,this.pendingTracks++),void("audio"===t.track.type&&(this.audioTrack=t.track,this.audioTags=t.tags,this.pendingTracks++)))}},a.prototype=new c,a.prototype.flush=function(){var t,e,r,n,i={tags:{},captions:[],metadata:[]};if(!(this.pendingTracks<this.numberOfTracks)){for(this.videoTrack?n=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(n=this.audioTrack.timelineStartInfo.pts),i.tags.videoTags=this.videoTags,i.tags.audioTags=this.audioTags,r=0;r<this.pendingCaptions.length;r++)e=this.pendingCaptions[r],e.startTime=e.startPts-n,e.startTime/=9e4,e.endTime=e.endPts-n,e.endTime/=9e4,i.captions.push(e);for(r=0;r<this.pendingMetadata.length;r++)t=this.pendingMetadata[r],t.cueTime=t.pts-n,t.cueTime/=9e4,i.metadata.push(t);i.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.trigger("data",i),this.trigger("done")}},n=function(t){var e,r,s,u,l,c,g,y,v,m,b,_,T=this;n.prototype.init.call(this),t=t||{},this.metadataStream=new f.MetadataStream,t.metadataStream=this.metadataStream,e=new f.TransportPacketStream,r=new f.TransportParseStream,s=new f.ElementaryStream,u=new f.TimestampRolloverStream("video"),l=new f.TimestampRolloverStream("audio"),c=new f.TimestampRolloverStream("timed-metadata"),g=new h,y=new p,_=new a(t),e.pipe(r).pipe(s),s.pipe(u).pipe(y),s.pipe(l).pipe(g),s.pipe(c).pipe(this.metadataStream).pipe(_),b=new f.CaptionStream,y.pipe(b).pipe(_),s.on("data",function(t){var e,r,n;if("metadata"===t.type){for(e=t.tracks.length;e--;)"video"===t.tracks[e].type?r=t.tracks[e]:"audio"===t.tracks[e].type&&(n=t.tracks[e]);r&&!v&&(_.numberOfTracks++,v=new i(r),y.pipe(v).pipe(_)),n&&!m&&(_.numberOfTracks++,m=new o(n),g.pipe(m).pipe(_))}}),this.push=function(t){e.push(t)},this.flush=function(){e.flush()},_.on("data",function(t){T.trigger("data",t)}),_.on("done",function(){T.trigger("done")}),this.getFlvHeader=function(t,e,r){var n,i,o,a=new Uint8Array(9),s=new DataView(a.buffer);return t=t||0,e=void 0===e?!0:e,r=void 0===r?!0:r,s.setUint8(0,70),s.setUint8(1,76),s.setUint8(2,86),s.setUint8(3,1),s.setUint8(4,(e?4:0)|(r?1:0)),s.setUint32(5,a.byteLength),0>=t?(i=new Uint8Array(a.byteLength+4),i.set(a),i.set([0,0,0,0],a.byteLength),i):(n=new d(d.METADATA_TAG),n.pts=n.dts=0,n.writeMetaDataDouble("duration",t),o=n.finalize().length,i=new Uint8Array(a.byteLength+o),i.set(a),i.set(s.byteLength,o),i)}},n.prototype=new c,e.exports=n},{"../codecs/adts.js":69,"../codecs/h264":70,"../m2ts/m2ts.js":75,"../utils/stream.js":84,"./flv-tag.js":71}],74:[function(t,e,r){/**
   * mux.js
   *
   * Copyright (c) 2015 Brightcove
   * All rights reserved.
   *
   * Reads in-band caption information from a video elementary
   * stream. Captions must follow the CEA-708 standard for injection
   * into an MPEG-2 transport streams.
   * @see https://en.wikipedia.org/wiki/CEA-708
   */
"use strict";var n=4,i=128,o=t("../utils/stream"),a=function(t){for(var e=0,r={payloadType:-1,payloadSize:0},o=0,a=0;e<t.byteLength&&t[e]!==i;){for(;255===t[e];)o+=255,e++;for(o+=t[e++];255===t[e];)a+=255,e++;if(a+=t[e++],!r.payload&&o===n){r.payloadType=o,r.payloadSize=a,r.payload=t.subarray(e,e+a);break}e+=a,o=0,a=0}return r},s=function(t){return 181!==t.payload[0]?null:49!==(t.payload[1]<<8|t.payload[2])?null:"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])?null:3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},u=function(t,e){var r,n,i,o,a=[];if(!(64&e[0]))return a;for(n=31&e[0],r=0;n>r;r++)i=3*r,o={type:3&e[i+2],pts:t},4&e[i+2]&&(o.ccData=e[i+3]<<8|e[i+4],a.push(o));return a},l=function(){l.prototype.init.call(this),this.captionPackets_=[],this.field1_=new E,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};l.prototype=new o,l.prototype.push=function(t){var e,r;"sei_rbsp"===t.nalUnitType&&(e=a(t.escapedRBSP),e.payloadType===n&&(r=s(e),r&&(this.captionPackets_=this.captionPackets_.concat(u(t.pts,r)))))},l.prototype.flush=function(){return this.captionPackets_.length?(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,void this.field1_.flush()):void this.field1_.flush()};var c={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},d=function(t){return null===t?"":(t=c[t]||t,String.fromCharCode(t))},f=0,h=5152,p=5167,g=5157,y=5158,v=5159,m=5165,b=5153,_=5164,T=5166,w=14,k=function(){for(var t=[],e=w+1;e--;)t.push("");return t},E=function(){E.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=k(),this.nonDisplayed_=k(),this.lastControlCode_=null,this.push=function(t){if(0===t.type){var e,r,n,i;if(e=32639&t.ccData,e===this.lastControlCode_)return void(this.lastControlCode_=null);switch(4096===(61440&e)?this.lastControlCode_=e:this.lastControlCode_=null,e){case f:break;case h:this.mode_="popOn";break;case p:this.flushDisplayed(t.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=t.pts;break;case g:this.topRow_=w-1,this.mode_="rollUp";break;case y:this.topRow_=w-2,this.mode_="rollUp";break;case v:this.topRow_=w-3,this.mode_="rollUp";break;case m:this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;break;case b:"popOn"===this.mode_?this.nonDisplayed_[w]=this.nonDisplayed_[w].slice(0,-1):this.displayed_[w]=this.displayed_[w].slice(0,-1);break;case _:this.flushDisplayed(t.pts),this.displayed_=k();break;case T:this.nonDisplayed_=k();break;default:if(n=e>>>8,i=255&e,n>=16&&23>=n&&i>=64&&127>=i&&(16!==n||96>i)&&(n=32,i=null),(17===n||25===n)&&i>=48&&63>=i&&(n=9834,i=""),16===(240&n))return;this[this.mode_](t.pts,n,i)}}}};E.prototype=new o,E.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){return t.trim()}).filter(function(t){return t.length}).join("\n");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e})},E.prototype.popOn=function(t,e,r){var n=this.nonDisplayed_[w];n+=d(e),n+=d(r),this.nonDisplayed_[w]=n},E.prototype.rollUp=function(t,e,r){var n=this.displayed_[w];""===n&&(this.flushDisplayed(t),this.startPts_=t),n+=d(e),n+=d(r),this.displayed_[w]=n},E.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.topRow_;w>t;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[w]=""},e.exports={CaptionStream:l,Cea608Stream:E}},{"../utils/stream":84}],75:[function(t,e,r){/**
   * mux.js
   *
   * Copyright (c) 2015 Brightcove
   * All rights reserved.
   *
   * A stream-based mp2t to mp4 converter. This utility can be used to
   * deliver mp4s to a SourceBuffer on platforms that support native
   * Media Source Extensions.
   */
"use strict";var n,i,o,a=t("../utils/stream.js"),s=t("./caption-stream"),u=t("./stream-types"),l=t("./timestamp-rollover-stream").TimestampRolloverStream,c=t("./stream-types.js"),d=188,f=71;n=function(){var t=new Uint8Array(d),e=0;n.prototype.init.call(this),this.push=function(r){var n,i=0,o=d;for(e?(n=new Uint8Array(r.byteLength+e),n.set(t.subarray(0,e)),n.set(r,e),e=0):n=r;o<n.byteLength;)n[i]!==f||n[o]!==f?(i++,o++):(this.trigger("data",n.subarray(i,o)),i+=d,o+=d);i<n.byteLength&&(t.set(n.subarray(i),0),e=n.byteLength-i)},this.flush=function(){e===d&&t[0]===f&&(this.trigger("data",t),e=0),this.trigger("done")}},n.prototype=new a,i=function(){var t,e,r,n;i.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,n){var i=0;n.payloadUnitStartIndicator&&(i+=t[i]+1),"pat"===n.type?e(t.subarray(i),n):r(t.subarray(i),n)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],n.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=n.pmtPid},r=function(t,e){var r,i,o,a;if(1&t[5]){for(n.programMapTable={},r=(15&t[1])<<8|t[2],i=3+r-4,o=(15&t[10])<<8|t[11],a=12+o;i>a;)n.programMapTable[(31&t[a+1])<<8|t[a+2]]=t[a],a+=((15&t[a+3])<<8|t[a+4])+5;for(e.programMapTable=n.programMapTable;n.packetsWaitingForPmt.length;)n.processPes_.apply(n,n.packetsWaitingForPmt.shift())}},this.push=function(e){var r={},n=4;r.payloadUnitStartIndicator=!!(64&e[1]),r.pid=31&e[1],r.pid<<=8,r.pid|=e[2],(48&e[3])>>>4>1&&(n+=e[n]+1),0===r.pid?(r.type="pat",t(e.subarray(n),r),this.trigger("data",r)):r.pid===this.pmtPid?(r.type="pmt",t(e.subarray(n),r),this.trigger("data",r)):void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,r]):this.processPes_(e,n,r)},this.processPes_=function(t,e,r){r.streamType=this.programMapTable[r.pid],r.type="pes",r.data=t.subarray(e),this.trigger("data",r)}},i.prototype=new a,i.STREAM_TYPES={h264:27,adts:15},o=function(){var t=this,e={data:[],size:0},r={data:[],size:0},n={data:[],size:0},i=function(t,e){var r;e.dataAlignmentIndicator=0!==(4&t[6]),r=t[7],192&r&&(e.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,e.pts*=4,e.pts+=(6&t[13])>>>1,e.dts=e.pts,64&r&&(e.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,e.dts*=4,e.dts+=(6&t[18])>>>1)),e.data=t.subarray(9+t[8])},a=function(e,r){var n,o=new Uint8Array(e.size),a={type:r},s=0;if(e.data.length){for(a.trackId=e.data[0].pid;e.data.length;)n=e.data.shift(),o.set(n.data,s),s+=n.data.byteLength;i(o,a),e.size=0,t.trigger("data",a)}};o.prototype.init.call(this),this.push=function(i){({pat:function(){},pes:function(){var t,o;switch(i.streamType){case u.H264_STREAM_TYPE:case c.H264_STREAM_TYPE:t=e,o="video";break;case u.ADTS_STREAM_TYPE:t=r,o="audio";break;case u.METADATA_STREAM_TYPE:t=n,o="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&a(t,o),t.data.push(i),t.size+=i.data.byteLength},pmt:function(){var e,r,n={type:"metadata",tracks:[]},o=i.programMapTable;for(e in o)o.hasOwnProperty(e)&&(r={timelineStartInfo:{baseMediaDecodeTime:0}},r.id=+e,o[e]===c.H264_STREAM_TYPE?(r.codec="avc",r.type="video"):o[e]===c.ADTS_STREAM_TYPE&&(r.codec="adts",r.type="audio"),n.tracks.push(r));t.trigger("data",n)}})[i.type]()},this.flush=function(){a(e,"video"),a(r,"audio"),a(n,"timed-metadata"),this.trigger("done")}},o.prototype=new a;var h={PAT_PID:0,MP2T_PACKET_LENGTH:d,TransportPacketStream:n,TransportParseStream:i,ElementaryStream:o,TimestampRolloverStream:l,CaptionStream:s.CaptionStream,Cea608Stream:s.Cea608Stream,MetadataStream:t("./metadata-stream")};for(var p in u)u.hasOwnProperty(p)&&(h[p]=u[p]);e.exports=h},{"../utils/stream.js":84,"./caption-stream":74,"./metadata-stream":76,"./stream-types":77,"./stream-types.js":77,"./timestamp-rollover-stream":78}],76:[function(t,e,r){"use strict";var n,i=t("../utils/stream"),o=t("./stream-types"),a=function(t,e,r){var n,i="";for(n=e;r>n;n++)i+="%"+("00"+t[n].toString(16)).slice(-2);return i},s=function(t,e,r){return decodeURIComponent(a(t,e,r))},u=function(t,e,r){return unescape(a(t,e,r))},l=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},c={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=s(t.data,1,e),t.value=s(t.data,e+1,t.data.length-1);break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=s(t.data,1,e),t.url=s(t.data,e+1,t.data.length);break}},PRIV:function(t){var e;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=u(t.data,0,e);break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};n=function(t){var e,r={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},i=0,a=[],s=0;if(n.prototype.init.call(this),this.dispatchType=o.METADATA_STREAM_TYPE.toString(16),r.descriptor)for(e=0;e<r.descriptor.length;e++)this.dispatchType+=("00"+r.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,n,o,u,d,f;if("timed-metadata"===t.type){if(t.dataAlignmentIndicator&&(s=0,a.length=0),0===a.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))return void(r.debug&&console.log("Skipping unrecognized metadata packet"));if(a.push(t),s+=t.data.byteLength,1===a.length&&(i=l(t.data.subarray(6,10)),i+=10),!(i>s)){for(e={data:new Uint8Array(i),frames:[],pts:a[0].pts,dts:a[0].dts},d=0;i>d;)e.data.set(a[0].data.subarray(0,i-d),d),d+=a[0].data.byteLength,s-=a[0].data.byteLength,a.shift();n=10,64&e.data[5]&&(n+=4,n+=l(e.data.subarray(10,14)),i-=l(e.data.subarray(16,20)));do{if(o=l(e.data.subarray(n+4,n+8)),1>o)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(f=String.fromCharCode(e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]),u={id:f,data:e.data.subarray(n+10,n+o+10)},u.key=u.id,c[u.id]&&(c[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var h=u.data,p=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;p*=4,p+=3&h[7],u.timeStamp=p,void 0===e.pts&&void 0===e.dts&&(e.pts=u.timeStamp,e.dts=u.timeStamp),this.trigger("timestamp",u)}e.frames.push(u),n+=10,n+=o}while(i>n);this.trigger("data",e)}}}},n.prototype=new i,e.exports=n},{"../utils/stream":84,"./stream-types":77}],77:[function(t,e,r){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],78:[function(t,e,r){/**
   * mux.js
   *
   * Copyright (c) 2016 Brightcove
   * All rights reserved.
   *
   * Accepts program elementary stream (PES) data events and corrects
   * decode and presentation time stamps to account for a rollover
   * of the 33 bit value.
   */
"use strict";var n=t("../utils/stream"),i=8589934592,o=4294967296,a=function(t,e){var r=1;for(t>e&&(r=-1);Math.abs(e-t)>o;)t+=r*i;return t},s=function(t){var e,r;s.prototype.init.call(this),this.type_=t,this.push=function(t){t.type===this.type_&&(void 0===r&&(r=t.dts),t.dts=a(t.dts,r),t.pts=a(t.pts,r),e=t.dts,this.trigger("data",t))},this.flush=function(){r=e,this.trigger("done")}};s.prototype=new n,e.exports={TimestampRolloverStream:s,handleRollover:a}},{"../utils/stream":84}],79:[function(t,e,r){e.exports={generator:t("./mp4-generator"),Transmuxer:t("./transmuxer").Transmuxer,AudioSegmentStream:t("./transmuxer").AudioSegmentStream,VideoSegmentStream:t("./transmuxer").VideoSegmentStream}},{"./mp4-generator":80,"./transmuxer":82}],80:[function(t,e,r){/**
   * mux.js
   *
   * Copyright (c) 2015 Brightcove
   * All rights reserved.
   *
   * Functions that generate fragmented MP4s suitable for use with Media
   * Source Extensions.
   */
"use strict";var n,i,o,a,s,u,l,c,d,f,h,p,g,y,v,m,b,_,T,w,k,E,S,O,j,C,x,A,P,L,R,D,M,I,N,F,U=Math.pow(2,32)-1;!function(){var t;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in S)S.hasOwnProperty(t)&&(S[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);O=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),j=new Uint8Array([0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),P={video:x,audio:A},D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),R=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),I=M,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),F=M,L=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),n=function(t){var e,r,n,i=[],o=0;for(e=1;e<arguments.length;e++)i.push(arguments[e]);for(e=i.length;e--;)o+=i[e].byteLength;for(r=new Uint8Array(o+8),n=new DataView(r.buffer,r.byteOffset,r.byteLength),n.setUint32(0,r.byteLength),r.set(t,4),e=0,o=8;e<i.length;e++)r.set(i[e],o),o+=i[e].byteLength;return r},i=function(){return n(S.dinf,n(S.dref,D))},o=function(t){return n(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},a=function(){return n(S.ftyp,O,j,O,C)},m=function(t){return n(S.hdlr,P[t])},s=function(t){return n(S.mdat,t)},v=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),n(S.mdhd,e)},y=function(t){return n(S.mdia,v(t),m(t.type),l(t))},u=function(t){return n(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},l=function(t){return n(S.minf,"video"===t.type?n(S.vmhd,L):n(S.smhd,R),i(),_(t))},c=function(t,e){for(var r=[],i=e.length;i--;)r[i]=w(e[i]);return n.apply(null,[S.moof,u(t)].concat(r))},d=function(t){for(var e=t.length,r=[];e--;)r[e]=p(t[e]);return n.apply(null,[S.moov,h(4294967295)].concat(r).concat(f(t)))},f=function(t){for(var e=t.length,r=[];e--;)r[e]=k(t[e]);return n.apply(null,[S.mvex].concat(r))},h=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(S.mvhd,e)},b=function(t){var e,r,i=t.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)e=i[r].flags,o[r+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return n(S.sdtp,o)},_=function(t){return n(S.stbl,T(t),n(S.stts,F),n(S.stsc,I),n(S.stsz,N),n(S.stco,M))},function(){var t,e;T=function(r){return n(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===r.type?t(r):e(r))},t=function(t){var e,r=t.sps||[],i=t.pps||[],o=[],a=[];for(e=0;e<r.length;e++)o.push((65280&r[e].byteLength)>>>8),o.push(255&r[e].byteLength),o=o.concat(Array.prototype.slice.call(r[e]));for(e=0;e<i.length;e++)a.push((65280&i[e].byteLength)>>>8),a.push(255&i[e].byteLength),a=a.concat(Array.prototype.slice.call(i[e]));return n(S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(S.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([r.length]).concat(o).concat([i.length]).concat(a))),n(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},e=function(t){return n(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),o(t))}}(),g=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return n(S.tkhd,e)},w=function(t){var e,r,i,o,a,s,u;return e=n(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(t.baseMediaDecodeTime/(U+1)),u=Math.floor(t.baseMediaDecodeTime%(U+1)),r=n(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,u>>>24&255,u>>>16&255,u>>>8&255,255&u])),a=92,"audio"===t.type?(i=E(t,a),n(S.traf,e,r,i)):(o=b(t),i=E(t,o.length+a),n(S.traf,e,r,i,o))},p=function(t){return t.duration=t.duration||4294967295,n(S.trak,g(t),y(t))},k=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),n(S.trex,e)},function(){var t,e,r;r=function(t,e){var r=0,n=0,i=0,o=0;return t.length&&(void 0!==t[0].duration&&(r=1),void 0!==t[0].size&&(n=2),void 0!==t[0].flags&&(i=4),void 0!==t[0].compositionTimeOffset&&(o=8)),[0,0,r|n|i|o,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},e=function(t,e){var i,o,a,s;for(o=t.samples||[],e+=20+16*o.length,i=r(o,e),s=0;s<o.length;s++)a=o[s],i=i.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return n(S.trun,new Uint8Array(i))},t=function(t,e){var i,o,a,s;for(o=t.samples||[],e+=20+8*o.length,i=r(o,e),s=0;s<o.length;s++)a=o[s],i=i.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return n(S.trun,new Uint8Array(i))},E=function(r,n){return"audio"===r.type?t(r,n):e(r,n)}}(),e.exports={ftyp:a,mdat:s,moof:c,moov:d,initSegment:function(t){var e,r=a(),n=d(t);return e=new Uint8Array(r.byteLength+n.byteLength),e.set(r),e.set(n,r.byteLength),e}}},{}],81:[function(t,e,r){/**
   * mux.js
   *
   * Copyright (c) 2015 Brightcove
   * All rights reserved.
   *
   * Utilities to detect basic properties and metadata about MP4s.
   */
"use strict";var n,i,o,a;n=function(t,e){var r,o,a,s,u,l=[];if(!e.length)return null;for(r=0;r<t.byteLength;)o=t[r]<<24,o|=t[r+1]<<16,o|=t[r+2]<<8,o|=t[r+3],a=i(t.subarray(r+4,r+8)),s=o>1?r+o:t.byteLength,a===e[0]&&(1===e.length?l.push(t.subarray(r+8,s)):(u=n(t.subarray(r+8,s),e.slice(1)),u.length&&(l=l.concat(u)))),r=s;return l},i=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3])},o=function(t){var e={},r=n(t,["moov","trak"]);return r.reduce(function(t,e){var r,i,o,a,s;return(r=n(e,["tkhd"])[0])?(i=r[0],o=0===i?12:20,a=r[o]<<24|r[o+1]<<16|r[o+2]<<8|r[o+3],(s=n(e,["mdia","mdhd"])[0])?(i=s[0],o=0===i?12:20,t[a]=s[o]<<24|s[o+1]<<16|s[o+2]<<8|s[o+3],t):null):null},e)},a=function(t,e){var r,i,o;return r=n(e,["moof","traf"]),i=[].concat.apply([],r.map(function(e){return n(e,["tfhd"]).map(function(r){var i,o,a;return i=r[4]<<24|r[5]<<16|r[6]<<8|r[7],o=t[i]||9e4,a=n(e,["tfdt"]).map(function(t){var e,r;return e=t[0],r=t[4]<<24|t[5]<<16|t[6]<<8|t[7],1===e&&(r*=Math.pow(2,32),r+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]),r})[0],a=a||1/0,a/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0},e.exports={parseType:i,timescale:o,startTime:a}},{}],82:[function(t,e,r){/**
   * mux.js
   *
   * Copyright (c) 2015 Brightcove
   * All rights reserved.
   *
   * A stream-based mp2t to mp4 converter. This utility can be used to
   * deliver mp4s to a SourceBuffer on platforms that support native
   * Media Source Extensions.
   */
"use strict";var n,i,o,a,s,u,l,c,d,f,h,p=t("../utils/stream.js"),g=t("./mp4-generator.js"),y=t("../m2ts/m2ts.js"),v=t("../codecs/adts.js"),m=t("../codecs/h264").H264Stream,b=t("../aac"),_=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],T=["width","height","profileIdc","levelIdc","profileCompatibility"];s=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},u=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)?!0:!1},f=function(t,e){var r;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},h=function(t){var e,r,n=0;for(e=0;e<t.length;e++)r=t[e],n+=r.data.byteLength;return n},i=function(t){var e=[],r=0,n=0;i.prototype.init.call(this),this.push=function(r){l(t,r),t&&_.forEach(function(e){t[e]=r[e]}),e.push(r)},this.setEarliestDts=function(e){n=e-t.timelineStartInfo.baseMediaDecodeTime},this.flush=function(){var n,i,o,a;return 0===e.length?void this.trigger("done","AudioSegmentStream"):(n=this.trimAdtsFramesByEarliestDts_(e),t.samples=this.generateSampleTable_(n),o=g.mdat(this.concatenateFrameData_(n)),e=[],d(t),i=g.moof(r,[t]),a=new Uint8Array(i.byteLength+o.byteLength),r++,a.set(i),a.set(o,i.byteLength),c(t),this.trigger("data",{track:t,boxes:a}),void this.trigger("done","AudioSegmentStream"))},this.trimAdtsFramesByEarliestDts_=function(e){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n?(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0):!1}))},this.generateSampleTable_=function(t){var e,r,n=[];for(e=0;e<t.length;e++)r=t[e],n.push({size:r.data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(t){var e,r,n=0,i=new Uint8Array(h(t));for(e=0;e<t.length;e++)r=t[e],i.set(r.data,n),n+=r.data.byteLength;return i}},i.prototype=new p,n=function(t){var e,r,i=0,o=[];n.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(n){l(t,n),"seq_parameter_set_rbsp"!==n.nalUnitType||e||(e=n.config,t.sps=[n.data],T.forEach(function(r){t[r]=e[r]},this)),"pic_parameter_set_rbsp"!==n.nalUnitType||r||(r=n.data,t.pps=[n.data]),o.push(n)},this.flush=function(){for(var e,r,n,a,s,u;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();return 0===o.length?(this.resetStream_(),void this.trigger("done","VideoSegmentStream")):(e=this.groupNalsIntoFrames_(o),n=this.groupFramesIntoGops_(e),n[0][0].keyFrame||(r=this.getGopForFusion_(o[0],t),r?(n.unshift(r),n.byteLength+=r.byteLength,n.nalCount+=r.nalCount,n.pts=r.pts,n.dts=r.dts,n.duration+=r.duration):n=this.extendFirstKeyFrame_(n)),l(t,n),t.samples=this.generateSampleTable_(n),s=g.mdat(this.concatenateNalData_(n)),this.gopCache_.unshift({gop:n.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],d(t),this.trigger("timelineStartInfo",t.timelineStartInfo),a=g.moof(i,[t]),u=new Uint8Array(a.byteLength+s.byteLength),i++,u.set(a),u.set(s,a.byteLength),this.trigger("data",{track:t,boxes:u}),this.resetStream_(),void this.trigger("done","VideoSegmentStream"))},this.resetStream_=function(){c(t),e=void 0,r=void 0},this.getGopForFusion_=function(e){var r,n,i,o,a,s=45e3,u=1e4,l=1/0;for(a=0;a<this.gopCache_.length;a++)o=this.gopCache_[a],i=o.gop,t.pps&&f(t.pps[0],o.pps[0])&&t.sps&&f(t.sps[0],o.sps[0])&&(i.dts<t.timelineStartInfo.dts||(r=e.dts-i.dts-i.duration,r>=-u&&s>=r&&(!n||l>r)&&(n=o,l=r)));return n?n.gop:null},this.extendFirstKeyFrame_=function(t){var e;return t[0][0].keyFrame||(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},this.groupNalsIntoFrames_=function(t){var e,r,n=[],i=[];for(n.byteLength=0,e=0;e<t.length;e++)r=t[e],"access_unit_delimiter_rbsp"===r.nalUnitType?(n.length&&(n.duration=r.dts-n.dts,i.push(n)),n=[r],n.byteLength=r.data.byteLength,n.pts=r.pts,n.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(n.keyFrame=!0),n.duration=r.dts-n.dts,n.byteLength+=r.data.byteLength,n.push(r));return i.length&&(!n.duration||n.duration<=0)&&(n.duration=i[i.length-1].duration),i.push(n),i},this.groupFramesIntoGops_=function(t){var e,r,n=[],i=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=t[0].pts,n.dts=t[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=t[0].pts,i.dts=t[0].dts,e=0;e<t.length;e++)r=t[e],r.keyFrame?(n.length&&(i.push(n),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.duration+=n.duration),n=[r],n.nalCount=r.length,n.byteLength=r.byteLength,n.pts=r.pts,n.dts=r.dts,n.duration=r.duration):(n.duration+=r.duration,n.nalCount+=r.length,n.byteLength+=r.byteLength,n.push(r));return i.length&&n.duration<=0&&(n.duration=i[i.length-1].duration),i.byteLength+=n.byteLength,i.nalCount+=n.nalCount,i.duration+=n.duration,i.push(n),i},this.generateSampleTable_=function(t,e){var r,n,i,o,a,u=e||0,l=[];for(r=0;r<t.length;r++)for(o=t[r],n=0;n<o.length;n++)a=o[n],i=s(),i.dataOffset=u,i.compositionTimeOffset=a.pts-a.dts,i.duration=a.duration,i.size=4*a.length,i.size+=a.byteLength,a.keyFrame&&(i.flags.dependsOn=2),u+=i.size,l.push(i);return l},this.concatenateNalData_=function(t){var e,r,n,i,o,a,s=0,u=t.byteLength,l=t.nalCount,c=u+4*l,d=new Uint8Array(c),f=new DataView(d.buffer);for(e=0;e<t.length;e++)for(i=t[e],r=0;r<i.length;r++)for(o=i[r],n=0;n<o.length;n++)a=o[n],f.setUint32(s,a.data.byteLength),s+=4,d.set(a.data,s),s+=a.data.byteLength;return d}},n.prototype=new p,l=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},c=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},d=function(t){var e,r=9e4,n=t.minSegmentDts-t.timelineStartInfo.dts,i=t.minSegmentPts-t.minSegmentDts;t.baseMediaDecodeTime=t.timelineStartInfo.baseMediaDecodeTime,t.baseMediaDecodeTime+=n,t.baseMediaDecodeTime-=i,t.baseMediaDecodeTime=Math.max(0,t.baseMediaDecodeTime),"audio"===t.type&&(e=t.samplerate/r,t.baseMediaDecodeTime*=e,t.baseMediaDecodeTime=Math.floor(t.baseMediaDecodeTime))},a=function(t,e){this.numberOfTracks=0,this.metadataStream=e,"undefined"!=typeof t.remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,a.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}},a.prototype=new p,a.prototype.flush=function(t){var e,r,n,i,o=0,a={captions:[],metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,T.forEach(function(t){a.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,_.forEach(function(t){a.info[t]=this.audioTrack[t]},this)),1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,n=g.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(n.byteLength),a.initSegment.set(n),a.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)a.data.set(this.pendingBoxes[i],o),o+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)e=this.pendingCaptions[i],e.startTime=e.startPts-s,e.startTime/=9e4,e.endTime=e.endPts-s,e.endTime/=9e4,a.captions.push(e);for(i=0;i<this.pendingMetadata.length;i++)r=this.pendingMetadata[i],r.cueTime=r.pts-s,r.cueTime/=9e4,a.metadata.push(r);a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},o=function(t){var e,r,s=this,l=!0;o.prototype.init.call(this),t=t||{},this.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="aac",e.metadataStream=new y.MetadataStream,e.aacStream=new b,e.audioTimestampRolloverStream=new y.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new y.TimestampRolloverStream("timed-metadata"),e.adtsStream=new v,e.coalesceStream=new a(t,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(t){"timed-metadata"!==t.type||e.audioSegmentStream||(r=r||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new i(r),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var o={};this.transmuxPipeline_=o,o.type="ts",o.metadataStream=new y.MetadataStream,o.packetStream=new y.TransportPacketStream,o.parseStream=new y.TransportParseStream,o.elementaryStream=new y.ElementaryStream,o.videoTimestampRolloverStream=new y.TimestampRolloverStream("video"),o.audioTimestampRolloverStream=new y.TimestampRolloverStream("audio"),o.timedMetadataTimestampRolloverStream=new y.TimestampRolloverStream("timed-metadata"),o.adtsStream=new v,o.h264Stream=new m,o.captionStream=new y.CaptionStream,o.coalesceStream=new a(t,o.metadataStream),o.headOfPipeline=o.packetStream,o.packetStream.pipe(o.parseStream).pipe(o.elementaryStream),o.elementaryStream.pipe(o.videoTimestampRolloverStream).pipe(o.h264Stream),o.elementaryStream.pipe(o.audioTimestampRolloverStream).pipe(o.adtsStream),o.elementaryStream.pipe(o.timedMetadataTimestampRolloverStream).pipe(o.metadataStream).pipe(o.coalesceStream),o.h264Stream.pipe(o.captionStream).pipe(o.coalesceStream),o.elementaryStream.on("data",function(t){var a;if("metadata"===t.type){for(a=t.tracks.length;a--;)e||"video"!==t.tracks[a].type?r||"audio"!==t.tracks[a].type||(r=t.tracks[a],r.timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(e=t.tracks[a],e.timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime);e&&!o.videoSegmentStream&&(o.coalesceStream.numberOfTracks++,o.videoSegmentStream=new n(e),o.videoSegmentStream.on("timelineStartInfo",function(t){r&&(r.timelineStartInfo=t,o.audioSegmentStream.setEarliestDts(t.dts))}),o.h264Stream.pipe(o.videoSegmentStream).pipe(o.coalesceStream)),r&&!o.audioSegmentStream&&(o.coalesceStream.numberOfTracks++,o.audioSegmentStream=new i(r),o.adtsStream.pipe(o.audioSegmentStream).pipe(o.coalesceStream))}}),o.coalesceStream.on("data",this.trigger.bind(this,"data")),o.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var n=this.transmuxPipeline_;this.baseMediaDecodeTime=t,r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,c(r),r.timelineStartInfo.baseMediaDecodeTime=t),e&&(n.videoSegmentStream&&(n.videoSegmentStream.gopCache_=[]),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,c(e),e.timelineStartInfo.baseMediaDecodeTime=t)},this.push=function(t){if(l){var e=u(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),l=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){l=!0,this.transmuxPipeline_.headOfPipeline.flush()}},o.prototype=new p,e.exports={Transmuxer:o,VideoSegmentStream:n,AudioSegmentStream:i,AUDIO_PROPERTIES:_,VIDEO_PROPERTIES:T}},{"../aac":68,"../codecs/adts.js":69,"../codecs/h264":70,"../m2ts/m2ts.js":75,"../utils/stream.js":84,"./mp4-generator.js":80}],83:[function(t,e,r){"use strict";var n;n=function(t){var e=t.byteLength,r=0,n=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+n},this.loadWord=function(){var i=t.byteLength-e,o=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");o.set(t.subarray(i,i+a)),r=new DataView(o.buffer).getUint32(0),n=8*a,e-=a},this.skipBits=function(t){var i;n>t?(r<<=t,n-=t):(t-=n,i=Math.floor(t/8),t-=8*i,e-=i,this.loadWord(),r<<=t,n-=t)},this.readBits=function(t){var i=Math.min(n,t),o=r>>>32-i;return n-=i,n>0?r<<=i:e>0&&this.loadWord(),i=t-i,i>0?o<<i|this.readBits(i):o},this.skipLeadingZeros=function(){var t;for(t=0;n>t;++t)if(0!==(r&2147483648>>>t))return r<<=t,n-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},e.exports=n},{}],84:[function(t,e,r){/**
   * mux.js
   *
   * Copyright (c) 2014 Brightcove
   * All rights reserved.
   *
   * A lightweight readable stream implemention that handles event dispatching.
   * Objects that inherit from streams should call init in their constructors.
   */
"use strict";var n=function(){this.init=function(){var t={};this.on=function(e,r){t[e]||(t[e]=[]),t[e]=t[e].concat(r)},this.off=function(e,r){var n;return t[e]?(n=t[e].indexOf(r),t[e]=t[e].slice(),t[e].splice(n,1),n>-1):!1},this.trigger=function(e){var r,n,i,o;if(r=t[e])if(2===arguments.length)for(i=r.length,n=0;i>n;++n)r[n].call(this,arguments[1]);else{for(o=[],n=arguments.length,n=1;n<arguments.length;++n)o.push(arguments[n]);for(i=r.length,n=0;i>n;++n)r[n].apply(this,o)}},this.dispose=function(){t={}}}};n.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},n.prototype.push=function(t){this.trigger("data",t)},n.prototype.flush=function(t){this.trigger("done",t)},e.exports=n},{}],85:[function(e,r,n){!function(e){var i={buildAbsoluteURL:function(t,e){if(e=e.trim(),/^[a-z]+:/i.test(e))return e;var r=null,n=null,o=/^([^#]*)(.*)$/.exec(e);o&&(n=o[2],e=o[1]);var a=/^([^\?]*)(.*)$/.exec(e);a&&(r=a[2],e=a[1]);var s=/^([^#]*)(.*)$/.exec(t);s&&(t=s[1]);var u=/^([^\?]*)(.*)$/.exec(t);u&&(t=u[1]);var l=/^(([a-z]+:)?\/\/[a-z0-9\.\-_~]+(:[0-9]+)?)?(\/.*)$/i.exec(t);if(!l)throw new Error("Error trying to parse base URL.");var c=l[2]||"",d=l[1]||"",f=l[4],h=null;return h=/^\/\//.test(e)?c+"//"+i.buildAbsolutePath("",e.substring(2)):/^\//.test(e)?d+"/"+i.buildAbsolutePath("",e.substring(1)):i.buildAbsolutePath(d+f,e),r&&(h+=r),n&&(h+=n),h},buildAbsolutePath:function(t,e){for(var r,n,i=e,o="",a=t.replace(/[^\/]*$/,i.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;n=a.indexOf("/../",s),n>-1;s=n+r)r=/^\/(?:\.\.\/)*/.exec(a.slice(n))[0].length,o=(o+a.substring(s,n)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(r-1)/3+"}$"),"/");return o+a.substr(s)}};"object"==typeof n&&"object"==typeof r?r.exports=i:"function"==typeof t&&t.amd?t([],function(){return i}):"object"==typeof n?n.URLToolkit=i:e.URLToolkit=i}(this)},{}],86:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var o=t("global/window"),a=i(o),s="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,u=i(s),l=function(t){Object.defineProperties(t.frame,{id:{get:function(){return u["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return u["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return u["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},c=function(t){var e=void 0;return e=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t},d=function(t,e,r){var n=a["default"].WebKitDataCue||a["default"].VTTCue;if(e&&e.forEach(function(t){this.inbandTextTrack_.addCue(new n(t.startTime+this.timestampOffset,t.endTime+this.timestampOffset,t.text))},t),r){var i=c(t.mediaSource_.duration);if(r.forEach(function(t){var e=t.cueTime+this.timestampOffset;t.frames.forEach(function(t){var r=new n(e,e,t.value||t.url||t.data||"");r.frame=t,r.value=t,l(r),this.metadataTrack_.addCue(r)},this)},t),t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){for(var o=t.metadataTrack_.cues,s=[],u=0;u<o.length;u++)s.push(o[u]);s.sort(function(t,e){return t.startTime-e.startTime});for(var d=0;d<s.length-1;d++)s[d].endTime!==s[d+1].startTime&&(s[d].endTime=s[d+1].startTime);s[s.length-1].endTime=i}}};r["default"]={addTextTrackData:d,durationOfVideo:c},e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":26}],87:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t){return/mp4a\.\d+.\d+/i.test(t)},i=function(t){return/avc1\.[\da-f]+/i.test(t)},o=function(t){var e={type:"",parameters:{}},r=t.trim().split(";");return e.type=r.shift().trim(),r.forEach(function(t){var r=t.trim().split("=");if(r.length>1){var n=r[0].replace(/"/g,"").trim(),i=r[1].replace(/"/g,"").trim();e.parameters[n]=i}}),e};r["default"]={isAudioCodec:n,parseContentType:o,isVideoCodec:i},e.exports=r["default"]},{}],88:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e,r){r.captions&&r.captions.length&&!t.inbandTextTrack_&&(t.inbandTextTrack_=e.player_.addTextTrack("captions","cc1")),r.metadata&&r.metadata.length&&!t.metadataTrack_&&(t.metadataTrack_=e.player_.addTextTrack("metadata","Timed Metadata"),t.metadataTrack_.inBandMetadataTrackDispatchType=r.metadata.dispatchType)};r["default"]=n,e.exports=r["default"]},{}],89:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={TIME_BETWEEN_CHUNKS:4,BYTES_PER_CHUNK:4096};r["default"]=n,e.exports=r["default"]},{}],90:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},l=t("global/document"),c=i(l),d="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,f=i(d),h=t("./flash-source-buffer"),p=i(h),g=t("./flash-constants"),y=i(g),v=t("./codec-utils"),m=function(t){function e(){var t=this;o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(e){t.swfObj=c["default"].getElementById(e.swfId),t.player_=(0,f["default"])(t.swfObj.parentNode),t.tech_=t.swfObj.tech,t.readyState="open",t.tech_.on("seeking",function(){for(var e=t.sourceBuffers.length;e--;)t.sourceBuffers[e].abort()}),t.swfObj&&t.swfObj.vjs_load()})}return a(e,t),s(e,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(t){var e=(0,v.parseContentType)(t),r=void 0;if("video/mp2t"!==e.type)throw new Error("NotSupportedError (Video.js)");return r=new p["default"](this),this.sourceBuffers.push(r),r}},{key:"endOfStream",value:function(t){"network"===t?this.tech_.error(2):"decode"===t&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),e}(f["default"].EventTarget);r["default"]=m;try{Object.defineProperty(m.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(t){var e=void 0,r=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",t),r>t)for(e=0;e<this.sourceBuffers.length;e++)this.sourceBuffers[e].remove(t,r);return t}})}catch(b){m.prototype.duration=NaN}for(var _ in y["default"])m[_]=y["default"][_];e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./codec-utils":87,"./flash-constants":89,"./flash-source-buffer":91,"global/document":25}],91:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},l=t("global/window"),c=i(l),d="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,f=i(d),h=t("mux.js/lib/flv"),p=i(h),g=t("./remove-cues-from-track"),y=i(g),v=t("./create-text-tracks-if-necessary"),m=i(v),b=t("./add-text-track-data"),_=t("./flash-constants"),T=i(_),w=function(t){c["default"].setTimeout(t,T["default"].TIME_BETWEEN_CHUNKS)},k=function(t,e){("number"!=typeof e||0>e)&&(e=0);var r=Math.pow(10,e);return Math.round(t*r)/r},E=function(t){function e(t){var r=this;o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var n=void 0;this.chunkSize_=T["default"].BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource_=t,this.updating=!1,this.timestampOffset_=0,this.segmentParser_=new p["default"].Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),n=c["default"].btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(this.segmentParser_.getFlvHeader()))),this.mediaSource_.swfObj.vjs_appendBuffer(n),this.one("updateend",function(){r.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&t>=0&&(this.timestampOffset_=t,this.segmentParser_=new p["default"].Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN)}}),Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return f["default"].createTimeRange();var t=this.mediaSource_.swfObj.vjs_getProperty("buffered");return t&&t.length&&(t[0][0]=k(t[0][0],3),t[0][1]=k(t[0][1],3)),f["default"].createTimeRanges(t)}}),this.mediaSource_.player_.on("seeked",function(){(0,y["default"])(0,1/0,r.metadataTrack_),(0,y["default"])(0,1/0,r.inbandTextTrack_)})}return a(e,t),s(e,[{key:"appendBuffer",value:function(t){var e=this,r=void 0,n=524288,i=0;if(this.updating)throw r=new Error("SourceBuffer.append() cannot be called while an update is in progress"),r.name="InvalidStateError",r.code=11,r;this.updating=!0,this.mediaSource_.readyState="open",this.trigger({type:"update"});var o=function a(){e.segmentParser_.push(t.subarray(i,i+n)),i+=n,w(i<t.byteLength?a:e.segmentParser_.flush.bind(e.segmentParser_))};o()}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource_.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(t,e){(0,y["default"])(t,e,this.metadataTrack_),(0,y["default"])(t,e,this.inbandTextTrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(t){var e=this;(0,m["default"])(this,this.mediaSource_,t),(0,b.addTextTrackData)(this,t.captions,t.metadata),w(function(){var r=e.convertTagsToData_(t);0===e.buffer_.length&&w(e.processBuffer_.bind(e)),r&&(e.buffer_.push(r),e.bufferSize_+=r.byteLength)})}},{key:"processBuffer_",value:function(){var t=T["default"].BYTES_PER_CHUNK;if(!this.buffer_.length)return void(this.updating!==!1&&(this.updating=!1,this.trigger({type:"updateend"})));var e=this.buffer_[0].subarray(0,t);e.byteLength<t||this.buffer_[0].byteLength===t?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(t),this.bufferSize_-=e.byteLength;for(var r="",n=e.byteLength,i=0;n>i;i++)r+=String.fromCharCode(e[i]);var o=c["default"].btoa(r);this.mediaSource_.swfObj.CallFunction('<invoke name="vjs_appendBuffer"returntype="javascript"><arguments><string>'+o+"</string></arguments></invoke>"),0!==this.bufferSize_?w(this.processBuffer_.bind(this)):(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(t){var e=0,r=this.mediaSource_.tech_,n=0,i=void 0,o=void 0,a=void 0,s=[],u=this.getOrderedTags_(t);for(isNaN(this.basePtsOffset_)&&u.length&&(this.basePtsOffset_=u[0].pts),r.seeking()&&(n=Math.max(n,r.currentTime()-this.timestampOffset)),n*=1e3,n+=this.basePtsOffset_,i=0;i<u.length;i++)u[i].pts>=n&&s.push(u[i]);if(0!==s.length){for(i=0;i<s.length;i++)e+=s[i].bytes.byteLength;for(a=new Uint8Array(e),i=0,o=0;i<s.length;i++)a.set(s[i].bytes,o),o+=s[i].bytes.byteLength;return a}}},{key:"getOrderedTags_",value:function(t){for(var e=t.tags.videoTags,r=t.tags.audioTags,n=void 0,i=[];e.length||r.length;)n=e.length?r.length&&r[0].dts<e[0].dts?r.shift():e.shift():r.shift(),i.push(n.finalize());return i}}]),e}(f["default"].EventTarget);r["default"]=E,e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":86,"./create-text-tracks-if-necessary":88,"./flash-constants":89,"./remove-cues-from-track":93,"global/window":26,"mux.js/lib/flv":72}],92:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},l=t("global/window"),c=i(l),d=t("global/document"),f=i(d),h="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,p=i(h),g=t("./virtual-source-buffer"),y=i(g),v=t("./add-text-track-data"),m=t("./codec-utils"),b=function(t){return t.map(function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,r){var n=("00"+Number(e).toString(16)).slice(-2),i=("00"+Number(r).toString(16)).slice(-2);return"avc1."+n+"00"+i})})},_=function(t){function e(){var t=this;o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var r=void 0;this.nativeMediaSource_=new c["default"].MediaSource;for(r in this.nativeMediaSource_)r in e.prototype||"function"!=typeof this.nativeMediaSource_[r]||(this[r]=this.nativeMediaSource_[r].bind(this.nativeMediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(t){return this.duration_=t,t!==1/0?void(this.nativeMediaSource_.duration=t):void 0}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?p["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){t.activeSourceBuffers_.length=0;for(var e=!1,r=!0,n=0;n<t.player_.audioTracks().length;n++){var i=t.player_.audioTracks()[n];if(i.enabled&&"main"!==i.kind){e=!0,r=!1;break}}t.sourceBuffers.forEach(function(n){if(n.appendAudioInitSegment_=!0,n.videoCodec_&&n.audioCodec_)n.audioDisabled_=e;else if(n.videoCodec_&&!n.audioCodec_)n.audioDisabled_=!0,r=!1;else if(!n.videoCodec_&&n.audioCodec_&&(n.audioDisabled_=r,r))return;t.activeSourceBuffers_.push(n)})},this.onPlayerMediachange_=function(){t.sourceBuffers.forEach(function(t){t.appendAudioInitSegment_=!0})},["sourceopen","sourceclose","sourceended"].forEach(function(t){this.nativeMediaSource_.addEventListener(t,this.trigger.bind(this))},this),this.on("sourceopen",function(e){var r=f["default"].querySelector('[src="'+t.url_+'"]');r&&(t.player_=(0,p["default"])(r.parentNode),t.player_.audioTracks&&t.player_.audioTracks()&&(t.player_.audioTracks().on("change",t.updateActiveSourceBuffers_),t.player_.audioTracks().on("addtrack",t.updateActiveSourceBuffers_),t.player_.audioTracks().on("removetrack",t.updateActiveSourceBuffers_)),t.player_.on("mediachange",t.onPlayerMediachange_))}),this.on("sourceended",function(e){for(var r=(0,v.durationOfVideo)(t.duration),n=0;n<t.sourceBuffers.length;n++){var i=t.sourceBuffers[n],o=i.metadataTrack_&&i.metadataTrack_.cues;o&&o.length&&(o[o.length-1].endTime=r)}}),this.on("sourceclose",function(t){this.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.off("mediachange",this.onPlayerMediachange_))})}return a(e,t),s(e,[{key:"addSeekableRange_",value:function(t,e){var r=void 0;if(this.duration!==1/0)throw r=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),r.name="InvalidStateError",r.code=11,r;(e>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=e)}},{key:"addSourceBuffer",value:function(t){var e=void 0,r=(0,m.parseContentType)(t);if(/^(video|audio)\/mp2t$/i.test(r.type)){var n=[];r.parameters&&r.parameters.codecs&&(n=r.parameters.codecs.split(","),n=b(n),n=n.filter(function(t){return(0,m.isAudioCodec)(t)||(0,m.isVideoCodec)(t)})),0===n.length&&(n=["avc1.4d400d","mp4a.40.2"]),e=new y["default"](this,n),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),e.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else e=this.nativeMediaSource_.addSourceBuffer(t);return this.sourceBuffers.push(e),e}}]),e}(p["default"].EventTarget);r["default"]=_,e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":86,"./codec-utils":87,"./virtual-source-buffer":96,"global/document":25,"global/window":26}],93:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e,r){var n=void 0,i=void 0;if(r)for(n=r.cues.length;n--;)i=r.cues[n],i.startTime<=e&&i.endTime>=t&&r.removeCue(i)};r["default"]=n,e.exports=r["default"]},{}],94:[function(t,e,r){/**
   * videojs-contrib-media-sources
   *
   * Copyright (c) 2015 Brightcove
   * All rights reserved.
   *
   * Handles communication between the browser-world and the mux.js
   * transmuxer running inside of a WebWorker by exposing a simple
   * message-based interface to a Transmuxer object.
   */
"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t("global/window"),s=n(a),u=t("mux.js/lib/mp4"),l=n(u),c=function(t){t.on("data",function(t){var e=t.initSegment;t.initSegment={data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength};var r=t.data;t.data=r.buffer,s["default"].postMessage({action:"data",segment:t,byteOffset:r.byteOffset,byteLength:r.byteLength},[t.data])}),t.captionStream&&t.captionStream.on("data",function(t){s["default"].postMessage({action:"caption",data:t})}),t.on("done",function(t){s["default"].postMessage({action:"done"})})},d=function(){function t(e){i(this,t),this.options=e||{},this.init()}return o(t,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new l["default"].Transmuxer(this.options),c(this.transmuxer)}},{key:"push",value:function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(t){var e=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*e))}},{key:"flush",value:function(t){this.transmuxer.flush()}}]),t}(),f=function(t){t.onmessage=function(t){return"init"===t.data.action&&t.data.options?void(this.messageHandlers=new d(t.data.options)):(this.messageHandlers||(this.messageHandlers=new d),void(t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data)))}};r["default"]=function(t){return new f(t)},e.exports=r["default"]},{"global/window":26,"mux.js/lib/mp4":79}],95:[function(t,e,r){(function(e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=t("global/window"),o=n(i),a=t("./flash-media-source"),s=n(a),u=t("./html-media-source"),l=n(u),c="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,d=n(c),f=0,h={mode:"auto"};d["default"].mediaSources={};var p=function(t,e){var r=d["default"].mediaSources[t];if(!r)throw new Error("Media Source not found (Video.js)");r.trigger({type:"sourceopen",swfId:e})},g=function(){return!!o["default"].MediaSource&&!!o["default"].MediaSource.isTypeSupported&&o["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},y=function(t){var e=d["default"].mergeOptions(h,t);return this.MediaSource={open:p,supportsNativeMediaSources:g},"html5"===e.mode||"auto"===e.mode&&g()?new l["default"]:new s["default"]};r.MediaSource=y,y.open=p,y.supportsNativeMediaSources=g;var v={createObjectURL:function(t){var e="blob:vjs-media-source/",r=void 0;return t instanceof l["default"]?(r=o["default"].URL.createObjectURL(t.nativeMediaSource_),t.url_=r,r):t instanceof s["default"]?(r=e+f,f++,d["default"].mediaSources[r]=t,r):(r=o["default"].URL.createObjectURL(t),t.url_=r,r)}};r.URL=v,d["default"].MediaSource=y,d["default"].URL=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-media-source":90,"./html-media-source":92,"global/window":26}],96:[function(t,e,r){(function(n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,c=i(l),d=t("./create-text-tracks-if-necessary"),f=i(d),h=t("./remove-cues-from-track"),p=i(h),g=t("./add-text-track-data"),y=t("webworkify"),v=i(y),m=t("./transmuxer-worker"),b=i(m),_=t("./codec-utils"),T=function(t){function e(t,r){var n=this;o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,c["default"].EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=t,this.codecs_=r,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1,this.appendAudioInitSegment_=!0;var i={remux:!1};this.codecs_.forEach(function(t){(0,_.isAudioCodec)(t)?n.audioCodec_=t:(0,_.isVideoCodec)(t)&&(n.videoCodec_=t)}),this.transmuxer_=(0,v["default"])(b["default"]),this.transmuxer_.postMessage({action:"init",options:i}),this.transmuxer_.onmessage=function(t){return"data"===t.data.action?n.data_(t):"done"===t.data.action?n.done_(t):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&t>=0&&(this.timestampOffset_=t,this.appendAudioInitSegment_=!0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(t){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=t),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=t)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var t=null,e=null,r=0,n=[],i=[];if(!this.videoBuffer_&&!this.audioBuffer_)return c["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return c["default"].createTimeRange();for(var o=this.videoBuffer_.buffered,a=this.audioBuffer_.buffered,s=o.length;s--;)n.push({time:o.start(s),type:"start"}),n.push({time:o.end(s),type:"end"});for(s=a.length;s--;)n.push({time:a.start(s),type:"start"}),n.push({time:a.end(s),type:"end"});for(n.sort(function(t,e){return t.time-e.time}),s=0;s<n.length;s++)"start"===n[s].type?(r++,2===r&&(t=n[s].time)):"end"===n[s].type&&(r--,1===r&&(e=n[s].time)),null!==t&&null!==e&&(i.push([t,e]),t=null,e=null);return c["default"].createTimeRanges(i)}})}return a(e,t),s(e,[{key:"data_",value:function(t){var e=t.data.segment;e.data=new Uint8Array(e.data,t.data.byteOffset,t.data.byteLength),e.initSegment=new Uint8Array(e.initSegment.data,e.initSegment.byteOffset,e.initSegment.byteLength),(0,f["default"])(this,this.mediaSource_,e),this.pendingBuffers_.push(e)}},{key:"done_",value:function(t){this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var t=this,e=["audio","video"];e.forEach(function(r){if(t[r+"Codec_"]&&!t[r+"Buffer_"]){var n=null;t.mediaSource_[r+"Buffer_"]?n=t.mediaSource_[r+"Buffer_"]:(n=t.mediaSource_.nativeMediaSource_.addSourceBuffer(r+'/mp4;codecs="'+t[r+"Codec_"]+'"'),t.mediaSource_[r+"Buffer_"]=n),t[r+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(i){n.addEventListener(i,function(){if("audio"!==r||!t.audioDisabled_){var n=e.every(function(e){return"audio"===e&&t.audioDisabled_?!0:r!==e&&t[e+"Buffer_"]&&t[e+"Buffer_"].updating?!1:!0});return n?t.trigger(i):void 0}})})}})}},{key:"appendBuffer",value:function(t){this.bufferUpdating_=!0,this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function(t,e){this.videoBuffer_&&this.videoBuffer_.remove(t,e),this.audioBuffer_&&this.audioBuffer_.remove(t,e),(0,p["default"])(t,e,this.metadataTrack_),(0,p["default"])(t,e,this.inbandTextTrack_)}},{key:"processPendingSegments_",value:function(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};t=this.pendingBuffers_.reduce(function(t,e){var r=e.type,n=e.data,i=e.initSegment;return t[r].segments.push(n),t[r].bytes+=n.byteLength,t[r].initSegment=i,e.captions&&(t.captions=t.captions.concat(e.captions)),e.info&&(t[r].info=e.info),e.metadata&&(t.metadata=t.metadata.concat(e.metadata)),t},t),this.videoBuffer_||this.audioBuffer_||(0===t.video.bytes&&(this.videoCodec_=null),0===t.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),t.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info}),t.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:t.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(t.audio.segments.unshift(t.audio.initSegment),t.audio.bytes+=t.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1),this.videoBuffer_&&(t.video.segments.unshift(t.video.initSegment),t.video.bytes+=t.video.initSegment.byteLength,this.concatAndAppendSegments_(t.video,this.videoBuffer_),(0,g.addTextTrackData)(this,t.captions,t.metadata)),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(t.audio,this.audioBuffer_),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(t,e){var r=0,n=void 0;if(t.bytes){n=new Uint8Array(t.bytes),t.segments.forEach(function(t){n.set(t,r),r+=t.byteLength});try{e.appendBuffer(n)}catch(i){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR"})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),e}(c["default"].EventTarget);r["default"]=T,e.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":86,"./codec-utils":87,"./create-text-tracks-if-necessary":88,"./remove-cues-from-track":93,"./transmuxer-worker":94,webworkify:97}],97:[function(t,e,r){var n=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t){for(var e,r=Object.keys(o),s=0,u=r.length;u>s;s++){var l=r[s];if(o[l].exports===t){e=l;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var c={},s=0,u=r.length;u>s;s++){var l=r[s];c[l]=l}i[e]=[Function(["require","module","exports"],"("+t+")(self)"),c]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};f[e]=e,i[d]=[Function(["require"],"require("+a(e)+")(self)"),f];var h="("+n+")({"+Object.keys(i).map(function(t){return a(t)+":["+i[t][0]+","+a(i[t][1])+"]"}).join(",")+"},{},["+a(d)+"])",p=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(p.createObjectURL(new Blob([h],{type:"text/javascript"})))}},{}],98:[function(t,e,r){(function(r){/**
     * @file videojs-contrib-hls.js
     *
     * The main file for the HLS project.
     * License: https://github.com/videojs/videojs-contrib-hls/blob/master/LICENSE
     */
"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(t,e,r){for(var n=!0;n;){var i=t,o=e,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;t=l,e=o,r=a,n=!0,s=l=void 0}},u=t("global/document"),l=n(u),c=t("./playlist-loader"),d=n(c),f=t("./playlist"),h=n(f),p=t("./xhr"),g=n(p),y=t("aes-decrypter"),v=t("./bin-utils"),m=n(v),b=t("videojs-contrib-media-sources"),_=t("m3u8-parser"),T=n(_),w="undefined"!=typeof window?window.videojs:"undefined"!=typeof r?r.videojs:null,k=n(w),E=t("./master-playlist-controller"),S=t("./config"),O=n(S),j=t("./rendition-mixin"),C=n(j),x=t("global/window"),A=n(x),P=t("./playback-watcher"),L=n(P),R=t("./reload-source-on-error"),D=n(R),M={PlaylistLoader:d["default"],Playlist:h["default"],Decrypter:y.Decrypter,AsyncStream:y.AsyncStream,decrypt:y.decrypt,utils:m["default"],xhr:(0,g["default"])()};Object.defineProperty(M,"GOAL_BUFFER_LENGTH",{get:function(){return k["default"].log.warn("using Hls.GOAL_BUFFER_LENGTH is UNSAFE be sure you know what you are doing"),O["default"].GOAL_BUFFER_LENGTH},set:function(t){return k["default"].log.warn("using Hls.GOAL_BUFFER_LENGTH is UNSAFE be sure you know what you are doing"),"number"!=typeof t||0>=t?void k["default"].log.warn("value passed to Hls.GOAL_BUFFER_LENGTH must be a number and greater than 0"):void(O["default"].GOAL_BUFFER_LENGTH=t)}});var I=1.2,N=function(t,e){var r=void 0;return t?(r=A["default"].getComputedStyle(t),r?r[e]:""):""};M.STANDARD_PLAYLIST_SELECTOR=function(){var t=void 0,e=this.playlists.master.playlists.slice(),r=[],n=+new Date,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0;for(e.sort(M.comparePlaylistBandwidth),e=e.filter(function(t){return"undefined"!=typeof t.excludeUntil?n>=t.excludeUntil:!0}),i=e.length;i--;)o=e[i],o.attributes&&o.attributes.BANDWIDTH&&(t=o.attributes.BANDWIDTH*I,t<this.systemBandwidth&&(r.push(o),a||(a=o)));for(i=r.length,r.sort(M.comparePlaylistResolution),o=null,c=parseInt(N(this.tech_.el(),"width"),10),d=parseInt(N(this.tech_.el(),"height"),10);i--;)if(o=r[i],o.attributes&&o.attributes.RESOLUTION&&o.attributes.RESOLUTION.width&&o.attributes.RESOLUTION.height){var f=o.attributes.RESOLUTION;if(f.width===c&&f.height===d){s=null,l=o;break}if(f.width<c&&f.height<d)break;(!s||f.width<u.width&&f.height<u.height)&&(s=o,u=s.attributes.RESOLUTION)}return s||l||a||e[0]},M.canPlaySource=function(){return k["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},M.supportsNativeHls=function(){var t=l["default"].createElement("video");if(!k["default"].getComponent("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(e){return/maybe|probably/i.test(t.canPlayType(e))})}(),M.isSupported=function(){return k["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var F=A["default"].navigator&&A["default"].navigator.userAgent||"";M.supportsAudioInfoChange_=function(){if(k["default"].browser.IS_FIREFOX){var t=/Firefox\/([\d.]+)/i.exec(F),e=parseInt(t[1],10);return e>=49}return!0};var U=k["default"].getComponent("Component"),B=function(t){function e(t,r,n){var o=this;if(i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,r),r.options_&&r.options_.playerId){var a=(0,k["default"])(r.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return k["default"].log.warn("player.hls is deprecated. Use player.tech_.hls instead."),o}})}this.tech_=r,this.source_=t,this.stats={},this.options_=k["default"].mergeOptions(k["default"].options.hls||{},n.hls),this.setOptions_(),this.on(l["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(t){var e=l["default"].fullscreenElement||l["default"].webkitFullscreenElement||l["default"].mozFullScreenElement||l["default"].msFullscreenElement;e&&e.contains(o.tech_.el())&&o.masterPlaylistController_.fastQualityChange_()}),this.on(this.tech_,"seeking",function(){this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),this.audioTrackChange_=function(){o.masterPlaylistController_.setupAudio()},this.on(this.tech_,"play",this.play)}return o(e,t),a(e,[{key:"setOptions_",value:function(){var t=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304),["withCredentials","bandwidth"].forEach(function(e){"undefined"!=typeof t.source_[e]&&(t.options_[e]=t.source_[e])}),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(t){var e=this;t&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=M,this.masterPlaylistController_=new E.MasterPlaylistController(this.options_),this.playbackWatcher_=new L["default"](k["default"].mergeOptions(this.options_,{seekable:function(){return e.seekable()}})),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):M.STANDARD_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var t=1/(this.bandwidth||1),e=void 0;e=this.throughput>0?1/this.throughput:0;var r=Math.floor(1/(t+e));return r},set:function(){k["default"].log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return e.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return e.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return e.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return e.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("sourceopen",function(){e.tech_.audioTracks().addEventListener("change",e.audioTrackChange_)}),this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,C["default"])(e)}),this.masterPlaylistController_.on("audioupdate",function(){e.tech_.clearTracks("audio"),e.masterPlaylistController_.activeAudioGroup().forEach(function(t){e.tech_.audioTracks().addTrack(t)})}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.el()&&this.tech_.src(k["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"activeAudioGroup_",value:function(){return this.masterPlaylistController_.activeAudioGroup()}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.tech_.audioTracks().removeEventListener("change",this.audioTrackChange_),s(Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}}]),e}(U),G=function H(t){return{canHandleSource:function(e){return k["default"].options.hls&&k["default"].options.hls.mode&&k["default"].options.hls.mode!==t?!1:H.canPlayType(e.type)},handleSource:function(e,r,n){"flash"===t&&r.setTimeout(function(){r.trigger("loadstart")},1);var i=k["default"].mergeOptions(n,{hls:{mode:t}});return r.hls=new B(e,r,i),r.hls.xhr=(0,g["default"])(),k["default"].Hls.xhr.beforeRequest&&(r.hls.xhr.beforeRequest=k["default"].Hls.xhr.beforeRequest),r.hls.src(e.src),r.hls},canPlayType:function(t){return H.canPlayType(t)?"maybe":""}}};M.comparePlaylistBandwidth=function(t,e){var r=void 0,n=void 0;return t.attributes&&t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||A["default"].Number.MAX_VALUE,e.attributes&&e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||A["default"].Number.MAX_VALUE,r-n},M.comparePlaylistResolution=function(t,e){var r=void 0,n=void 0;return t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||A["default"].Number.MAX_VALUE,e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||A["default"].Number.MAX_VALUE,r===n&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:r-n},G.canPlayType=function(t){var e=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;return M.supportsNativeHls?!1:e.test(t)},("undefined"==typeof k["default"].MediaSource||"undefined"==typeof k["default"].URL)&&(k["default"].MediaSource=b.MediaSource,k["default"].URL=b.URL),b.MediaSource.supportsNativeMediaSources()&&k["default"].getComponent("Html5").registerSourceHandler(G("html5")),A["default"].Uint8Array&&k["default"].getComponent("Flash").registerSourceHandler(G("flash")),k["default"].HlsHandler=B,k["default"].HlsSourceHandler=G,k["default"].Hls=M,k["default"].m3u8=T["default"],k["default"].registerComponent("Hls",M),k["default"].options.hls=k["default"].options.hls||{},k["default"].plugin("reloadSourceOnError",D["default"]),e.exports={Hls:M,HlsHandler:B,HlsSourceHandler:G}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./master-playlist-controller":4,"./playback-watcher":5,"./playlist":7,"./playlist-loader":6,"./reload-source-on-error":9,"./rendition-mixin":10,"./xhr":15,"aes-decrypter":19,"global/document":25,"global/window":26,"m3u8-parser":63,"videojs-contrib-media-sources":95}]},{},[98])(98)}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Hls=t()}}(function(){var t;return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,o,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(a(r))for(o=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,u=0;n>u;u++)l[u].apply(this,o);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,"function"==typeof console.trace)),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var r,n,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(s=o;s-->0;)if(r[s]===e||r[s].listener&&r[s].listener===e){n=s;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(e,r,n){!function(e){var i={buildAbsoluteURL:function(t,e){if(e=e.trim(),/^[a-z]+:/i.test(e))return e;var r=null,n=null,o=/^([^#]*)(.*)$/.exec(e);o&&(n=o[2],e=o[1]);var a=/^([^\?]*)(.*)$/.exec(e);a&&(r=a[2],e=a[1]);var s=/^([^#]*)(.*)$/.exec(t);s&&(t=s[1]);var u=/^([^\?]*)(.*)$/.exec(t);u&&(t=u[1]);var l=/^(([a-z]+:)?\/\/[a-z0-9\.\-_~]+(:[0-9]+)?)?(\/.*)$/i.exec(t);if(!l)throw new Error("Error trying to parse base URL.");var c=l[2]||"",d=l[1]||"",f=l[4],h=null;return h=/^\/\//.test(e)?c+"//"+i.buildAbsolutePath("",e.substring(2)):/^\//.test(e)?d+"/"+i.buildAbsolutePath("",e.substring(1)):i.buildAbsolutePath(d+f,e),r&&(h+=r),n&&(h+=n),h},buildAbsolutePath:function(t,e){for(var r,n,i=e,o="",a=t.replace(/[^\/]*$/,i.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;n=a.indexOf("/../",s),n>-1;s=n+r)r=/^\/(?:\.\.\/)*/.exec(a.slice(n))[0].length,o=(o+a.substring(s,n)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(r-1)/3+"}$"),"/");return o+a.substr(s)}};"object"==typeof n&&"object"==typeof r?r.exports=i:"function"==typeof t&&t.amd?t([],function(){return i}):"object"==typeof n?n.URLToolkit=i:e.URLToolkit=i}(this)},{}],3:[function(t,e,r){var n=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){function r(t){y[t]=!0;for(var e in i[t][1]){var n=i[t][1][e];y[n]||r(n)}}for(var s,u=Object.keys(o),l=0,c=u.length;c>l;l++){var d=u[l],f=o[d].exports;if(f===t||f&&f["default"]===t){s=d;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},l=0,c=u.length;c>l;l++){var d=u[l];h[d]=d}i[s]=[Function(["require","module","exports"],"("+t+")(self)"),h]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[s]=s,i[p]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),g];var y={};r(p);var v="("+n+")({"+Object.keys(y).map(function(t){return a(t)+":["+i[t][0]+","+a(i[t][1])+"]"}).join(",")+"},{},["+a(p)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL,b=new Blob([v],{type:"text/javascript"});if(e&&e.bare)return b;var _=m.createObjectURL(b),T=new Worker(_);return T.objectURL=_,T}},{}],4:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(28),l=n(u),c=t(27),d=n(c),f=t(30),h=n(f),p=t(26),g=t(45),y=t(9),v=n(y),m=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l["default"].FRAG_LOADING,l["default"].FRAG_LOADED,l["default"].FRAG_BUFFERED,l["default"].ERROR));return r.lastLoadedFragLevel=0,r._autoLevelCapping=-1,r._nextAutoLevel=-1,r.hls=t,r.onCheck=r.abandonRulesCheck.bind(r),r}return a(e,t),s(e,[{key:"destroy",value:function(){this.clearTimer(),d["default"].prototype.destroy.call(this)}},{key:"onFragLoading",value:function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this.bwEstimator){var r=this.hls,n=t.frag.level,i=r.levels[n].details.live,o=r.config,a=void 0,s=void 0;i?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this.bwEstimator=new v["default"](r,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=e}}},{key:"abandonRulesCheck",value:function(){var t=this.hls,e=t.media,r=this.fragCurrent,n=r.loader,i=this.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return g.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var o=n.stats;if(e&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var a=performance.now()-o.trequest,s=Math.abs(e.playbackRate);if(a>500*r.duration/s){var u=t.levels,c=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),d=o.total?o.total:Math.max(o.loaded,Math.round(r.duration*u[r.level].bitrate/8)),f=e.currentTime,p=(d-o.loaded)/c,y=(h["default"].bufferInfo(e,f,t.config.maxBufferHole).end-f)/s;if(y<2*r.duration/s&&p>y){var v=void 0,m=void 0;for(m=r.level-1;m>i&&(v=r.duration*u[m].bitrate/(6.4*c),!(y>v));m--);p>v&&(g.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+v.toFixed(1)+"<"+p.toFixed(1)+":"+y.toFixed(1)),t.nextLoadLevel=m,this.bwEstimator.sample(a,o.loaded),n.abort(),this.clearTimer(),t.trigger(l["default"].FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:o}))}}}}},{key:"onFragLoaded",value:function(t){var e=t.frag;if("main"===e.type&&(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,t.frag.bitrateTest)){var r=t.stats;r.tparsed=r.tbuffered=r.tload,this.onFragBuffered(t)}}},{key:"onFragBuffered",value:function(t){var e=t.stats,r=t.frag;if(e.aborted!==!0&&1===r.loadCounter&&"main"===r.type&&(!r.bitrateTest||e.tload===e.tbuffered)){var n=e.tbuffered-e.trequest;g.logger.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this.bwEstimator.sample(n,e.loaded),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(t){switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"findBestLevel",value:function(t,e,r,n,i,o,a,s,u){for(var l=i;l>=n;l--){var c=u[l],d=c.details,f=d?d.totalduration/d.fragments.length:e,h=!!d&&d.live,p=void 0;p=t>=l?a*r:s*r;var y=u[l].bitrate,v=y*f/p;if(g.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(p)+"/"+y+"/"+f+"/"+o+"/"+v),p>y&&(!v||h||o>v))return l}return-1}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping=t}},{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator,r=this.hls,n=r.levels,i=r.config.minAutoBitrate;if(!(-1===t||e&&e.canEstimate()))return Math.min(t,this.maxAutoLevel);var o=this.nextABRAutoLevel;if(-1!==t&&(o=Math.min(t,o)),void 0!==i)for(;n[o].bitrate<i;)o++;return o},set:function(t){this._nextAutoLevel=t}},{key:"minAutoLevel",get:function(){for(var t=this.hls,e=t.levels,r=t.config.minAutoBitrate,n=e?e.length:0,i=0;n>i;i++)if(e[i].bitrate>r)return i;return 0}},{key:"maxAutoLevel",get:function(){var t,e=this.hls.levels,r=this._autoLevelCapping;return t=-1===r&&e&&e.length?e.length-1:r}},{key:"nextABRAutoLevel",get:function(){var t=this.hls,e=this.maxAutoLevel,r=t.levels,n=t.config,i=this.minAutoLevel,o=t.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=o?o.currentTime:0,l=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,d=(h["default"].bufferInfo(o,u,n.maxBufferHole).end-u)/l,f=this.findBestLevel(a,s,c,i,e,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(f>=0)return f;g.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=n.maxStarvationDelay,y=n.abrBandWidthFactor,v=n.abrBandWidthUpFactor;if(0===d){var m=this.bitrateTestDelay;m&&(p=n.maxLoadingDelay-m,g.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),y=v=1)}return f=this.findBestLevel(a,s,c,i,e,d+p,y,v,r),Math.max(f,0)}}]),e}(d["default"]);r["default"]=m},{26:26,27:27,28:28,30:30,45:45,9:9}],5:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(41),l=n(u),c=t(30),d=n(c),f=t(22),h=n(f),p=t(28),g=n(p),y=t(27),v=n(y),m=t(31),b=n(m),_=t(47),T=n(_),w=t(26),k=t(45),E={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR"},S=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,g["default"].MEDIA_ATTACHED,g["default"].MEDIA_DETACHING,g["default"].AUDIO_TRACKS_UPDATED,g["default"].AUDIO_TRACK_SWITCH,g["default"].AUDIO_TRACK_LOADED,g["default"].KEY_LOADED,g["default"].FRAG_LOADED,g["default"].FRAG_PARSING_INIT_SEGMENT,g["default"].FRAG_PARSING_DATA,g["default"].FRAG_PARSED,g["default"].ERROR,g["default"].BUFFER_CREATED,g["default"].BUFFER_APPENDED,g["default"].BUFFER_FLUSHED));return r.config=t.config,r.audioCodecSwap=!1,r.ticks=0,r.ontick=r.tick.bind(r),r}return a(e,t),s(e,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),v["default"].prototype.destroy.call(this),this.state=E.STOPPED}},{key:"startLoad",value:function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,e>0?(k.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=E.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=E.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=E.STOPPED}},{key:"stopLoad",value:function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=E.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var t,e,r,n=this.hls,i=n.config;switch(this.state){case E.ERROR:case E.PAUSED:break;case E.STARTING:this.state=E.WAITING_TRACK,this.loadedmetadata=!1;break;case E.IDLE:if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;t=this.loadedmetadata?this.media.currentTime:this.nextLoadPosition;var o=this.mediaBuffer?this.mediaBuffer:this.media,a=d["default"].bufferInfo(o,t,i.maxBufferHole),s=a.len,u=a.end,c=this.fragPrevious,f=i.maxMaxBufferLength;if(f>s&&this.trackId<this.tracks.length){if(r=this.tracks[this.trackId].details,"undefined"==typeof r){this.state=E.WAITING_TRACK;break}if(!r.live&&c&&c.sn===r.endSN&&(!this.media.seeking||this.media.duration-u<c.duration/2)){this.hls.trigger(g["default"].BUFFER_EOS,{type:"audio"}),this.state=E.ENDED;break}var h=r.fragments,p=h.length,y=h[0].start,v=h[p-1].start+h[p-1].duration,m=void 0;if(y>u?m=h[0]:!function(){var t=void 0,e=i.maxFragLookUpTolerance;v>u?(u>v-e&&(e=0),t=l["default"].search(h,function(t){return t.start+t.duration-e<=u?1:t.start-e>u?-1:0})):t=h[p-1],t&&(m=t,y=t.start,c&&m.level===c.level&&m.sn===c.sn&&(m.sn<r.endSN?(m=h[m.sn+1-r.startSN],k.logger.log("SN just loaded, load next one: "+m.sn)):m=null))}(),m)if(null!=m.decryptdata.uri&&null==m.decryptdata.key)k.logger.log("Loading key for "+m.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+this.trackId),this.state=E.KEY_LOADING,n.trigger(g["default"].KEY_LOADING,{frag:m});else{if(k.logger.log("Loading "+m.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+this.trackId+", currentTime:"+t+",bufferEnd:"+u.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,m.loadCounter){m.loadCounter++;var b=i.fragLoadingLoopThreshold;if(m.loadCounter>b&&Math.abs(this.fragLoadIdx-m.loadIdx)<b)return void n.trigger(g["default"].ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:m})}else m.loadCounter=1;m.loadIdx=this.fragLoadIdx,this.fragCurrent=m,this.startFragRequested=!0,n.trigger(g["default"].FRAG_LOADING,{frag:m}),this.state=E.FRAG_LOADING}}break;case E.WAITING_TRACK:e=this.tracks[this.trackId],e&&e.details&&(this.state=E.IDLE);break;case E.FRAG_LOADING_WAITING_RETRY:var _=performance.now(),T=this.retryDate;o=this.media;var S=o&&o.seeking;(!T||_>=T||S)&&(k.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=E.IDLE);break;case E.STOPPED:case E.FRAG_LOADING:case E.PARSING:case E.PARSED:case E.ENDED:}}},{key:"onMediaAttached",value:function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var t=this.media;t&&t.ended&&(k.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.tracks;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===E.ENDED&&(this.state=E.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(t){k.logger.log("audio tracks updated"),this.tracks=t.audioTracks}},{key:"onAudioTrackSwitch",value:function(t){var e=!!t.url;this.trackId=t.id,this.state=E.IDLE,this.fragCurrent=null,this.state=E.PAUSED,e?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.hls.trigger(g["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),this.tick()}},{key:"onAudioTrackLoaded",value:function(t){var e=t.details,r=t.id,n=this.tracks[r],i=e.totalduration;if(k.logger.log("track "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),e.PTSKnown=!1,n.details=e,!this.startFragRequested){if(-1===this.startPosition){var o=e.startTimeOffset;isNaN(o)?this.startPosition=0:(k.logger.log("start time offset found in playlist, adjust startPosition to "+o),this.startPosition=o)}this.nextLoadPosition=this.startPosition}this.state===E.WAITING_TRACK&&(this.state=E.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===E.KEY_LOADING&&(this.state=E.IDLE,this.tick())}},{key:"onFragLoaded",value:function(t){var e=this.fragCurrent;if(this.state===E.FRAG_LOADING&&e&&"audio"===t.frag.type&&t.frag.level===e.level&&t.frag.sn===e.sn){this.state=E.PARSING,this.stats=t.stats;var r=this.tracks[this.trackId],n=r.details,i=n.totalduration,o=e.start,a=e.level,s=e.sn,u=this.config.defaultAudioCodec||r.audioCodec;
this.pendingAppending=0,this.demuxer||(this.demuxer=new h["default"](this.hls,"audio")),k.logger.log("Demuxing "+s+" of ["+n.startSN+" ,"+n.endSN+"],track "+a);var l=n.PTSKnown||!n.live;this.demuxer.push(t.payload,u,null,o,e.cc,a,s,i,e.decryptdata,l)}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(t){var e=this.fragCurrent;if(e&&"audio"===t.id&&t.sn===e.sn&&t.level===e.level&&this.state===E.PARSING){var r=t.tracks,n=void 0;if(n=r.audio){n.levelCodec="mp4a.40.2",n.id=t.id,this.hls.trigger(g["default"].BUFFER_CODECS,r),k.logger.log("audio track:audio,container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var i=n.initSegment;i&&(this.pendingAppending++,this.hls.trigger(g["default"].BUFFER_APPENDING,{type:"audio",data:i,parent:"audio",content:"initSegment"})),this.tick()}}}},{key:"onFragParsingData",value:function(t){var e=this,r=this.fragCurrent;if(r&&"audio"===t.id&&t.sn===r.sn&&t.level===r.level&&this.state===E.PARSING){var n=this.tracks[this.trackId],i=this.fragCurrent;k.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),b["default"].updateFragPTSDTS(n.details,i.sn,t.startPTS,t.endPTS),[t.data1,t.data2].forEach(function(r){r&&(e.pendingAppending++,e.hls.trigger(g["default"].BUFFER_APPENDING,{type:t.type,data:r,parent:"audio",content:"data"}))}),this.nextLoadPosition=t.endPTS,this.tick()}}},{key:"onFragParsed",value:function(t){var e=this.fragCurrent;e&&"audio"===t.id&&t.sn===e.sn&&t.level===e.level&&this.state===E.PARSING&&(this.stats.tparsed=performance.now(),this.state=E.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(t){if("audio"===t.parent)switch(this.state){case E.PARSING:case E.PARSED:this.pendingAppending--,this._checkAppendedParsed()}}},{key:"_checkAppendedParsed",value:function(){if(this.state===E.PARSED&&0===this.pendingAppending){var t=this.fragCurrent,e=this.stats;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),this.hls.trigger(g["default"].FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;k.logger.log("audio buffered : "+T["default"].toString(r.buffered)),this.state=E.IDLE}this.tick()}}},{key:"onError",value:function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case w.ErrorDetails.FRAG_LOAD_ERROR:case w.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!t.fatal){var r=this.fragLoadError;r?r++:r=1;var n=this.config;if(r<=n.fragLoadingMaxRetry){this.fragLoadError=r,e.loadCounter=0;var i=Math.min(Math.pow(2,r-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);k.logger.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=E.FRAG_LOADING_WAITING_RETRY}else k.logger.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.trigger(g["default"].ERROR,t),this.state=E.ERROR}break;case w.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case w.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case w.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case w.ErrorDetails.KEY_LOAD_ERROR:case w.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==E.ERROR&&(this.state=t.fatal?E.ERROR:E.IDLE,k.logger.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."))}}},{key:"onBufferFlushed",value:function(){this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=E.IDLE,this.fragPrevious=null,this.tick()}}]),e}(v["default"]);r["default"]=S},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,47:47}],6:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(28),l=n(u),c=t(27),d=n(c),f=t(45),h=function(t){function e(t){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l["default"].MANIFEST_LOADING,l["default"].MANIFEST_LOADED,l["default"].AUDIO_TRACK_LOADED))}return a(e,t),s(e,[{key:"destroy",value:function(){d["default"].prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(t){var e=this,r=t.audioTracks||[],n=!1;this.tracks=r,this.hls.trigger(l["default"].AUDIO_TRACKS_UPDATED,{audioTracks:r});var i=0;r.forEach(function(t){return t["default"]?(e.audioTrack=i,void(n=!0)):void i++}),n===!1&&r.length&&(f.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(t){t.id<this.tracks.length&&(f.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(t){if(t>=0&&t<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=t,f.logger.log("switching to audioTrack "+t);var e=this.tracks[t],r=e.type,n=e.url;this.hls.trigger(l["default"].AUDIO_TRACK_SWITCH,{id:t,type:r,url:n});var i=e.details;!n||void 0!==i&&i.live!==!0||(f.logger.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(l["default"].AUDIO_TRACK_LOADING,{url:n,id:t}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),e}(d["default"]);r["default"]=h},{27:27,28:28,45:45}],7:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(28),l=n(u),c=t(27),d=n(c),f=t(45),h=t(26),p=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l["default"].MEDIA_ATTACHING,l["default"].MEDIA_DETACHING,l["default"].MANIFEST_PARSED,l["default"].BUFFER_RESET,l["default"].BUFFER_APPENDING,l["default"].BUFFER_CODECS,l["default"].BUFFER_EOS,l["default"].BUFFER_FLUSHING,l["default"].LEVEL_PTS_UPDATED,l["default"].LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return a(e,t),s(e,[{key:"destroy",value:function(){d["default"].prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(t){var e=t.type,r=this.tracks.audio;if("audio"===e&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio,i=Math.abs(n.timestampOffset-t.start);if(i>.1){var o=n.updating;try{n.abort()}catch(t){o=!0,f.logger.warn("can not abort audio buffer: "+t)}o?this.audioTimestampOffset=t.start:(f.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+t.start),n.timestampOffset=t.start)}}}},{key:"onManifestParsed",value:function(t){var e=t.audio,r=t.video,n=0;t.altAudio&&(e||r)&&(n=(e?1:0)+(r?1:0),f.logger.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n}},{key:"onMediaAttaching",value:function(t){var e=this.media=t.media;if(e){var r=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(r)}}},{key:"onMediaDetaching",value:function(){f.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){f.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l["default"].MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){f.logger.log("media source opened"),this.hls.trigger(l["default"].MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){f.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){f.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;f.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1,this.hls.trigger(l["default"].BUFFER_APPENDED,{parent:this.parent}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(t){f.logger.error("sourceBuffer error:"+t),this.hls.trigger(l["default"].ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var t=this.sourceBuffer;for(var e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(t){var e=this.sourceBuffer,r=this.mediaSource;for(var n in t)if(!e[n]){var i=t[n],o=i.levelCodec||i.codec,a=i.container+";codecs="+o;f.logger.log("creating sourceBuffer("+a+")");try{var s=e[n]=r.addSourceBuffer(a);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[n]={codec:o,container:i.container},i.buffer=s}catch(t){f.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(l["default"].ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:a})}}this.hls.trigger(l["default"].BUFFER_CREATED,{tracks:t})}},{key:"onBufferAppending",value:function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())}},{key:"onBufferAppendFail",value:function(t){f.logger.error("sourceBuffer error:"+t.event),this.hls.trigger(l["default"].ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1,frag:this.fragCurrent})}},{key:"onBufferEos",value:function(t){var e=this.sourceBuffer,r=t.type;for(var n in e)r&&n!==r||e[n].ended||(e[n].ended=!0,f.logger.log(n+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var r in t){if(!t[r].ended)return;if(t[r].updating)return void(this._needsEos=!0)}f.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment"),e.endOfStream(),this._needsEos=!1}},{key:"onBufferFlushing",value:function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(t){var e=t.details;0!==e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var t=this.media,e=this.mediaSource,r=this.sourceBuffer,n=this._levelDuration;if(null!==n&&t&&e&&r&&0!==t.readyState&&"open"===e.readyState){for(var i in r)if(r[i].updating)return;null===this._msDuration&&(this._msDuration=e.duration),n>this._msDuration&&n>t.duration&&(f.logger.log("Updating mediasource duration to "+n.toFixed(3)),this._msDuration=e.duration=n)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;for(var n in r)e+=r[n].buffered.length;this.appended=e,this.hls.trigger(l["default"].BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var t=this.hls,e=this.sourceBuffer,r=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void f.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var n=r.shift();try{var i=n.type;e[i]?(e[i].ended=!1,this.parent=n.parent,e[i].appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){f.logger.error("error while trying to append buffer:"+e.message),r.unshift(n);var o={type:h.ErrorTypes.MEDIA_ERROR};if(22===e.code)return this.segments=[],o.details=h.ErrorDetails.BUFFER_FULL_ERROR,void t.trigger(l["default"].ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=h.ErrorDetails.BUFFER_APPEND_ERROR,o.frag=this.fragCurrent,this.appendError>t.config.appendErrorMaxRetry)return f.logger.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],o.fatal=!0,void t.trigger(l["default"].ERROR,o);o.fatal=!1,t.trigger(l["default"].ERROR,o)}}}}},{key:"flushBuffer",value:function(t,e,r){var n,i,o,a,s,u,l=this.sourceBuffer;if(Object.keys(l).length){if(f.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var c in l)if(!r||c===r){if(n=l[c],n.ended=!1,n.updating)return f.logger.warn("cannot flush, sb updating in progress"),!1;for(i=0;i<n.buffered.length;i++)if(o=n.buffered.start(i),a=n.buffered.end(i),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(s=t,u=e):(s=Math.max(o,t),u=Math.min(a,e)),Math.min(u,a)-s>.5)return this.flushBufferCounter++,f.logger.log("flush "+c+" ["+s+","+u+"], of ["+o+","+a+"], pos:"+this.media.currentTime),n.remove(s,u),!1}}else f.logger.warn("abort flushing too many retries");f.logger.log("buffer flushed")}return!0}}]),e}(d["default"]);r["default"]=p},{26:26,27:27,28:28,45:45}],8:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(28),l=n(u),c=t(27),d=n(c),f=function(t){function e(t){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l["default"].FPS_DROP_LEVEL_CAPPING,l["default"].MEDIA_ATTACHING,l["default"].MANIFEST_PARSED))}return a(e,t),s(e,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(t){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(t.droppedLevel)||this.restrictedLevels.push(t.droppedLevel)}},{key:"onMediaAttaching",value:function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null}},{key:"onManifestParsed",value:function(t){this.hls.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,this.hls.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var t=this.levels?this.levels.length:0;t&&(this.hls.autoLevelCapping=this.getMaxLevel(t-1),this.hls.autoLevelCapping>this.autoLevelCapping&&this.hls.streamController.nextLevelSwitch(),this.autoLevelCapping=this.hls.autoLevelCapping)}}},{key:"getMaxLevel",value:function(t){var e=0,r=void 0,n=void 0,i=this.mediaWidth,o=this.mediaHeight,a=0,s=0;for(r=0;t>=r&&(n=this.levels[r],!this.isLevelRestricted(r))&&(e=r,a=n.width,s=n.height,!(a>=i||s>=o));r++);return e}},{key:"isLevelRestricted",value:function(t){return!(!this.restrictedLevels||-1===this.restrictedLevels.indexOf(t))}},{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}},{key:"mediaWidth",get:function(){var t=void 0;return this.media&&(t=this.media.width||this.media.clientWidth||this.media.offsetWidth,t*=this.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0;return this.media&&(t=this.media.height||this.media.clientHeight||this.media.offsetHeight,t*=this.contentScaleFactor),t}}]),e}(d["default"]);r["default"]=f},{27:27,28:28}],9:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t(44),s=n(a),u=function(){function t(e,r,n,o){i(this,t),this.hls=e,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new s["default"](r),this.fast_=new s["default"](n)}return o(t,[{key:"sample",value:function(t,e){t=Math.max(t,this.minDelayMs_);var r=8e3*e/t,n=t/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)}},{key:"canEstimate",value:function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),t}();r["default"]=u},{44:44}],10:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(28),l=n(u),c=t(27),d=n(c),f=t(45),h=function(t){function e(t){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l["default"].MEDIA_ATTACHING))}return a(e,t),s(e,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(t){this.hls.config.capLevelOnFPSDrop&&(this.video=t.media instanceof HTMLVideoElement?t.media:null,"function"==typeof this.video.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),this.hls.config.fpsDroppedMonitoringPeriod))}},{key:"checkFPS",value:function(t,e,r){var n=performance.now();if(e){if(this.lastTime){var i=n-this.lastTime,o=r-this.lastDroppedFrames,a=e-this.lastDecodedFrames,s=1e3*o/i;if(this.hls.trigger(l["default"].FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:r}),s>0&&o>this.hls.config.fpsDroppedMonitoringThreshold*a){var u=this.hls.currentLevel;f.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===this.hls.autoLevelCapping||this.hls.autoLevelCapping>=u)&&(u-=1,this.hls.trigger(l["default"].FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:this.hls.currentLevel}),this.hls.autoLevelCapping=u,this.hls.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=e}}},{key:"checkFPSInterval",value:function(){if(this.video)if(this.isVideoPlaybackQualityAvailable){var t=this.video.getVideoPlaybackQuality();this.checkFPS(this.video,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(this.video,this.video.webkitDecodedFrameCount,this.video.webkitDroppedFrameCount)}}]),e}(d["default"]);r["default"]=h},{27:27,28:28,45:45}],11:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(28),l=n(u),c=t(27),d=n(c),f=t(45),h=t(26),p=t(30),g=n(p),y=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l["default"].MANIFEST_LOADED,l["default"].LEVEL_LOADED,l["default"].ERROR));return r.ontick=r.tick.bind(r),r._manualLevel=r._autoLevelCapping=-1,r}return a(e,t),s(e,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0,this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(t){var e,r=[],n=[],i={},o=!1,a=!1,s=this.hls,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),c=function(t,e){return MediaSource.isTypeSupported(t+"/mp4;codecs="+e)};if(t.levels.forEach(function(t){t.videoCodec&&(o=!0),u&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(t.audioCodec||t.attrs&&t.attrs.AUDIO)&&(a=!0);var e=i[t.bitrate];void 0===e?(i[t.bitrate]=r.length,t.url=[t.url],t.urlId=0,r.push(t)):r[e].url.push(t.url)}),o&&a?r.forEach(function(t){t.videoCodec&&n.push(t)}):n=r,n=n.filter(function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||c("audio",e))&&(!r||c("video",r))}),n.length){e=n[0].bitrate,n.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=n;for(var d=0;d<n.length;d++)if(n[d].bitrate===e){this._firstLevel=d,f.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+e);break}s.trigger(l["default"].MANIFEST_PARSED,{levels:n,firstLevel:this._firstLevel,stats:t.stats,audio:a,video:o,altAudio:t.audioTracks.length>0})}else s.trigger(l["default"].ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(t){var e=this._levels;if(t>=0&&t<e.length){this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==t&&(f.logger.log("switching to level "+t),this._level=t,this.hls.trigger(l["default"].LEVEL_SWITCH,{level:t}));var r=e[t],n=r.details;if(!n||n.live===!0){var i=r.urlId;this.hls.trigger(l["default"].LEVEL_LOADING,{url:r.url[i],level:t,id:i})}}else this.hls.trigger(l["default"].ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(t){if(!t.fatal){var e=t.details,r=this.hls,n=void 0,i=void 0,o=!1,a=r.abrController,s=a.minAutoLevel;switch(e){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:n=t.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:n=t.context.level,o=!0}if(void 0!==n)if(i=this._levels[n],i.urlId<i.url.length-1)i.urlId++,i.details=void 0,f.logger.warn("level controller,"+e+" for level "+n+": switching to redundant stream id "+i.urlId);else{var u=-1===this._manualLevel&&n;if(u)f.logger.warn("level controller,"+e+": emergency switch-down for next fragment"),a.nextAutoLevel=s;else if(i&&i.details&&i.details.live)f.logger.warn("level controller,"+e+" on live stream, discard"),o&&(this._level=void 0);else if(e===h.ErrorDetails.LEVEL_LOAD_ERROR||e===h.ErrorDetails.LEVEL_LOAD_TIMEOUT){var c=r.media,d=c&&g["default"].isBuffered(c,c.currentTime)&&g["default"].isBuffered(c,c.currentTime+.5);if(d){var p=r.config.levelLoadingRetryDelay;f.logger.warn("level controller,"+e+", but media buffered, retry in "+p+"ms"),this.timer=setTimeout(this.ontick,p)}else f.logger.error("cannot recover "+e+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),t.fatal=!0,r.trigger(l["default"].ERROR,t)}}}}},{key:"onLevelLoaded",value:function(t){if(t.level===this._level){var e=t.details;if(e.live){var r=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),n=this._levels[t.level],i=n.details;i&&e.endSN===i.endSN&&(r/=2,f.logger.log("same live playlist, reload twice faster")),r-=performance.now()-t.stats.trequest,r=Math.max(1e3,Math.round(r)),f.logger.log("live playlist, reload in "+r+" ms"),this.timer=setTimeout(this.ontick,r)}else this.timer=null}}},{key:"tick",value:function(){var t=this._level;if(void 0!==t&&this.canload){var e=this._levels[t],r=e.urlId;this.hls.trigger(l["default"].LEVEL_LOADING,{url:e.url[r],level:t,id:r})}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(t){var e=this._levels;e&&e.length>t&&(this._level===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(t){this._manualLevel=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){-1!==t&&(t=Math.max(t,this.hls.abrController.minAutoLevel)),this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.abrController.nextAutoLevel},set:function(t){this.level=t,-1===this._manualLevel&&(this.hls.abrController.nextAutoLevel=t)}}]),e}(d["default"]);r["default"]=y},{26:26,27:27,28:28,30:30,45:45}],12:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(41),l=n(u),c=t(30),d=n(c),f=t(22),h=n(f),p=t(28),g=n(p),y=t(27),v=n(y),m=t(31),b=n(m),_=t(47),T=n(_),w=t(26),k=t(45),E={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},S=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,g["default"].MEDIA_ATTACHED,g["default"].MEDIA_DETACHING,g["default"].MANIFEST_LOADING,g["default"].MANIFEST_PARSED,g["default"].LEVEL_LOADED,g["default"].KEY_LOADED,g["default"].FRAG_LOADED,g["default"].FRAG_LOAD_EMERGENCY_ABORTED,g["default"].FRAG_PARSING_INIT_SEGMENT,g["default"].FRAG_PARSING_DATA,g["default"].FRAG_PARSED,g["default"].ERROR,g["default"].AUDIO_TRACK_SWITCH,g["default"].BUFFER_CREATED,g["default"].BUFFER_APPENDED,g["default"].BUFFER_FLUSHED));return r.config=t.config,r.audioCodecSwap=!1,r.ticks=0,r.ontick=r.tick.bind(r),r}return a(e,t),s(e,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),v["default"].prototype.destroy.call(this),
this.state=E.STOPPED}},{key:"startLoad",value:function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,e>0?k.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)):this.lastCurrentTime=this.startPosition?this.startPosition:t,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}this.state=E.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else k.logger.warn("cannot start loading as manifest not parsed yet"),this.state=E.STOPPED}},{key:"stopLoad",value:function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=E.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case E.ERROR:break;case E.BUFFER_FLUSHING:this.fragLoadError=0;break;case E.IDLE:if(!this._doTickIdle())return;break;case E.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=E.IDLE);break;case E.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),r=this.retryDate;(!r||e>=r||this.media&&this.media.seeking)&&(k.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=E.IDLE);break;case E.ERROR:case E.PAUSED:case E.STOPPED:case E.FRAG_LOADING:case E.PARSING:case E.PARSED:case E.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var t=this.hls,e=t.config,r=this.media;if(void 0!==this.levelLastLoaded&&!r&&(this.startFragRequested||!e.startFragPrefetch))return!0;var n=void 0;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=t.nextLoadLevel,o=this.levels[i],a=o.bitrate,s=void 0;s=a?Math.max(8*e.maxBufferSize/a,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var u=d["default"].bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,e.maxBufferHole),l=u.len;if(l>=s)return!0;k.logger.trace("buffer length of "+l.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=i;var c=o.details;if("undefined"==typeof c||c.live&&this.levelLastLoaded!==i)return this.state=E.WAITING_LEVEL,!0;var f=this.fragPrevious;if(!c.live&&f&&f.sn===c.endSN&&(!r.seeking&&u.len||r.duration-u.end<=f.duration/2)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(g["default"].BUFFER_EOS,h),this.state=E.ENDED,!0}return this._fetchPayloadOrEos({pos:n,bufferInfo:u,levelDetails:c})}},{key:"_fetchPayloadOrEos",value:function(t){var e=t.pos,r=t.bufferInfo,n=t.levelDetails,i=this.fragPrevious,o=this.level,a=n.fragments,s=a.length;if(0===s)return!1;var u=a[0].start,l=a[s-1].start+a[s-1].duration,c=r.end,d=void 0;if(n.live){var f=this.config.initialLiveManifestSize;if(f>s)return k.logger.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+f),!1;if(d=this._ensureFragmentAtLivePoint({levelDetails:n,bufferEnd:c,start:u,end:l,fragPrevious:i,fragments:a,fragLen:s}),null===d)return!1}else u>c&&(d=a[0]);return d||(d=this._findFragment({start:u,fragPrevious:i,fragLen:s,fragments:a,bufferEnd:c,end:l,levelDetails:n})),!d||this._loadFragmentOrKey({frag:d,level:o,levelDetails:n,pos:e,bufferEnd:c})}},{key:"_ensureFragmentAtLivePoint",value:function(t){var e=t.levelDetails,r=t.bufferEnd,n=t.start,i=t.end,o=t.fragPrevious,a=t.fragments,s=t.fragLen,u=this.hls.config,l=this.media,c=void 0,d=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*e.targetduration;if(r<Math.max(n,i-d)){var f=this.liveSyncPosition=this.computeLivePosition(n,e);k.logger.log("buffer end: "+r.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),r=f,l&&l.readyState&&l.duration>f&&(l.currentTime=f)}if(e.PTSKnown&&r>i&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(o){var h=o.sn+1;h>=e.startSN&&h<=e.endSN&&(c=a[h-e.startSN],k.logger.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=a[Math.min(s-1,Math.round(s/2))],k.logger.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c}},{key:"_findFragment",value:function(t){var e=t.start,r=t.fragPrevious,n=t.fragLen,i=t.fragments,o=t.bufferEnd,a=t.end,s=t.levelDetails,u=this.hls.config,c=void 0,d=void 0,f=u.maxFragLookUpTolerance;if(a>o?(o>a-f&&(f=0),d=l["default"].search(i,function(t){return t.start+t.duration-f<=o?1:t.start-f>o&&t.start?-1:0})):d=i[n-1],d&&(c=d,e=d.start,r&&c.level===r.level&&c.sn===r.sn))if(c.sn<s.endSN){var h=r.deltaPTS,p=c.sn-s.startSN;h&&h>u.maxBufferHole&&r.dropped&&p?(c=i[p-1],k.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),r.loadCounter--):(c=i[p+1],k.logger.log("SN just loaded, load next one: "+c.sn))}else c=null;return c}},{key:"_loadFragmentOrKey",value:function(t){var e=t.frag,r=t.level,n=t.levelDetails,i=t.pos,o=t.bufferEnd,a=this.hls,s=a.config;if(null==e.decryptdata.uri||null!=e.decryptdata.key){if(k.logger.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+r+", currentTime:"+i.toFixed(3)+",bufferEnd:"+o.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var u=s.fragLoadingLoopThreshold;if(e.loadCounter>u&&Math.abs(this.fragLoadIdx-e.loadIdx)<u)return a.trigger(g["default"].ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e}),!1}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,a.trigger(g["default"].FRAG_LOADING,{frag:e}),this.state=E.FRAG_LOADING,!0}k.logger.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+r),this.state=E.KEY_LOADING,a.trigger(g["default"].KEY_LOADING,{frag:e})}},{key:"getBufferRange",value:function(t){var e,r,n=this.bufferRange;if(n)for(e=n.length-1;e>=0;e--)if(r=n[e],t>=r.start&&t<=r.end)return r;return null}},{key:"followingBufferRange",value:function(t){return t?this.getBufferRange(t.end+.5):null}},{key:"_checkFragmentChanged",value:function(){var t,e,r=this.media;if(r&&r.readyState&&r.seeking===!1&&(e=r.currentTime,e>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),d["default"].isBuffered(r,e)?t=this.getBufferRange(e):d["default"].isBuffered(r,e+.1)&&(t=this.getBufferRange(e+.1)),t)){var n=t.frag;n!==this.fragPlaying&&(this.fragPlaying=n,this.hls.trigger(g["default"].FRAG_CHANGED,{frag:n}))}}},{key:"immediateLevelSwitch",value:function(){if(k.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=E.BUFFER_FLUSHING,this.hls.trigger(g["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY})}},{key:"immediateLevelSwitchEnd",value:function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,d["default"].isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())}},{key:"nextLevelSwitch",value:function(){var t=this.media;if(t&&t.readyState){var e=void 0,r=void 0,n=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,r=this.getBufferRange(t.currentTime),r&&r.start>1&&(this.state=E.BUFFER_FLUSHING,this.hls.trigger(g["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:r.start-1})),t.paused)e=0;else{var i=this.hls.nextLoadLevel,o=this.levels[i],a=this.fragLastKbps;e=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if(n=this.getBufferRange(t.currentTime+e),n&&(n=this.followingBufferRange(n))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.state=E.BUFFER_FLUSHING,this.hls.trigger(g["default"].BUFFER_FLUSHING,{startOffset:n.start,endOffset:Number.POSITIVE_INFINITY})}}}},{key:"onMediaAttached",value:function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var t=this.media;t&&t.ended&&(k.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var t=this.media,e=t?t.currentTime:void 0,r=this.config;if(k.logger.log("media seeking to "+e.toFixed(3)),this.state===E.FRAG_LOADING){var n=d["default"].bufferInfo(t,e,this.config.maxBufferHole),i=this.fragCurrent;if(0===n.len&&i){var o=r.maxFragLookUpTolerance,a=i.start-o,s=i.start+i.duration+o;a>e||e>s?(i.loader&&(k.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=E.IDLE):k.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===E.ENDED&&(this.state=E.IDLE);t&&(this.lastCurrentTime=e),this.state!==E.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaSeeked",value:function(){k.logger.log("media seeked to "+this.media.currentTime.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){k.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){k.logger.log("trigger BUFFER_RESET"),this.hls.trigger(g["default"].BUFFER_RESET),this.bufferRange=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(t){var e,r=!1,n=!1;t.levels.forEach(function(t){e=t.audioCodec,e&&(-1!==e.indexOf("mp4a.40.2")&&(r=!0),-1!==e.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&k.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var i=this.config;i.autoStartLoad&&this.hls.startLoad(i.startPosition)}},{key:"onLevelLoaded",value:function(t){var e=t.details,r=t.level,n=this.levels[r],i=e.totalduration,o=0;if(k.logger.log("level "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),this.levelLastLoaded=r,e.live){var a=n.details;a&&e.fragments.length>0?(b["default"].mergeDetails(a,e),o=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,a),e.PTSKnown?k.logger.log("live playlist sliding:"+o.toFixed(3)):k.logger.log("live playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,k.logger.log("live playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(n.details=e,this.hls.trigger(g["default"].LEVEL_UPDATED,{details:e,level:r}),this.startFragRequested===!1){if(-1===this.startPosition||-1===this.lastCurrentTime){var s=e.startTimeOffset;isNaN(s)?e.live?(this.startPosition=this.computeLivePosition(o,e),k.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(0>s&&(k.logger.log("negative start time offset "+s+", count from end of last fragment"),s=o+i+s),k.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===E.WAITING_LEVEL&&(this.state=E.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===E.KEY_LOADING&&(this.state=E.IDLE,this.tick())}},{key:"onFragLoaded",value:function(t){var e=this.fragCurrent,r=t.frag;if(this.state===E.FRAG_LOADING&&e&&"main"===r.type&&r.level===e.level&&r.sn===e.sn){var n=t.stats,i=this.levels[e.level],o=i.details;if(k.logger.log("Loaded  "+e.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+e.level),this.bitrateTest=!1,r.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=E.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(g["default"].FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.tick();else{this.state=E.PARSING,this.stats=n;var a=o.totalduration,s=isNaN(e.startDTS)?e.start:e.startDTS,u=e.level,l=e.sn,c=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(k.logger.log("swapping playlist audio codec"),void 0===c&&(c=this.lastAudioCodec),c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingAppending=0,k.logger.log("Parsing "+l+" of ["+o.startSN+" ,"+o.endSN+"],level "+u+", cc "+e.cc);var d=this.demuxer;d||(d=this.demuxer=new h["default"](this.hls,"main"));var f=o.PTSKnown||!o.live;d.push(t.payload,c,i.videoCodec,s,e.cc,u,l,a,e.decryptdata,f)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(t){var e=this.fragCurrent;if(e&&"main"===t.id&&t.sn===e.sn&&t.level===e.level&&this.state===E.PARSING){var r,n,i=t.tracks;if(i.audio&&this.altAudio&&delete i.audio,n=i.audio){var o=this.levels[this.level].audioCodec,a=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(k.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===a.indexOf("firefox")&&(o="mp4a.40.5"),-1!==a.indexOf("android")&&"audio/mpeg"!==n.container&&(o="mp4a.40.2",k.logger.log("Android: force audio codec to"+o)),n.levelCodec=o,n.id=t.id}if(n=i.video,n&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=t.id),t.unique){var s={codec:"",levelCodec:""};for(r in t.tracks)n=i[r],s.container=n.container,s.codec&&(s.codec+=",",s.levelCodec+=","),n.codec&&(s.codec+=n.codec),n.levelCodec&&(s.levelCodec+=n.levelCodec);i={audiovideo:s}}this.hls.trigger(g["default"].BUFFER_CODECS,i);for(r in i){n=i[r],k.logger.log("main track:"+r+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var u=n.initSegment;u&&(this.pendingAppending++,this.hls.trigger(g["default"].BUFFER_APPENDING,{type:r,data:u,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(t){var e=this,r=this.fragCurrent;if(r&&"main"===t.id&&t.sn===r.sn&&t.level===r.level&&("audio"!==t.type||!this.altAudio)&&this.state===E.PARSING){var n=this.levels[this.level],i=this.fragCurrent;k.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0));var o=b["default"].updateFragPTSDTS(n.details,i.sn,t.startPTS,t.endPTS,t.startDTS,t.endDTS),a=this.hls;a.trigger(g["default"].LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:o,type:t.type,start:t.startPTS,end:t.endPTS}),"video"===t.type&&(i.dropped=t.dropped),[t.data1,t.data2].forEach(function(r){r&&(e.pendingAppending++,a.trigger(g["default"].BUFFER_APPENDING,{type:t.type,data:r,parent:"main",content:"data"}))}),this.nextLoadPosition=t.endPTS,this.bufferRange.push({type:t.type,start:t.startPTS,end:t.endPTS,frag:i}),this.tick()}}},{key:"onFragParsed",value:function(t){var e=this.fragCurrent;e&&"main"===t.id&&t.sn===e.sn&&t.level===e.level&&this.state===E.PARSING&&(this.stats.tparsed=performance.now(),this.state=E.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitch",value:function(t){var e=!!t.url;if(e)this.videoBuffer&&this.mediaBuffer!==this.videoBuffer&&(k.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=this.videoBuffer);else if(this.mediaBuffer!==this.media){k.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(k.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=E.IDLE}this.altAudio=e}},{key:"onBufferCreated",value:function(t){var e=t.tracks,r=void 0,n=void 0,i=!1;for(var o in e){var a=e[o];"main"===a.id?(n=o,r=a,"video"===o&&(this.videoBuffer=e[o].buffer)):i=!0}i&&r?(k.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(t){if("main"===t.parent)switch(this.state){case E.PARSING:case E.PARSED:this.pendingAppending--,this._checkAppendedParsed()}}},{key:"_checkAppendedParsed",value:function(){if(this.state===E.PARSED&&0===this.pendingAppending){var t=this.fragCurrent,e=this.stats;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*e.total/(e.tbuffered-e.tfirst)),this.hls.trigger(g["default"].FRAG_BUFFERED,{stats:e,frag:t,id:"main"});var r=this.mediaBuffer?this.mediaBuffer:this.media;k.logger.log("main buffered : "+T["default"].toString(r.buffered)),this.state=E.IDLE}this.tick()}}},{key:"onError",value:function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var r=this.media,n=r&&d["default"].isBuffered(r,r.currentTime)&&d["default"].isBuffered(r,r.currentTime+.5);switch(t.details){case w.ErrorDetails.FRAG_LOAD_ERROR:case w.ErrorDetails.FRAG_LOAD_TIMEOUT:case w.ErrorDetails.KEY_LOAD_ERROR:case w.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal){var i=this.fragLoadError;i?i++:i=1;var o=this.config;if(i<=o.fragLoadingMaxRetry||n||e.autoLevel&&e.level){this.fragLoadError=i,e.loadCounter=0;var a=Math.min(Math.pow(2,i-1)*o.fragLoadingRetryDelay,o.fragLoadingMaxRetryTimeout);k.logger.warn("mediaController: frag loading failed, retry in "+a+" ms"),this.retryDate=performance.now()+a,this.state=E.FRAG_LOADING_WAITING_RETRY}else k.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.trigger(g["default"].ERROR,t),this.state=E.ERROR}break;case w.ErrorDetails.FRAG_LOOP_LOADING_ERROR:t.fatal||(n?(this._reduceMaxBufferLength(e.duration),this.state=E.IDLE):e.autoLevel&&0!==e.level||(t.fatal=!0,this.hls.trigger(g["default"].ERROR,t),this.state=E.ERROR));break;case w.ErrorDetails.LEVEL_LOAD_ERROR:case w.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==E.ERROR&&(t.fatal?(this.state=E.ERROR,k.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):this.state===E.WAITING_LEVEL&&(this.state=E.IDLE));break;case w.ErrorDetails.BUFFER_FULL_ERROR:this.state!==E.PARSING&&this.state!==E.PARSED||(n?(this._reduceMaxBufferLength(e.duration),this.state=E.IDLE):(k.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.state=E.PAUSED,this.hls.trigger(g["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY})))}}}},{key:"_reduceMaxBufferLength",value:function(t){var e=this.config;e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,k.logger.warn("reduce max buffer length to "+e.maxMaxBufferLength+"s and switch to IDLE state"),this.fragLoadIdx+=2*e.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var t=this.media;if(t&&t.readyState){var e=t.currentTime,r=t.buffered;if(!this.loadedmetadata&&r.length){this.loadedmetadata=!0;var n=this.startPosition,i=d["default"].isBuffered(t,n);e===n&&i||(k.logger.log("target start position:"+n),i||(n=r.start(0),k.logger.log("target start position not buffered, seek to buffered.start(0) "+n)),k.logger.log("adjust currentTime from "+e+" to "+n),t.currentTime=n)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var o=d["default"].bufferInfo(t,e,0),a=!(t.paused||t.ended||0===t.buffered.length),s=.5,u=e>t.playbackRate*this.lastCurrentTime,l=this.config;if(this.stalled&&u&&(this.stalled=!1,k.logger.log("playback not stuck anymore @"+e)),a&&o.len<=s&&(u?(s=0,this.seekHoleNudgeDuration=0):this.stalled?this.seekHoleNudgeDuration+=l.seekHoleNudgeDuration:(this.seekHoleNudgeDuration=0,k.logger.log("playback seems stuck @"+e),this.hls.trigger(g["default"].ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1}),this.stalled=!0),o.len<=s)){var c=o.nextStart,f=c-e;if(c&&f<l.maxSeekHole&&f>0){k.logger.log("adjust currentTime from "+t.currentTime+" to next buffered @ "+c+" + nudge "+this.seekHoleNudgeDuration);var h=c+this.seekHoleNudgeDuration-t.currentTime;t.currentTime=c+this.seekHoleNudgeDuration,this.hls.trigger(g["default"].ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:h})}}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=E.IDLE,this.loadedmetadata||(this.startFragRequested=!1),this.tick()}},{key:"onBufferFlushed",value:function(){var t=this.mediaBuffer?this.mediaBuffer:this.media,e=this.bufferRange,r=[],n=void 0,i=void 0;for(i=0;i<e.length;i++)n=e[i],d["default"].isBuffered(t,(n.start+n.end)/2)&&r.push(n);this.bufferRange=r,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=E.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(t,e){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-r)}},{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,k.logger.log("engine state transition from "+e+" to "+t),this.hls.trigger(g["default"].STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferRange(t.currentTime);if(e)return e.frag.level}return-1}},{key:"nextBufferRange",get:function(){var t=this.media;return t?this.followingBufferRange(this.getBufferRange(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferRange;return t?t.frag.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(v["default"]);r["default"]=S},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,47:47}],13:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(28),l=n(u),c=t(27),d=n(c),f=t(42),h=n(f),p=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l["default"].MEDIA_ATTACHING,l["default"].MEDIA_DETACHING,l["default"].FRAG_PARSING_USERDATA,l["default"].MANIFEST_LOADING,l["default"].FRAG_LOADED,l["default"].LEVEL_SWITCH));if(r.hls=t,r.config=t.config,r.enabled=!0,r.Cues=t.config.cueHandler,r.config.enableCEA708Captions){var n=r,a={newCue:function(t,e,r){if(!n.textTrack1){var i=n.getExistingTrack("1");if(i){n.textTrack1=i,n.clearCurrentCues(n.textTrack1);var o=new window.Event("addtrack");o.track=n.textTrack1,n.media.dispatchEvent(o)}else n.textTrack1=n.createTextTrack("captions","English","en"),n.textTrack1.textTrack1=!0}n.Cues.newCue(n.textTrack1,t,e,r)}},s={newCue:function(t,e,r){if(!n.textTrack2){var i=n.getExistingTrack("2");if(i){n.textTrack2=i,n.clearCurrentCues(n.textTrack2);var o=new window.Event("addtrack");o.track=n.textTrack2,n.media.dispatchEvent(o)}else n.textTrack2=n.createTextTrack("captions","Spanish","es"),n.textTrack2.textTrack2=!0}n.Cues.newCue(n.textTrack2,t,e,r)}};r.cea608Parser=new h["default"](0,a,s)}return r}return a(e,t),s(e,[{key:"clearCurrentCues",value:function(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}},{key:"getExistingTrack",value:function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var n=e.textTracks[r],i="textTrack"+t;if(n[i]===!0)return n}return null}},{key:"createTextTrack",value:function(t,e,r){return this.media?this.media.addTextTrack(t,e,r):void 0}},{key:"destroy",value:function(){d["default"].prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(t){this.media=t.media}},{key:"onMediaDetaching",value:function(){}},{key:"onManifestLoading",value:function(){this.lastPts=Number.NEGATIVE_INFINITY}},{key:"onLevelSwitch",value:function(){"NONE"===this.hls.currentLevel.closedCaptions?this.enabled=!1:this.enabled=!0}},{key:"onFragLoaded",value:function(t){if("main"===t.frag.type){var e=t.frag.start;e<=this.lastPts&&(this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)),this.lastPts=e}}},{key:"onFragParsingUserdata",value:function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var r=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,r)}}},{key:"extractCea608Data",value:function(t){for(var e,r,n,i,o,a=31&t[0],s=2,u=[],l=0;a>l;l++)e=t[s++],r=127&t[s++],n=127&t[s++],i=0!==(4&e),o=3&e,0===r&&0===n||i&&0===o&&(u.push(r),u.push(n));return u}}]),e}(d["default"]);r["default"]=p},{27:27,28:28,42:42}],14:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this.aesIV=e}return i(t,[{key:"decrypt",value:function(t,e){return window.crypto.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)}}]),t}();r["default"]=o},{}],15:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){n(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[],this.subMix[0]=new Uint32Array(256),this.subMix[1]=new Uint32Array(256),this.subMix[2]=new Uint32Array(256),this.subMix[3]=new Uint32Array(256),this.invSubMix=[],this.invSubMix[0]=new Uint32Array(256),this.invSubMix[1]=new Uint32Array(256),this.invSubMix[2]=new Uint32Array(256),this.invSubMix[3]=new Uint32Array(256),this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return i(t,[{key:"uint8ArrayToUint32Array_",value:function(t){for(var e=new DataView(t),r=new Uint32Array(4),n=0;n<r.length;n++)r[n]=e.getUint32(4*n);return r}},{key:"initTable",value:function(){var t=this.sBox,e=this.invSBox,r=this.subMix[0],n=this.subMix[1],i=this.subMix[2],o=this.subMix[3],a=this.invSubMix[0],s=this.invSubMix[1],u=this.invSubMix[2],l=this.invSubMix[3],c=new Uint32Array(256),d=0,f=0,h=0;for(h=0;256>h;h++)128>h?c[h]=h<<1:c[h]=h<<1^283;for(h=0;256>h;h++){var p=f^f<<1^f<<2^f<<3^f<<4;p=p>>>8^255&p^99,t[d]=p,e[p]=d;var g=c[d],y=c[g],v=c[y],m=257*c[p]^16843008*p;r[d]=m<<24|m>>>8,n[d]=m<<16|m>>>16,i[d]=m<<8|m>>>24,o[d]=m,m=16843009*v^65537*y^257*g^16843008*d,a[p]=m<<24|m>>>8,s[p]=m<<16|m>>>16,u[p]=m<<8|m>>>24,l[p]=m,d?(d=g^c[c[c[v^g]]],f^=c[c[f]]):d=f=1}}},{key:"expandKey",value:function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,n=0;n<e.length&&r;)r=e[n]===this.key[n],n++;if(!r){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o=this.ksRows=4*(i+6+1),a=void 0,s=void 0,u=this.keySchedule=new Uint32Array(this.ksRows),l=this.invKeySchedule=new Uint32Array(this.ksRows),c=this.sBox,d=this.rcon,f=this.invSubMix[0],h=this.invSubMix[1],p=this.invSubMix[2],g=this.invSubMix[3],y=void 0,v=void 0;for(a=0;o>a;a++)i>a?y=u[a]=e[a]:(v=y,a%i===0?(v=v<<8|v>>>24,v=c[v>>>24]<<24|c[v>>>16&255]<<16|c[v>>>8&255]<<8|c[255&v],v^=d[a/i|0]<<24):i>6&&a%i===4&&(v=c[v>>>24]<<24|c[v>>>16&255]<<16|c[v>>>8&255]<<8|c[255&v]),u[a]=y=(u[a-i]^v)>>>0);for(s=0;o>s;s++)a=o-s,v=3&s?u[a]:u[a-4],4>s||4>=a?l[s]=v:l[s]=f[c[v>>>24]]^h[c[v>>>16&255]]^p[c[v>>>8&255]]^g[c[255&v]],l[s]=l[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}},{key:"decrypt",value:function(t,e,r){for(var n,i,o=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,u=this.invSubMix[0],l=this.invSubMix[1],c=this.invSubMix[2],d=this.invSubMix[3],f=this.uint8ArrayToUint32Array_(r),h=f[0],p=f[1],g=f[2],y=f[3],v=new Int32Array(t),m=new Int32Array(v.length),b=void 0,_=void 0,T=void 0,w=void 0,k=void 0,E=void 0,S=void 0,O=void 0,j=void 0,C=void 0,x=void 0,A=void 0;e<v.length;){for(j=this.networkToHostOrderSwap(v[e]),C=this.networkToHostOrderSwap(v[e+1]),x=this.networkToHostOrderSwap(v[e+2]),A=this.networkToHostOrderSwap(v[e+3]),k=j^a[0],E=A^a[1],S=x^a[2],O=C^a[3],n=4,i=1;o>i;i++)b=u[k>>>24]^l[E>>16&255]^c[S>>8&255]^d[255&O]^a[n],_=u[E>>>24]^l[S>>16&255]^c[O>>8&255]^d[255&k]^a[n+1],T=u[S>>>24]^l[O>>16&255]^c[k>>8&255]^d[255&E]^a[n+2],w=u[O>>>24]^l[k>>16&255]^c[E>>8&255]^d[255&S]^a[n+3],k=b,E=_,S=T,O=w,n+=4;b=s[k>>>24]<<24^s[E>>16&255]<<16^s[S>>8&255]<<8^s[255&O]^a[n],_=s[E>>>24]<<24^s[S>>16&255]<<16^s[O>>8&255]<<8^s[255&k]^a[n+1],T=s[S>>>24]<<24^s[O>>16&255]<<16^s[k>>8&255]<<8^s[255&E]^a[n+2],w=s[O>>>24]<<24^s[k>>16&255]<<16^s[E>>8&255]<<8^s[255&S]^a[n+3],n+=3,m[e]=this.networkToHostOrderSwap(b^h),m[e+1]=this.networkToHostOrderSwap(w^p),m[e+2]=this.networkToHostOrderSwap(T^g),m[e+3]=this.networkToHostOrderSwap(_^y),h=j,p=C,g=x,y=A,e+=4}return m.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),t}();r["default"]=o},{}],16:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t(14),s=n(a),u=t(17),l=n(u),c=t(15),d=n(c),f=t(26),h=t(45),p=function(){function t(t){i(this,r),this.hls=t;try{var e=window?window.crypto:crypto;this.subtle=e.subtle||e.webkitSubtle}catch(r){}this.disableWebCrypto=!this.supportsWebCrypto()}return o(t,[{key:"supportsWebCrypto",value:function(){return this.subtle&&"https:"===window.location.protocol;
}},{key:"decrypt",value:function(t,e,r,n){var i=this;this.disableWebCrypto&&this.hls.config.enableSoftwareAES?(h.logger.log("decrypting by JavaScript Implementation"),this.decryptor||(this.decryptor=new d["default"]),this.decryptor.expandKey(e),n(this.decryptor.decrypt(t,0,r))):(h.logger.log("decrypting by WebCrypto API"),this.key!==e&&(this.key=e,this.fastAesKey=new l["default"](e)),this.fastAesKey.expandKey().then(function(e){var i=new s["default"](r);i.decrypt(t,e).then(function(t){n(t)})})["catch"](function(o){i.onWebCryptoError(o,t,e,r,n)}))}},{key:"onWebCryptoError",value:function(t,e,r,n,i){this.hls.config.enableSoftwareAES?(h.logger.log("disabling to use WebCrypto API"),this.disableWebCrypto=!0,this.decrypt(e,r,n,i)):(h.logger.error("decrypting error : "+t.message),this.hls.trigger(Event.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))}},{key:"destroy",value:function(){this.decryptor&&(this.decryptor.destroy(),this.decryptor=void 0)}}]),t}();r["default"]=p},{14:14,15:15,17:17,26:26,45:45}],17:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this.key=e}return i(t,[{key:"expandKey",value:function(){return window.crypto.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),t}();r["default"]=o},{}],18:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t(19),s=n(a),u=t(45),l=t(24),c=n(l),d=function(){function t(e,r,n,o,a){i(this,t),this.observer=e,this.id=r,this.remuxerClass=n,this.config=o,this.remuxer=new this.remuxerClass(e,r,o,a),this.insertDiscontinuity()}return o(t,[{key:"insertDiscontinuity",value:function(){this._aacTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0}}},{key:"push",value:function(t,e,r,n,i,o,a,l,d){var f,h,p,g,y,v,m,b,_,T,w=new c["default"](t),k=90*w.timeStamp,E=!1;for(i!==this.lastCC?(u.logger.log(this.id+" discontinuity detected"),this.lastCC=i,this.insertDiscontinuity(),this.remuxer.switchLevel(),this.remuxer.insertDiscontinuity()):o!==this.lastLevel?(u.logger.log("audio track switch detected"),this.lastLevel=o,this.remuxer.switchLevel(),this.insertDiscontinuity()):a===this.lastSN+1&&(E=!0),f=this._aacTrack,this.lastSN=a,this.lastLevel=o,v=w.length,_=t.length;_-1>v&&(255!==t[v]||240!==(240&t[v+1]));v++);for(f.audiosamplerate||(h=s["default"].getAudioConfig(this.observer,t,v,e),f.config=h.config,f.audiosamplerate=h.samplerate,f.channelCount=h.channelCount,f.codec=h.codec,f.duration=l,u.logger.log("parsed codec:"+f.codec+",rate:"+h.samplerate+",nb channel:"+h.channelCount)),y=0,g=9216e4/f.audiosamplerate;_>v+5&&(m=1&t[v+1]?7:9,p=(3&t[v+3])<<11|t[v+4]<<3|(224&t[v+5])>>>5,p-=m,p>0&&_>=v+m+p);)for(b=k+y*g,T={unit:t.subarray(v+m,v+m+p),pts:b,dts:b},f.samples.push(T),f.len+=p,v+=p+m,y++;_-1>v&&(255!==t[v]||240!==(240&t[v+1]));v++);this.remuxer.remux(o,a,this._aacTrack,{samples:[]},{samples:[{pts:k,dts:k,unit:w.payload}]},{samples:[]},n,E,d)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(t){var e,r,n=new c["default"](t);if(n.hasTimeStamp)for(e=n.length,r=t.length;r-1>e;e++)if(255===t[e]&&240===(240&t[e+1]))return!0;return!1}}]),t}();r["default"]=d},{19:19,24:24,45:45}],19:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t(45),a=t(26),s=function(){function t(){n(this,t)}return i(t,null,[{key:"getAudioConfig",value:function(t,e,r,n){var i,s,u,l,c,d=navigator.userAgent.toLowerCase(),f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=((192&e[r+2])>>>6)+1,s=(60&e[r+2])>>>2,s>f.length-1?void t.trigger(Event.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(l=(1&e[r+2])<<2,l|=(192&e[r+3])>>>6,o.logger.log("manifest codec:"+n+",ADTS data:type:"+i+",sampleingIndex:"+s+"["+f[s]+"Hz],channelConfig:"+l),/firefox|OPR/i.test(d)?s>=6?(i=5,c=new Array(4),u=s-3):(i=2,c=new Array(2),u=s):-1!==d.indexOf("android")?(i=2,c=new Array(2),u=s):(i=5,c=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&s>=6?u=s-3:((n&&-1!==n.indexOf("mp4a.40.2")&&s>=6&&1===l||!n&&1===l)&&(i=2,c=new Array(2)),u=s)),c[0]=i<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=l<<3,5===i&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:f[s],channelCount:l,codec:"mp4a.40."+i})}}]),t}();r["default"]=s},{26:26,45:45}],20:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t(28),s=n(a),u=t(26),l=t(18),c=n(l),d=t(25),f=n(d),h=t(38),p=n(h),g=t(39),y=n(g),v=function(){function t(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i(this,t),this.hls=e,this.id=r,this.config=this.hls.config||o,this.typeSupported=n}return o(t,[{key:"destroy",value:function(){var t=this.demuxer;t&&t.destroy()}},{key:"push",value:function(t,e,r,n,i,o,a,l,d){var h=this.demuxer;if(!h){var g=this.hls,v=this.id,m=this.config,b=this.typeSupported;if(f["default"].probe(t))h=this.typeSupported.mp2t===!0?new f["default"](g,v,y["default"],m,b):new f["default"](g,v,p["default"],m,b);else{if(!c["default"].probe(t))return void g.trigger(s["default"].ERROR,{type:u.ErrorTypes.MEDIA_ERROR,id:v,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});h=new c["default"](g,v,p["default"],m,b)}this.demuxer=h}h.push(t,e,r,n,i,o,a,l,d)}}]),t}();r["default"]=v},{18:18,25:25,26:26,28:28,38:38,39:39}],21:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(r,"__esModule",{value:!0});var i=t(20),o=n(i),a=t(28),s=n(a),u=t(45),l=t(1),c=n(l),d=function(t){var e=new c["default"];e.trigger=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;r>i;i++)n[i-1]=arguments[i];e.emit.apply(e,[t,t].concat(n))},e.off=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;r>i;i++)n[i-1]=arguments[i];e.removeListener.apply(e,[t].concat(n))};var r=function(e,r){t.postMessage({event:e,data:r})};t.addEventListener("message",function(t){var n=t.data;switch(n.cmd){case"init":var i=JSON.parse(n.config);a.demuxer=new o["default"](e,n.id,n.typeSupported,i);try{(0,u.enableLogs)(i.debug===!0)}catch(a){}r("init",null);break;case"demux":a.demuxer.push(new Uint8Array(n.data),n.audioCodec,n.videoCodec,n.timeOffset,n.cc,n.level,n.sn,n.duration,n.accurateTimeOffset)}}),e.on(s["default"].FRAG_PARSING_INIT_SEGMENT,r),e.on(s["default"].FRAG_PARSED,r),e.on(s["default"].ERROR,r),e.on(s["default"].FRAG_PARSING_METADATA,r),e.on(s["default"].FRAG_PARSING_USERDATA,r),e.on(s["default"].FRAG_PARSING_DATA,function(e,r){var n=r.data1.buffer,i=r.data2.buffer;delete r.data1,delete r.data2,t.postMessage({event:e,data:r,data1:n,data2:i},[n,i])})};r["default"]=d},{1:1,20:20,28:28,45:45}],22:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t(28),s=n(a),u=t(20),l=n(u),c=t(21),d=n(c),f=t(45),h=t(16),p=n(h),g=t(26),y=function(){function t(e,r){i(this,t),this.hls=e,this.id=r;var n={mp4:MediaSource.isTypeSupported("video/mp4"),mp2t:e.config.enableMP2TPassThrough&&MediaSource.isTypeSupported("video/mp2t"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')};if(e.config.enableWorker&&"undefined"!=typeof Worker){f.logger.log("demuxing in webworker");var o=void 0;try{var a=u(3);o=this.w=a(d["default"]),this.onwmsg=this.onWorkerMessage.bind(this),o.addEventListener("message",this.onwmsg),o.onerror=function(t){e.trigger(s["default"].ERROR,{type:g.ErrorTypes.OTHER_ERROR,details:g.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},o.postMessage({cmd:"init",typeSupported:n,id:r,config:JSON.stringify(e.config)})}catch(u){f.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),o&&URL.revokeObjectURL(o.objectURL),this.demuxer=new l["default"](e,r,n)}}else this.demuxer=new l["default"](e,r,n);this.demuxInitialized=!0}return o(t,[{key:"destroy",value:function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var r=this.decrypter;r&&(r.destroy(),this.decrypter=null)}},{key:"pushDecrypted",value:function(t,e,r,n,i,o,a,s,u){var l=this.w;if(l)l.postMessage({cmd:"demux",data:t,audioCodec:e,videoCodec:r,timeOffset:n,cc:i,level:o,sn:a,duration:s,accurateTimeOffset:u},[t]);else{var c=this.demuxer;c&&c.push(new Uint8Array(t),e,r,n,i,o,a,s,u)}}},{key:"push",value:function(t,e,r,n,i,o,a,u,l,c){if(t.byteLength>0&&null!=l&&null!=l.key&&"AES-128"===l.method){null==this.decrypter&&(this.decrypter=new p["default"](this.hls));var d=this,f=performance.now();this.decrypter.decrypt(t,l.key.buffer,l.iv.buffer,function(t){d.hls.trigger(s["default"].FRAG_DECRYPTED,{level:o,sn:a,stats:{tstart:f,tdecrypt:performance.now()}}),d.pushDecrypted(t,e,r,n,i,o,a,u,c)})}else this.pushDecrypted(t,e,r,n,i,o,a,u,c)}},{key:"onWorkerMessage",value:function(t){var e=t.data,r=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s["default"].FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data.data2=new Uint8Array(e.data2);default:r.trigger(e.event,e.data)}}}]),t}();r["default"]=y},{16:16,20:20,21:21,26:26,28:28,3:3,45:45}],23:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t(45),a=function(){function t(e){n(this,t),this.data=e,this.bytesAvailable=this.data.byteLength,this.word=0,this.bitsAvailable=0}return i(t,[{key:"loadWord",value:function(){var t=this.data.byteLength-this.bytesAvailable,e=new Uint8Array(4),r=Math.min(4,this.bytesAvailable);if(0===r)throw new Error("no bytes available");e.set(this.data.subarray(t,t+r)),this.word=new DataView(e.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r}},{key:"skipBits",value:function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)}},{key:"readBits",value:function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&o.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?r<<e|this.readBits(e):r}},{key:"skipLZ",value:function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!==(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var t=this.skipLZ();return this.readBits(t+1)-1}},{key:"readEG",value:function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(t){var e,r,n=8,i=8;for(e=0;t>e;e++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i}},{key:"readSPS",value:function(){var t,e,r,n,i,o,a,s,u,l=0,c=0,d=0,f=0,h=1;if(this.readUByte(),t=this.readUByte(),e=this.readBits(5),this.skipBits(3),r=this.readUByte(),this.skipUEG(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var p=this.readUEG();if(3===p&&this.skipBits(1),this.skipUEG(),this.skipUEG(),this.skipBits(1),this.readBoolean())for(s=3!==p?8:12,u=0;s>u;u++)this.readBoolean()&&(6>u?this.skipScalingList(16):this.skipScalingList(64))}this.skipUEG();var g=this.readUEG();if(0===g)this.readUEG();else if(1===g)for(this.skipBits(1),this.skipEG(),this.skipEG(),n=this.readUEG(),u=0;n>u;u++)this.skipEG();if(this.skipUEG(),this.skipBits(1),i=this.readUEG(),o=this.readUEG(),a=this.readBits(1),0===a&&this.skipBits(1),this.skipBits(1),this.readBoolean()&&(l=this.readUEG(),c=this.readUEG(),d=this.readUEG(),f=this.readUEG()),this.readBoolean()&&this.readBoolean()){var y=void 0,v=this.readUByte();switch(v){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[this.readUByte()<<8|this.readUByte(),this.readUByte()<<8|this.readUByte()]}y&&(h=y[0]/y[1])}return{width:Math.ceil((16*(i+1)-2*l-2*c)*h),height:(2-a)*(o+1)*16-(a?2:4)*(d+f)}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),t}();r["default"]=a},{45:45}],24:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t(45),a=function(){function t(e){n(this,t),this._hasTimeStamp=!1;for(var r,i,a,s,u,l,c,d,f=0;;)if(c=this.readUTF(e,f,3),f+=3,"ID3"===c)f+=3,r=127&e[f++],i=127&e[f++],a=127&e[f++],s=127&e[f++],u=(r<<21)+(i<<14)+(a<<7)+s,l=f+u,this._parseID3Frames(e,f,l),f=l;else{if("3DI"!==c)return f-=3,d=f,void(d&&(this.hasTimeStamp||o.logger.warn("ID3 tag found, but no timestamp"),this._length=d,this._payload=e.subarray(0,d)));f+=7,o.logger.log("3DI footer found, end: "+f)}}return i(t,[{key:"readUTF",value:function(t,e,r){var n="",i=e,o=e+r;do n+=String.fromCharCode(t[i++]);while(o>i);return n}},{key:"_parseID3Frames",value:function(t,e,r){for(var n,i,a,s,u;r>=e+8;)switch(n=this.readUTF(t,e,4),e+=4,i=t[e++]<<24+t[e++]<<16+t[e++]<<8+t[e++],s=t[e++]<<8+t[e++],a=e,n){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(t,e,44)){e+=44,e+=4;var l=1&t[e++];this._hasTimeStamp=!0,u=((t[e++]<<23)+(t[e++]<<15)+(t[e++]<<7)+t[e++])/45,l&&(u+=47721858.84),u=Math.round(u),o.logger.trace("ID3 timestamp found: "+u),this._timeStamp=u}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),t}();r["default"]=a},{45:45}],25:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t(19),s=n(a),u=t(28),l=n(u),c=t(23),d=n(c),f=t(45),h=t(26),p=function(){function t(e,r,n,o,a){i(this,t),this.observer=e,this.id=r,this.remuxerClass=n,this.config=o,this.typeSupported=a,this.lastCC=0,this.remuxer=new this.remuxerClass(e,r,o,a)}return o(t,[{key:"switchLevel",value:function(){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.remuxer.switchLevel()}},{key:"insertDiscontinuity",value:function(){this.switchLevel(),this.remuxer.insertDiscontinuity()}},{key:"push",value:function(t,e,r,n,i,o,a,s,u){var c,d,p,g,y,v,m=t.length,b=this.remuxer.passthrough,_=!1;this.audioCodec=e,this.videoCodec=r,this._duration=s,this.contiguous=!1,this.accurateTimeOffset=u,i!==this.lastCC&&(f.logger.log("discontinuity detected"),this.insertDiscontinuity(),this.lastCC=i),o!==this.lastLevel?(f.logger.log("level switch detected"),this.switchLevel(),this.lastLevel=o):a===this.lastSN+1&&(this.contiguous=!0),this.lastSN=a;var T=this.pmtParsed,w=this._avcTrack,k=this._audioTrack,E=this._id3Track,S=w.id,O=k.id,j=E.id,C=this._pmtId,x=w.pesData,A=k.pesData,P=E.pesData,L=this._parsePAT,R=this._parsePMT,D=this._parsePES,M=this._parseAVCPES.bind(this),I=this._parseAACPES.bind(this),N=this._parseMPEGPES.bind(this),F=this._parseID3PES.bind(this);for(m-=m%188,c=0;m>c;c+=188)if(71===t[c]){if(d=!!(64&t[c+1]),p=((31&t[c+1])<<8)+t[c+2],g=(48&t[c+3])>>4,g>1){if(y=c+5+t[c+4],y===c+188)continue}else y=c+4;switch(p){case S:if(d){if(x&&(v=D(x))&&(M(v,!1),b&&w.codec&&(-1===O||k.codec)))return void this.remux(o,a,t,n);x={data:[],size:0}}x&&(x.data.push(t.subarray(y,c+188)),x.size+=c+188-y);break;case O:if(d){if(A&&(v=D(A))&&(k.isAAC?I(v):N(v),b&&k.codec&&(-1===S||w.codec)))return void this.remux(o,a,t,n);A={data:[],size:0}}A&&(A.data.push(t.subarray(y,c+188)),A.size+=c+188-y);break;case j:d&&(P&&(v=D(P))&&F(v),P={data:[],size:0}),P&&(P.data.push(t.subarray(y,c+188)),P.size+=c+188-y);break;case 0:d&&(y+=t[y]+1),C=this._pmtId=L(t,y);break;case C:d&&(y+=t[y]+1);var U=R(t,y,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0);S=U.avc,S>0&&(w.id=S),O=U.audio,O>0&&(k.id=O,k.isAAC=U.isAAC),j=U.id3,j>0&&(E.id=j),_&&!T&&(f.logger.log("reparse from beginning"),_=!1,c=-188),T=this.pmtParsed=!0;break;case 17:case 8191:break;default:_=!0}}else this.observer.trigger(l["default"].ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});x&&(v=D(x))?(M(v,!0),w.pesData=null):w.pesData=x,A&&(v=D(A))?(k.isAAC?I(v):N(v),k.pesData=null):(A&&A.size&&f.logger.log("last AAC PES packet truncated,might overlap between fragments"),k.pesData=A),P&&(v=D(P))?(F(v),E.pesData=null):E.pesData=P,this.remux(o,a,null,n)}},{key:"remux",value:function(t,e,r,n){for(var i=this._avcTrack,o=i.samples,a=0,s=0,u=0;u<o.length;u++){for(var l=o[u],c=l.units.units,d=c.length,f=0,h=0;d>h;h++)f+=c[h].data.length;s+=f,a+=d,l.length=f}i.len=s,i.nbNalu=a,this.remuxer.remux(t,e,this._audioTrack,this._avcTrack,this._id3Track,this._txtTrack,n,this.contiguous,this.accurateTimeOffset,r)}},{key:"destroy",value:function(){this.switchLevel(),this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(t,e){return(31&t[e+10])<<8|t[e+11]}},{key:"_parsePMT",value:function(t,e,r){var n,i,o,a,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(n=(15&t[e+1])<<8|t[e+2],i=e+3+n-4,o=(15&t[e+10])<<8|t[e+11],e+=12+o;i>e;){switch(a=(31&t[e+1])<<8|t[e+2],t[e]){case 15:-1===s.audio&&(s.audio=a);break;case 21:-1===s.id3&&(s.id3=a);break;case 27:-1===s.avc&&(s.avc=a);break;case 3:case 4:r?-1===s.audio&&(s.audio=a,s.isAAC=!1):f.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:f.logger.warn("HEVC stream type found, not supported for now");break;default:f.logger.log("unkown stream type:"+t[e])}e+=((15&t[e+3])<<8|t[e+4])+5}return s}},{key:"_parsePES",value:function(t){var e,r,n,i,o,a,s,u,l,c=0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(e=d[0],n=(e[0]<<16)+(e[1]<<8)+e[2],1===n){if(i=(e[4]<<8)+e[5],i&&i>t.size-6)return null;for(r=e[7],192&r&&(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,s>4294967295&&(s-=8589934592),64&r?(u=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,u>4294967295&&(u-=8589934592)):u=s),o=e[8],l=o+9,t.size-=l,a=new Uint8Array(t.size);d.length;){e=d.shift();var h=e.byteLength;if(l){if(l>h){l-=h;continue}e=e.subarray(l),h-=l,l=0}a.set(e,c),c+=h}return i&&(i-=o+3),{data:a,pts:s,dts:u,len:i}}return null}},{key:"pushAccesUnit",value:function(t,e){t.units.units.length&&t.frame&&(!this.config.forceKeyFrameOnDiscontinuity||t.key===!0||e.sps&&(e.samples.length||this.contiguous)?e.samples.push(t):e.dropped++),t.debug.length&&f.logger.log(t.pts+"/"+t.dts+":"+t.debug+","+t.units.length)}},{key:"_parseAVCPES",value:function(t,e){var r,n,i,o=this,a=this._avcTrack,s=this._parseAVCNALu(t.data),u=!1,l=this.avcSample;t.data=null,s.forEach(function(e){switch(e.type){case 1:n=!0,u&&l&&(l.debug+="NDR "),l.frame=!0;break;case 5:n=!0,l||(l=o.avcSample=o._createAVCSample(!0,t.pts,t.dts,"")),u&&(l.debug+="IDR "),l.key=!0,l.frame=!0;break;case 6:n=!0,u&&l&&(l.debug+="SEI "),r=new d["default"](o.discardEPB(e.data)),r.readUByte();for(var s=0,c=0,f=!1,h=0;!f&&r.bytesAvailable>1;){s=0;do h=r.readUByte(),s+=h;while(255===h);c=0;do h=r.readUByte(),c+=h;while(255===h);if(4===s&&0!==r.bytesAvailable){f=!0;var p=r.readUByte();if(181===p){var g=r.readUShort();if(49===g){var y=r.readUInt();if(1195456820===y){var v=r.readUByte();if(3===v){var m=r.readUByte(),b=r.readUByte(),_=31&m,T=[m,b];for(i=0;_>i;i++)T.push(r.readUByte()),T.push(r.readUByte()),T.push(r.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:t.pts,bytes:T})}}}}}else if(c<r.bytesAvailable)for(i=0;c>i;i++)r.readUByte()}break;case 7:if(n=!0,u&&l&&(l.debug+="SPS "),!a.sps){r=new d["default"](e.data);var w=r.readSPS();a.width=w.width,a.height=w.height,a.sps=[e.data],a.duration=o._duration;var k=e.data.subarray(1,4),E="avc1.";for(i=0;3>i;i++){var S=k[i].toString(16);S.length<2&&(S="0"+S),E+=S}a.codec=E}break;case 8:n=!0,u&&l&&(l.debug+="PPS "),a.pps||(a.pps=[e.data]);break;case 9:n=!1,l&&o.pushAccesUnit(l,a),l=o.avcSample=o._createAVCSample(!1,t.pts,t.dts,u?"AUD ":"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}if(l&&n){var O=l.units;O.units.push(e)}}),e&&l&&(this.pushAccesUnit(l,a),this.avcSample=null)}},{key:"_createAVCSample",value:function(t,e,r,n){return{key:t,pts:e,dts:r,units:{units:[],length:0},debug:n}}},{key:"_insertSampleInOrder",value:function(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var n=r-1;n>=0;n--)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)}},{key:"_getLastNalUnit",value:function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.units.length){var r=this._avcTrack,n=r.samples;t=n[n.length-1]}if(t){var i=t.units.units;e=i[i.length-1]}return e}},{key:"_parseAVCNALu",value:function(t){for(var e,r,n,i,o,a=0,s=t.byteLength,u=this._avcTrack,l=u.naluState||0,c=l,d=[],f=-1;s>a;)switch(e=t[a++],l){case 0:0===e&&(l=1);break;case 1:l=0===e?2:0;break;case 2:case 3:if(0===e)l=3;else if(1===e){if(f>=0)n={data:t.subarray(f,a-l-1),type:o},d.push(n);else{var h=this._getLastNalUnit();if(h&&(c&&4-c>=a&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-c)),r=a-l-1,r>0)){var p=new Uint8Array(h.data.byteLength+r);p.set(h.data,0),p.set(t.subarray(0,r),h.data.byteLength),h.data=p}}s>a?(i=31&t[a],f=a,o=i,l=0):l=-1}else l=0;break;case-1:f=0,o=31&e,l=0}if(f>=0&&l>=0&&(n={data:t.subarray(f,s),type:o,state:l},d.push(n)),0===d.length){var g=this._getLastNalUnit();if(g){var y=new Uint8Array(g.data.byteLength+t.byteLength);y.set(g.data,0),y.set(t,g.data.byteLength),g.data=y}}return u.naluState=l,d}},{key:"discardEPB",value:function(t){for(var e,r,n=t.byteLength,i=[],o=1;n-2>o;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return t;e=n-i.length,r=new Uint8Array(e);var a=0;for(o=0;e>o;a++,o++)a===i[0]&&(a++,i.shift()),r[o]=t[a];return r}},{key:"_parseAACPES",value:function(t){var e,r,n,i,o,a,u,c,d,p=this._audioTrack,g=t.data,y=t.pts,v=0,m=this.aacOverFlow,b=this.aacLastPTS;if(m){var _=new Uint8Array(m.byteLength+g.byteLength);_.set(m,0),_.set(g,m.byteLength),g=_}for(o=v,c=g.length;c-1>o&&(255!==g[o]||240!==(240&g[o+1]));o++);if(o){var T,w;if(c-1>o?(T="AAC PES did not start with ADTS header,offset:"+o,w=!1):(T="no ADTS header found in AAC PES",w=!0),f.logger.warn("parsing error:"+T),this.observer.trigger(l["default"].ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:w,reason:T}),w)return}if(p.audiosamplerate||(e=s["default"].getAudioConfig(this.observer,g,o,this.audioCodec),p.config=e.config,p.audiosamplerate=e.samplerate,p.channelCount=e.channelCount,p.codec=e.codec,p.duration=this._duration,f.logger.log("parsed codec:"+p.codec+",rate:"+e.samplerate+",nb channel:"+e.channelCount)),i=0,n=9216e4/p.audiosamplerate,m&&b){var k=b+n;Math.abs(k-y)>1&&(f.logger.log("AAC: align PTS for overlapping frames by "+Math.round((k-y)/90)),y=k)}for(;c>o+5&&(a=1&g[o+1]?7:9,r=(3&g[o+3])<<11|g[o+4]<<3|(224&g[o+5])>>>5,r-=a,r>0&&c>=o+a+r);)for(u=y+i*n,d={unit:g.subarray(o+a,o+a+r),pts:u,dts:u},p.samples.push(d),p.len+=r,o+=r+a,i++;c-1>o&&(255!==g[o]||240!==(240&g[o+1]));o++);m=c>o?g.subarray(o,c):null,this.aacOverFlow=m,this.aacLastPTS=u}},{key:"_parseMPEGPES",value:function(t){for(var e,r=t.data,n=t.pts,i=r.length,o=0,a=0;i>a&&(e=this._parseMpeg(r,a,i,o++,n))>0;)a+=e}},{key:"_onMpegFrame",value:function(t,e,r,n,i,o){var a=1152/r*1e3,s=o+i*a,u=this._audioTrack;u.config=[],u.channelCount=n,u.audiosamplerate=r,u.duration=this._duration,u.samples.push({unit:t,pts:s,dts:s}),u.len+=t.length}},{key:"_onMpegNoise",value:function(t){f.logger.warn("mpeg audio has noise: "+t.length+" bytes")}},{key:"_parseMpeg",value:function(t,e,r,n,i){var o=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];if(e+2>r)return-1;if(255===t[e]||224===(224&t[e+1])){if(e+24>r)return-1;var s=t[e+1]>>3&3,u=t[e+1]>>1&3,l=t[e+2]>>4&15,c=t[e+2]>>2&3,d=!!(2&t[e+2]);if(1!==s&&0!==l&&15!==l&&3!==c){var f=3===s?3-u:3===u?3:4,h=1e3*o[14*f+l-1],p=3===s?0:2===s?1:2,g=a[3*p+c],y=d?1:0,v=t[e+3]>>6===3?1:2,m=3===u?(3===s?12:6)*h/g+y<<2:(3===s?144:72)*h/g+y|0;return e+m>r?-1:(this._onMpegFrame&&this._onMpegFrame(t.subarray(e,e+m),h,g,v,n,i),m)}}for(var b=e+2;r>b;){if(255===t[b-1]&&224===(224&t[b]))return this._onMpegNoise&&this._onMpegNoise(t.subarray(e,b-1)),b-e-1;b++}return-1}},{key:"_parseID3PES",value:function(t){this._id3Track.samples.push(t)}}],[{key:"probe",value:function(t){return t.length>=564&&71===t[0]&&71===t[188]&&71===t[376]}}]),t}();r["default"]=p},{19:19,23:23,26:26,28:28,45:45}],26:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",OTHER_ERROR:"otherError"},r.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",INTERNAL_EXCEPTION:"internalException"}},{}],27:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t(45),u=t(26),l=t(28),c=n(l),d=function(){function t(e){i(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;r>o;o++)n[o-1]=arguments[o];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return a(t,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===o(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if("hlsEventGeneric"===t)throw new Error("Forbidden event name: "+t);this.hls.on(t,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(t,e){this.onEventGeneric(t,e)}},{key:"onEventGeneric",value:function(t,e){var r=function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)};try{r.call(this,t,e).call()}catch(e){s.logger.error("internal error happened while processing "+t+":"+e.message),this.hls.trigger(c["default"].ERROR,{
type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}}}]),t}();r["default"]=d},{26:26,28:28,45:45}],28:[function(t,e,r){"use strict";e.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVEL_SWITCH:"hlsLevelSwitch",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],29:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){n(this,t)}return i(t,null,[{key:"getSilentFrame",value:function(t){return 1===t?new Uint8Array([0,200,0,128,35,128]):2===t?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===t?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):null}}]),t}();r["default"]=o},{}],30:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){n(this,t)}return i(t,null,[{key:"isBuffered",value:function(t,e){if(t)for(var r=t.buffered,n=0;n<r.length;n++)if(e>=r.start(n)&&e<=r.end(n))return!0;return!1}},{key:"bufferInfo",value:function(t,e,r){if(t){var n,i=t.buffered,o=[];for(n=0;n<i.length;n++)o.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(o,e,r)}return{len:0,start:0,end:0,nextStart:void 0}}},{key:"bufferedInfo",value:function(t,e,r){var n,i,o,a,s,u=[];for(t.sort(function(t,e){var r=t.start-e.start;return r?r:e.end-t.end}),s=0;s<t.length;s++){var l=u.length;if(l){var c=u[l-1].end;t[s].start-c<r?t[s].end>c&&(u[l-1].end=t[s].end):u.push(t[s])}else u.push(t[s])}for(s=0,n=0,i=o=e;s<u.length;s++){var d=u[s].start,f=u[s].end;if(e+r>=d&&f>e)i=d,o=f,n=o-e;else if(d>e+r){a=d;break}}return{len:n,start:i,end:o,nextStart:a}}}]),t}();r["default"]=o},{}],31:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t(45),a=function(){function t(){n(this,t)}return i(t,null,[{key:"mergeDetails",value:function(e,r){var n,i=Math.max(e.startSN,r.startSN)-r.startSN,a=Math.min(e.endSN,r.endSN)-r.startSN,s=r.startSN-e.startSN,u=e.fragments,l=r.fragments,c=0;if(i>a)return void(r.PTSKnown=!1);for(var d=i;a>=d;d++){var f=u[s+d],h=l[d];h&&f&&(c=f.cc-h.cc,isNaN(f.startPTS)||(h.start=h.startPTS=f.startPTS,h.endPTS=f.endPTS,h.duration=f.duration,n=h))}if(c)for(o.logger.log("discontinuity sliding from playlist, take drift into account"),d=0;d<l.length;d++)l[d].cc+=c;if(n)t.updateFragPTSDTS(r,n.sn,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(s>=0&&s<u.length){var p=u[s].start;for(d=0;d<l.length;d++)l[d].start+=p}r.PTSKnown=e.PTSKnown}},{key:"updateFragPTSDTS",value:function(e,r,n,i,o,a){var s,u,l,c;if(r<e.startSN||r>e.endSN)return 0;if(s=r-e.startSN,u=e.fragments,l=u[s],!isNaN(l.startPTS)){var d=Math.abs(l.startPTS-n);isNaN(l.deltaPTS)?l.deltaPTS=d:l.deltaPTS=Math.max(d,l.deltaPTS),n=Math.min(n,l.startPTS),i=Math.max(i,l.endPTS),o=Math.min(o,l.startDTS),a=Math.max(a,l.endDTS)}var f=n-l.start;for(l.start=l.startPTS=n,l.endPTS=i,l.startDTS=o,l.endDTS=a,l.duration=i-n,c=s;c>0;c--)t.updatePTS(u,c,c-1);for(c=s;c<u.length-1;c++)t.updatePTS(u,c,c+1);return e.PTSKnown=!0,f}},{key:"updatePTS",value:function(t,e,r){var n=t[e],i=t[r],a=i.startPTS;isNaN(a)?r>e?i.start=n.start+n.duration:i.start=n.start-i.duration:r>e?(n.duration=a-n.start,n.duration<0&&o.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-a,i.duration<0&&o.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}}]),t}();r["default"]=a},{45:45}],32:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t(28),s=n(a),u=t(26),l=t(36),c=n(l),d=t(34),f=n(d),h=t(4),p=n(h),g=t(7),y=n(g),v=t(8),m=n(v),b=t(5),_=n(b),T=t(12),w=n(T),k=t(11),E=n(k),S=t(13),O=n(S),j=t(10),C=n(j),x=t(6),A=n(x),P=t(45),L=t(48),R=n(L),D=t(1),M=n(D),I=t(35),N=n(I),F=t(43),U=n(F),B=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var r=t.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var n in r)n in e||(e[n]=r[n]);if(void 0!==e.liveMaxLatencyDurationCount&&e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(e.liveMaxLatencyDuration<=e.liveSyncDuration||void 0===e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,P.enableLogs)(e.debug),this.config=e;var o=this.observer=new M["default"];o.trigger=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];o.emit.apply(o,[t,t].concat(r))},o.off=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];o.removeListener.apply(o,[t].concat(r))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o),this.playlistLoader=new c["default"](this),this.fragmentLoader=new f["default"](this),this.levelController=new E["default"](this),this.abrController=new e.abrController(this),this.bufferController=new e.bufferController(this),this.capLevelController=new e.capLevelController(this),this.fpsController=new e.fpsController(this),this.streamController=new e.streamController(this),this.audioStreamController=new e.audioStreamController(this),this.timelineController=new e.timelineController(this),this.audioTrackController=new A["default"](this),this.keyLoader=new N["default"](this)}return o(t,null,[{key:"isSupported",value:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"version",get:function(){return"0.6.12"}},{key:"Events",get:function(){return s["default"]}},{key:"ErrorTypes",get:function(){return u.ErrorTypes}},{key:"ErrorDetails",get:function(){return u.ErrorDetails}},{key:"DefaultConfig",get:function(){return t.defaultConfig||(t.defaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,seekHoleNudgeDuration:.01,stalledInBufferedNudgeThreshold:10,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:R["default"],fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:p["default"],bufferController:y["default"],capLevelController:m["default"],fpsController:C["default"],streamController:w["default"],audioStreamController:_["default"],timelineController:O["default"],cueHandler:U["default"],enableCEA708Captions:!0,enableMP2TPassThrough:!1,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}),t.defaultConfig},set:function(e){t.defaultConfig=e}}]),o(t,[{key:"destroy",value:function(){P.logger.log("destroy"),this.trigger(s["default"].DESTROYING),this.detachMedia(),this.playlistLoader.destroy(),this.fragmentLoader.destroy(),this.levelController.destroy(),this.abrController.destroy(),this.bufferController.destroy(),this.capLevelController.destroy(),this.fpsController.destroy(),this.streamController.destroy(),this.audioStreamController.destroy(),this.timelineController.destroy(),this.audioTrackController.destroy(),this.keyLoader.destroy(),this.url=null,this.observer.removeAllListeners()}},{key:"attachMedia",value:function(t){P.logger.log("attachMedia"),this.media=t,this.trigger(s["default"].MEDIA_ATTACHING,{media:t})}},{key:"detachMedia",value:function(){P.logger.log("detachMedia"),this.trigger(s["default"].MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(t){P.logger.log("loadSource:"+t),this.url=t,this.trigger(s["default"].MANIFEST_LOADING,{url:t})}},{key:"startLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;P.logger.log("startLoad("+t+")"),this.levelController.startLoad(),this.streamController.startLoad(t),this.audioStreamController.startLoad(t)}},{key:"stopLoad",value:function(){P.logger.log("stopLoad"),this.levelController.stopLoad(),this.streamController.stopLoad(),this.audioStreamController.stopLoad()}},{key:"swapAudioCodec",value:function(){P.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){P.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){P.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){P.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){P.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.abrController.minAutoLevel)},set:function(t){P.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){P.logger.log("set startLevel:"+t),this.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this.abrController.autoLevelCapping},set:function(t){P.logger.log("set autoLevelCapping:"+t),this.abrController.autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"audioTracks",get:function(){return this.audioTrackController.audioTracks}},{key:"audioTrack",get:function(){return this.audioTrackController.audioTrack},set:function(t){this.audioTrackController.audioTrack=t}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}}]),t}();r["default"]=B},{1:1,10:10,11:11,12:12,13:13,26:26,28:28,34:34,35:35,36:36,4:4,43:43,45:45,48:48,5:5,6:6,7:7,8:8}],33:[function(t,e,r){"use strict";e.exports=t(32)["default"]},{32:32}],34:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(28),l=n(u),c=t(27),d=n(c),f=t(26),h=t(45),p=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l["default"].FRAG_LOADING));return r.loaders={},r}return a(e,t),s(e,[{key:"destroy",value:function(){var t=this.loaders;for(var e in t){var r=t[e];r&&r.destroy()}this.loaders={},d["default"].prototype.destroy.call(this)}},{key:"onFragLoading",value:function(t){var e=t.frag,r=e.type,n=this.loaders[r],i=this.hls.config;e.loaded=0,n&&(h.logger.warn("abort previous fragment loader for type:"+r),n.abort()),n=this.loaders[r]=e.loader="undefined"!=typeof i.fLoader?new i.fLoader(i):new i.loader(i);var o=void 0,a=void 0,s=void 0;o={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var u=e.byteRangeStartOffset,l=e.byteRangeEndOffset;isNaN(u)||isNaN(l)||(o.rangeStart=u,o.rangeEnd=l),a={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(o,a,s)}},{key:"loadsuccess",value:function(t,e,r){var n=t.data,i=r.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(l["default"].FRAG_LOADED,{payload:n,frag:i,stats:e})}},{key:"loaderror",value:function(t,e){var r=e.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(l["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t})}},{key:"loadtimeout",value:function(t,e){var r=e.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(l["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag})}},{key:"loadprogress",value:function(t,e,r){var n=e.frag;n.loaded=t.loaded,this.hls.trigger(l["default"].FRAG_LOAD_PROGRESS,{frag:n,stats:t})}}]),e}(d["default"]);r["default"]=p},{26:26,27:27,28:28,45:45}],35:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(28),l=n(u),c=t(27),d=n(c),f=t(26),h=t(45),p=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,l["default"].KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return a(e,t),s(e,[{key:"destroy",value:function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},d["default"].prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(t){var e=t.frag,r=e.type,n=this.loaders[r],i=e.decryptdata,o=i.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;n&&(h.logger.warn("abort previous key loader for type:"+r),n.abort()),e.loader=this.loaders[r]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var s=void 0,u=void 0,c=void 0;s={url:o,frag:e,responseType:"arraybuffer"},u={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,u,c)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(l["default"].KEY_LOADED,{frag:e}))}},{key:"loadsuccess",value:function(t,e,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(t.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(l["default"].KEY_LOADED,{frag:n})}},{key:"loaderror",value:function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(l["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})}},{key:"loadtimeout",value:function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(l["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),e}(d["default"]);r["default"]=p},{26:26,27:27,28:28,45:45}],36:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(2),l=n(u),c=t(28),d=n(c),f=t(27),h=n(f),p=t(26),g=t(40),y=n(g),v=t(45),m=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,b=/#EXT-X-MEDIA:(.*)/g,_=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT(INF): *(\d+(?:\.\d+)?)(?:,(.*))?)|(?:(?!#)()(\S.+))|(?:#EXT-X-(BYTERANGE): *(\d+(?:@\d+(?:\.\d+)?)?)|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(PROGRAM-DATE-TIME):(.+))|(?:#EXT-X-(VERSION):(\d+))|(?:(#)(.*):(.*))|(?:(#)(.*)))(?:.*)\r?\n?/g,T=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,d["default"].MANIFEST_LOADING,d["default"].LEVEL_LOADING,d["default"].AUDIO_TRACK_LOADING));return r.loaders={},r}return a(e,t),s(e,[{key:"destroy",value:function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},h["default"].prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(t){this.load(t.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(t){this.load(t.url,{type:"level",level:t.level,id:t.id})}},{key:"onAudioTrackLoading",value:function(t){this.load(t.url,{type:"audioTrack",id:t.id})}},{key:"load",value:function(t,e){var r=this.loaders[e.type];if(r){var n=r.context;if(n&&n.url===t)return void v.logger.trace("playlist request ongoing");v.logger.warn("abort previous loader for type:"+e.type),r.abort()}var i=this.hls.config,o=void 0,a=void 0,s=void 0,u=void 0;"manifest"===e.type?(o=i.manifestLoadingMaxRetry,a=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,u=i.manifestLoadingMaxRetryTimeout):(o=i.levelLoadingMaxRetry,a=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,u=i.levelLoadingMaxRetryTimeout,v.logger.log("loading playlist for level "+e.level)),r=this.loaders[e.type]=e.loader="undefined"!=typeof i.pLoader?new i.pLoader(i):new i.loader(i),e.url=t,e.responseType="";var l=void 0,c=void 0;l={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:u},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(e,l,c)}},{key:"resolve",value:function(t,e){return l["default"].buildAbsoluteURL(e,t)}},{key:"parseMasterPlaylist",value:function(t,e){var r=[],n=void 0;for(m.lastIndex=0;null!=(n=m.exec(t));){var i={},o=i.attrs=new y["default"](n[1]);i.url=this.resolve(n[2],e);var a=o.decimalResolution("RESOLUTION");a&&(i.width=a.width,i.height=a.height),i.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),i.name=o.NAME;var s=o.CODECS;if(s){s=s.split(/[ ,]+/);for(var u=0;u<s.length;u++){var l=s[u];-1!==l.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(l):i.audioCodec=l}}r.push(i)}return r}},{key:"parseMasterPlaylistMedia",value:function(t,e,r){var n=void 0,i=[];for(b.lastIndex=0;null!=(n=b.exec(t));){var o={},a=new y["default"](n[1]);a.TYPE===r&&(o.groupId=a["GROUP-ID"],o.name=a.NAME,o.type=r,o["default"]="YES"===a.DEFAULT,o.autoselect="YES"===a.AUTOSELECT,o.forced="YES"===a.FORCED,a.URI&&(o.url=this.resolve(a.URI,e)),o.lang=a.LANGUAGE,o.name||(o.name=o.lang),i.push(o))}return i}},{key:"createInitializationVector",value:function(t){for(var e=new Uint8Array(16),r=12;16>r;r++)e[r]=t>>8*(15-r)&255;return e}},{key:"fragmentDecryptdataFromLevelkey",value:function(t,e){var r=t;return t&&t.method&&t.uri&&!t.iv&&(r=this.cloneObj(t),r.iv=this.createInitializationVector(e)),r}},{key:"avc1toavcoti",value:function(t){var e,r=t.split(".");return r.length>2?(e=r.shift()+".",e+=parseInt(r.shift()).toString(16),e+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e}},{key:"cloneObj",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"parseLevelPlaylist",value:function(t,e,r,n){var i,o,a=0,s=0,u={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},l={method:null,key:null,iv:null,uri:null},c=0,d=null,f=null,h=null,p=null,g=null,m=null,b=[];for(_.lastIndex=0;null!==(o=_.exec(t));)switch(o.shift(),o=o.filter(function(t){return void 0!==t}),o[0]){case"PLAYLIST-TYPE":u.type=o[1].toUpperCase();break;case"MEDIA-SEQUENCE":a=u.startSN=parseInt(o[1]);break;case"TARGETDURATION":u.targetduration=parseFloat(o[1]);break;case"VERSION":u.version=parseInt(o[1]);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":c++,b.push(o);break;case"DISCONTINUITY-SEQ":c=parseInt(o[1]);break;case"BYTERANGE":var T=o[1].split("@");m=1===T.length?g:parseInt(T[1]),g=parseInt(T[0])+m;break;case"INF":h=parseFloat(o[1]),p=o[2]?o[2]:null,b.push(o);break;case"":if(!isNaN(h)){var w=a++;i=this.fragmentDecryptdataFromLevelkey(l,w);var k=o[1]?this.resolve(o[1],e):null;f={url:k,type:n,duration:h,title:p,start:s,sn:w,level:r,cc:c,decryptdata:i,programDateTime:d,tagList:b},null!==m&&(f.byteRangeStartOffset=m,f.byteRangeEndOffset=g),u.fragments.push(f),s+=h,h=null,p=null,m=null,d=null,b=[]}break;case"KEY":var E=o[1],S=new y["default"](E),O=S.enumeratedString("METHOD"),j=S.URI,C=S.hexadecimalInteger("IV");O&&(l={method:null,key:null,iv:null,uri:null},j&&"AES-128"===O&&(l.method=O,l.uri=this.resolve(j,e),l.key=null,l.iv=C));break;case"START":var x=o[1],A=new y["default"](x),P=A.decimalFloatingPoint("TIME-OFFSET");isNaN(P)||(u.startTimeOffset=P);break;case"PROGRAM-DATE-TIME":d=new Date(Date.parse(o[1])),b.push(o);break;case"#":o.shift(),b.push(o);break;default:v.logger.warn("line parsed but not handled: "+o)}return f&&!f.url&&(u.fragments.pop(),s-=f.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=a-1,u}},{key:"loadsuccess",value:function(t,e,r){var n=t.data,i=t.url,o=r.type,a=r.id,s=r.level,u=this.hls;if(this.loaders[o]=void 0,void 0!==i&&0!==i.indexOf("data:")||(i=r.url),e.tload=performance.now(),0===n.indexOf("#EXTM3U"))if(n.indexOf("#EXTINF:")>0){var l="audioTrack"!==o,c=this.parseLevelPlaylist(n,i,(l?s:a)||0,l?"main":"audio");"manifest"===o&&u.trigger(d["default"].MANIFEST_LOADED,{levels:[{url:i,details:c}],audioTracks:[],url:i,stats:e}),e.tparsed=performance.now(),c.targetduration?l?u.trigger(d["default"].LEVEL_LOADED,{details:c,level:s||0,id:a||0,stats:e}):u.trigger(d["default"].AUDIO_TRACK_LOADED,{details:c,id:a,stats:e}):u.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"invalid targetduration"})}else{var f=this.parseMasterPlaylist(n,i);if(f.length){var h=this.parseMasterPlaylistMedia(n,i,"AUDIO");if(h.length){var g=!1;h.forEach(function(t){t.url||(g=!0)}),g===!1&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(v.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}u.trigger(d["default"].MANIFEST_LOADED,{levels:f,audioTracks:h,url:i,stats:e})}else u.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no level found in manifest"})}else u.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(t,e){var r,n,i=e.loader;switch(e.type){case"manifest":r=p.ErrorDetails.MANIFEST_LOAD_ERROR,n=!0;break;case"level":r=p.ErrorDetails.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":r=p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,n=!1}i&&(i.abort(),this.loaders[e.type]=void 0),this.hls.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:i.url,loader:i,response:t,context:e})}},{key:"loadtimeout",value:function(t,e){var r,n,i=e.loader;switch(e.type){case"manifest":r=p.ErrorDetails.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":r=p.ErrorDetails.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":r=p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}i&&(i.abort(),this.loaders[e.type]=void 0),this.hls.trigger(d["default"].ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:i.url,loader:i,context:e})}}]),e}(h["default"]);r["default"]=T},{2:2,26:26,27:27,28:28,40:40,45:45}],37:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){n(this,t)}return i(t,null,[{key:"init",value:function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=o,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,u,a,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))}},{key:"box",value:function(t){for(var e,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,o=i;i--;)n+=r[i].byteLength;for(e=new Uint8Array(n),e[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=255&n,e.set(t,4),i=0,n=8;o>i;i++)e.set(r[i],n),n+=r[i].byteLength;return e}},{key:"hdlr",value:function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}},{key:"mdhd",value:function(e,r){return r*=e,t.box(t.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))}},{key:"mfhd",value:function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e));
}},{key:"moof",value:function(e,r,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,r))}},{key:"moov",value:function(e){for(var r=e.length,n=[];r--;)n[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))}},{key:"mvex",value:function(e){for(var r=e.length,n=[];r--;)n[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(n))}},{key:"mvhd",value:function(e,r){r*=e;var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24&255,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,n)}},{key:"sdtp",value:function(e){var r,n,i=e.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.box(t.types.sdtp,o)}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))}},{key:"avc1",value:function(e){var r,n,i,o=[],a=[];for(r=0;r<e.sps.length;r++)n=e.sps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));for(r=0;r<e.pps.length;r++)n=e.pps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));var s=t.box(t.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|e.sps.length].concat(o).concat([e.pps.length]).concat(a))),u=e.width,l=e.height;return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))}},{key:"mp4a",value:function(e){var r=e.audiosamplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))}},{key:"mp3",value:function(e){var r=e.audiosamplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))}},{key:"stsd",value:function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))}},{key:"tkhd",value:function(e){var r=e.id,n=e.duration*e.timescale,i=e.width,o=e.height;return t.box(t.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))}},{key:"traf",value:function(e,r){var n=t.sdtp(e),i=e.id;return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),t.trun(e,n.length+16+16+8+16+8+8),n)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"trex",value:function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,r){var n,i,o,a,s,u,l=e.samples||[],c=l.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;c>n;n++)i=l[n],o=i.duration,a=i.size,s=i.flags,u=i.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return t.box(t.types.trun,f)}},{key:"initSegment",value:function(e){t.types||t.init();var r,n=t.moov(e);return r=new Uint8Array(t.FTYP.byteLength+n.byteLength),r.set(t.FTYP),r.set(n,t.FTYP.byteLength),r}}]),t}();r["default"]=o},{}],38:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t(29),s=n(a),u=t(28),l=n(u),c=t(45),d=t(37),f=n(d),h=t(26);t(46);var p=function(){function t(e,r,n,o){i(this,t),this.observer=e,this.id=r,this.config=n,this.typeSupported=o,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR}return o(t,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(t,e,r,n,i,o,a,s,u){if(this.level=t,this.sn=e,this.ISGenerated||this.generateIS(r,n,a),this.ISGenerated)if(r.samples.length){var c=this.remuxAudio(r,a,s,u);if(n.samples.length){var d=void 0;c&&(d=c.endPTS-c.startPTS),this.remuxVideo(n,a,s,d)}}else{var f=void 0;n.samples.length&&(f=this.remuxVideo(n,a,s)),f&&r.codec&&this.remuxEmptyAudio(r,a,s,f)}i.samples.length&&this.remuxID3(i,a),o.samples.length&&this.remuxText(o,a),this.observer.trigger(l["default"].FRAG_PARSED,{id:this.id,level:this.level,sn:this.sn})}},{key:"generateIS",value:function(t,e,r){var n,i,o=this.observer,a=t.samples,s=e.samples,u=this.PES_TIMESCALE,d=this.typeSupported,p="audio/mp4",g={},y={id:this.id,level:this.level,sn:this.sn,tracks:g,unique:!1},v=void 0===this._initPTS;v&&(n=i=1/0),t.config&&a.length&&(t.timescale=t.audiosamplerate,t.timescale*t.duration>Math.pow(2,32)&&!function(){var e=function r(t,e){return e?r(e,t%e):t};t.timescale=t.audiosamplerate/e(t.audiosamplerate,t.isAAC?1024:1152)}(),c.logger.log("audio mp4 timescale :"+t.timescale),t.isAAC||(d.mpeg===!0?(p="audio/mpeg",t.codec=""):d.mp3===!0&&(t.codec="mp3")),g.audio={container:p,codec:t.codec,initSegment:f["default"].initSegment([t]),metadata:{channelCount:t.channelCount}},v&&(n=i=a[0].pts-u*r)),e.sps&&e.pps&&s.length&&(e.timescale=this.MP4_TIMESCALE,g.video={container:"video/mp4",codec:e.codec,initSegment:f["default"].initSegment([e]),metadata:{width:e.width,height:e.height}},v&&(n=Math.min(n,s[0].pts-u*r),i=Math.min(i,s[0].dts-u*r))),Object.keys(g).length?(o.trigger(l["default"].FRAG_PARSING_INIT_SEGMENT,y),this.ISGenerated=!0,v&&(this._initPTS=n,this._initDTS=i)):o.trigger(l["default"].ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(t,e,r,n){var i,o,a,s,u,d,h,p,g=8,y=this.PES_TIMESCALE,v=this.PES2MP4SCALEFACTOR,m=t.samples,b=[];m.sort(function(t,e){return t.dts-e.dts});var _=m.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(0>_){c.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(_/90)+" ms to overcome this issue");for(var T=0;T<m.length;T++)m[T].dts+=_}var w=void 0;w=r?this.nextAvcDts:e*y;var k=m[0];u=Math.max(this._PTSNormalize(k.dts-this._initDTS,w),0),s=Math.max(this._PTSNormalize(k.pts-this._initDTS,w),0);var E=Math.round((u-w)/90);r&&E&&(E>1?c.logger.log("AVC:"+E+" ms hole between fragments detected,filling it"):-1>E&&c.logger.log("AVC:"+-E+" ms overlapping between fragments detected"),u=w,m[0].dts=u+this._initDTS,s=Math.max(s-E,w),m[0].pts=s+this._initDTS,c.logger.log("Video/PTS/DTS adjusted: "+Math.round(s/90)+"/"+Math.round(u/90)+",delta:"+E+" ms")),d=u,k=m[m.length-1],p=Math.max(this._PTSNormalize(k.dts-this._initDTS,w),0),h=Math.max(this._PTSNormalize(k.pts-this._initDTS,w),0),h=Math.max(h,p);var S=navigator.vendor,O=navigator.userAgent,j=S&&S.indexOf("Apple")>-1&&O&&!O.match("CriOS");j&&(i=Math.round((p-u)/(v*(m.length-1))));for(var C=0;C<m.length;C++){var x=m[C];j?x.dts=u+C*v*i:(x.dts=Math.max(this._PTSNormalize(x.dts-this._initDTS,w),u),x.dts=Math.round(x.dts/v)*v),x.pts=Math.max(this._PTSNormalize(x.pts-this._initDTS,w),x.dts),x.pts=Math.round(x.pts/v)*v}o=new Uint8Array(t.len+4*t.nbNalu+8);var A=new DataView(o.buffer);A.setUint32(0,o.byteLength),o.set(f["default"].types.mdat,4);for(var P=0;P<m.length;P++){for(var L=m[P],R=0,D=void 0;L.units.units.length;){var M=L.units.units.shift();A.setUint32(g,M.data.byteLength),g+=4,o.set(M.data,g),g+=M.data.byteLength,R+=4+M.data.byteLength}if(j)D=Math.max(0,i*Math.round((L.pts-L.dts)/(v*i)));else{if(P<m.length-1)i=m[P+1].dts-L.dts;else{var I=this.config,N=L.dts-m[P>0?P-1:P].dts;if(I.stretchShortVideoTrack){var F=I.maxBufferHole,U=I.maxSeekHole,B=Math.floor(Math.min(F,U)*y),G=(n?s+n*y:this.nextAacPts)-L.pts;G>B?(i=G-N,0>i&&(i=N),c.logger.log("It is approximately "+G/90+" ms to the next segment; using duration "+i/90+" ms for the last video frame.")):i=N}else i=N}i/=v,D=Math.round((L.pts-L.dts)/v)}b.push({size:R,duration:i,cts:D,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:L.key?2:1,isNonSync:L.key?0:1}})}this.nextAvcDts=p+i*v;var H=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var V=b[0].flags;V.dependsOn=2,V.isNonSync=0}t.samples=b,a=f["default"].moof(t.sequenceNumber++,u/v,t),t.samples=[];var W={id:this.id,level:this.level,sn:this.sn,data1:a,data2:o,startPTS:s/y,endPTS:(h+v*i)/y,startDTS:u/y,endDTS:this.nextAvcDts/y,type:"video",nb:b.length,dropped:H};return this.observer.trigger(l["default"].FRAG_PARSING_DATA,W),W}},{key:"remuxAudio",value:function(t,e,r,n){var i,o,a,u,d,h,p,g,y,v,m,b,_,T,w,k,E=this.PES_TIMESCALE,S=t.timescale,O=E/S,j=t.timescale*(t.isAAC?1024:1152)/t.audiosamplerate,C=j*O,x=8,A=[],P=[];if(t.samples.sort(function(t,e){return t.pts-e.pts}),P=t.samples,k=this.nextAacPts,r|=P.length&&k&&(Math.abs(e-k/E)<.1||Math.abs(P[0].pts-k-this._initDTS)<20*C),r||(k=e*E),n&&t.isAAC)for(var L=0,R=k;L<P.length;){var D=P[L],M=this._PTSNormalize(D.pts-this._initDTS,k),I=M-R;if(-C>=I)c.logger.warn("Dropping 1 audio frame @ "+Math.round(R/90)/1e3+"s due to "+Math.round(Math.abs(I/90))+" ms overlap."),P.splice(L,1),t.len-=D.unit.length;else if(I>=C){var N=Math.round(I/C);c.logger.warn("Injecting "+N+" audio frame @ "+Math.round(R/90)/1e3+"s due to "+Math.round(I/90)+" ms gap.");for(var F=0;N>F;F++)w=R+this._initDTS,w=Math.max(w,this._initDTS),T=s["default"].getSilentFrame(t.channelCount),T||(c.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),T=D.unit.slice(0)),P.splice(L,0,{unit:T,pts:w,dts:w}),t.len+=T.length,R+=C,L+=1;D.pts=D.dts=R+this._initDTS,R+=C,L+=1}else Math.abs(I)>.1*C,R+=C,0===L?D.pts=D.dts=this._initDTS+k:D.pts=D.dts=P[L-1].pts+C,L+=1}for(;P.length;){if(o=P.shift(),u=o.unit,v=o.pts-this._initDTS,m=o.dts-this._initDTS,void 0!==y)b=this._PTSNormalize(v,y),_=this._PTSNormalize(m,y),a.duration=Math.round((_-y)/O);else{b=this._PTSNormalize(v,k),_=this._PTSNormalize(m,k);var U=Math.round(1e3*(b-k)/E),B=0;if(r&&U){if(U>0)B=Math.round((b-k)/C),c.logger.log(U+" ms hole between AAC samples detected,filling it"),B>0&&(T=s["default"].getSilentFrame(t.channelCount),T||(T=u.slice(0)),t.len+=B*T.length);else if(-12>U){c.logger.log(-U+" ms overlapping between AAC samples detected, drop frame"),t.len-=u.byteLength;continue}b=_=k}if(p=Math.max(0,b),g=Math.max(0,_),!(t.len>0))return;d=new Uint8Array(t.len+8),i=new DataView(d.buffer),i.setUint32(0,d.byteLength),d.set(f["default"].types.mdat,4);for(var G=0;B>G;G++)w=b-(B-G)*C,T=s["default"].getSilentFrame(t.channelCount),T||(c.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),T=u.slice(0)),d.set(T,x),x+=T.byteLength,a={size:T.byteLength,cts:0,duration:t.isAAC?1024:1152,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(a)}d.set(u,x),x+=u.byteLength,a={size:u.byteLength,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(a),y=_}var H=0,V=A.length;if(V>=2&&(H=A[V-2].duration,a.duration=H),V){this.nextAacPts=b+O*H,t.len=0,t.samples=A,h=f["default"].moof(t.sequenceNumber++,g/O,t),t.samples=[];var W={id:this.id,level:this.level,sn:this.sn,data1:h,data2:d,startPTS:p/E,endPTS:this.nextAacPts/E,startDTS:g/E,endDTS:(_+O*H)/E,type:"audio",nb:V};return this.observer.trigger(l["default"].FRAG_PARSING_DATA,W),W}return null}},{key:"remuxEmptyAudio",value:function(t,e,r,n){var i=this.PES_TIMESCALE,o=t.timescale?t.timescale:t.audiosamplerate,a=i/o,u=this.nextAacPts,l=(void 0!==u?u:n.startDTS*i)+this._initDTS,d=n.endDTS*i+this._initDTS,f=1024,h=a*f,p=Math.ceil((d-l)/h),g=s["default"].getSilentFrame(t.channelCount);if(c.logger.warn("remux empty Audio"),!g)return void c.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var y=[],v=0;p>v;v++){var m=l+v*h;y.push({unit:g.slice(0),pts:m,dts:m}),t.len+=g.length}t.samples=y,this.remuxAudio(t,e,r)}},{key:"remuxID3",value:function(t,e){var r,n=t.samples.length;if(n){for(var i=0;n>i;i++)r=t.samples[i],r.pts=(r.pts-this._initPTS)/this.PES_TIMESCALE,r.dts=(r.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(l["default"].FRAG_PARSING_METADATA,{id:this.id,level:this.level,sn:this.sn,samples:t.samples})}t.samples=[],e=e}},{key:"remuxText",value:function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var r,n=t.samples.length;if(n){for(var i=0;n>i;i++)r=t.samples[i],r.pts=(r.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(l["default"].FRAG_PARSING_USERDATA,{id:this.id,level:this.level,sn:this.sn,samples:t.samples})}t.samples=[],e=e}},{key:"_PTSNormalize",value:function(t,e){var r;if(void 0===e)return t;for(r=t>e?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}},{key:"passthrough",get:function(){return!1}}]),t}();r["default"]=p},{26:26,28:28,29:29,37:37,45:45,46:46}],39:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=t(28),s=n(a),u=function(){function t(e,r){i(this,t),this.observer=e,this.id=r,this.ISGenerated=!1}return o(t,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(t,e,r,n,i,o){var a=this.observer;if(!this.ISGenerated){var u={},l={id:this.id,tracks:u,unique:!0},c=e,d=c.codec;d&&(l.tracks.video={container:c.container,codec:d,metadata:{width:c.width,height:c.height}}),c=t,d=c.codec,d&&(l.tracks.audio={container:c.container,codec:d,metadata:{channelCount:c.channelCount}}),this.ISGenerated=!0,a.trigger(s["default"].FRAG_PARSING_INIT_SEGMENT,l)}a.trigger(s["default"].FRAG_PARSING_DATA,{id:this.id,data1:o,startPTS:i,startDTS:i,type:"audiovideo",nb:1,dropped:0})}},{key:"passthrough",get:function(){return!0}}]),t}();r["default"]=u},{28:28}],40:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=/^(\d+)x(\d+)$/,a=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function t(e){n(this,t),"string"==typeof e&&(e=t.parseAttrList(e));for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}return i(t,[{key:"decimalInteger",value:function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"hexadecimalInteger",value:function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)r[n]=parseInt(e.slice(2*n,2*n+2),16);return r}return null}},{key:"hexadecimalIntegerAsNumber",value:function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"decimalFloatingPoint",value:function(t){return parseFloat(this[t])}},{key:"enumeratedString",value:function(t){return this[t]}},{key:"decimalResolution",value:function(t){var e=o.exec(this[t]);return null!==e?{width:parseInt(e[1],10),height:parseInt(e[2],10)}:void 0}}],[{key:"parseAttrList",value:function(t){var e,r={};for(a.lastIndex=0;null!==(e=a.exec(t));){var n=e[2],i='"';0===n.indexOf(i)&&n.lastIndexOf(i)===n.length-1&&(n=n.slice(1,-1)),r[e[1]]=n}return r}}]),t}();r["default"]=s},{}],41:[function(t,e,r){"use strict";var n={search:function(t,e){for(var r=0,n=t.length-1,i=null,o=null;n>=r;){i=(r+n)/2|0,o=t[i];var a=e(o);if(a>0)r=i+1;else{if(!(0>a))return o;n=i-1}}return null}};e.exports=n},{}],42:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},a=function(t){var e=t;return o.hasOwnProperty(t)&&(e=o[t]),String.fromCharCode(e)},s=15,u=32,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var r=this.verboseFilter[t];this.verboseLevel>=r}},g=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},y=function(){function t(e,r,i,o,a){n(this,t),this.foreground=e||"white",this.underline=r||!1,this.italics=i||!1,this.background=o||"black",this.flash=a||!1}return i(t,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var n=e[r];t.hasOwnProperty(n)&&(this[n]=t[n])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash}},{key:"copy",value:function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),t}(),v=function(){function t(e,r,i,o,a,s){n(this,t),this.uchar=e||" ",this.penState=new y(r,i,o,a,s)}return i(t,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(t,e){this.uchar=t,this.penState.copy(e)}},{key:"setPenState",value:function(t){this.penState.copy(t)}},{key:"equals",value:function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)}},{key:"copy",value:function(t){this.uchar=t.uchar,this.penState.copy(t.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),t}(),m=function(){function t(){n(this,t),this.chars=[];for(var e=0;u>e;e++)this.chars.push(new v);this.pos=0,this.currPenState=new y}return i(t,[{key:"equals",value:function(t){for(var e=!0,r=0;u>r;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e}},{key:"copy",value:function(t){for(var e=0;u>e;e++)this.chars[e].copy(t.chars[e])}},{key:"isEmpty",value:function(){for(var t=!0,e=0;u>e;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t}},{key:"setCursor",value:function(t){this.pos!==t&&(this.pos=t),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=u)}},{key:"moveCursor",value:function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;e+1>r;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(t){t>=144&&this.backSpace();var e=a(t);return this.pos>=u?void p.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),void this.moveCursor(1))}},{key:"clearFromPos",value:function(t){var e;for(e=t;u>e;e++)this.chars[e].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var t=[],e=!0,r=0;u>r;r++){var n=this.chars[r].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")}},{key:"setPenStyles",value:function(t){this.currPenState.setStyles(t);var e=this.chars[this.pos];e.setPenState(this.currPenState)}}]),t}(),b=function(){function t(){n(this,t),this.rows=[];for(var e=0;s>e;e++)this.rows.push(new m);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return i(t,[{key:"reset",value:function(){for(var t=0;s>t;t++)this.rows[t].clear();this.currRow=s-1}},{key:"equals",value:function(t){for(var e=!0,r=0;s>r;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e}},{key:"copy",value:function(t){for(var e=0;s>e;e++)this.rows[e].copy(t.rows[e])}},{key:"isEmpty",value:function(){for(var t=!0,e=0;s>e;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t}},{key:"backSpace",value:function(){var t=this.rows[this.currRow];t.backSpace()}},{key:"clearToEndOfRow",value:function(){var t=this.rows[this.currRow];t.clearToEndOfRow()}},{key:"insertChar",value:function(t){var e=this.rows[this.currRow];e.insertChar(t)}},{key:"setPen",value:function(t){var e=this.rows[this.currRow];e.setPenStyles(t)}},{key:"moveCursor",value:function(t){var e=this.rows[this.currRow];e.moveCursor(t)}},{key:"setCursor",value:function(t){p.log("INFO","setCursor: "+t);var e=this.rows[this.currRow];e.setCursor(t)}},{key:"setPAC",value:function(t,e){p.log("INFO","pacData = "+JSON.stringify(t));var r=t.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(var n=0;s>n;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,o=e.rows[i].cueStartTime;if(o&&o<p.time)for(n=0;n<this.nrRollUpRows;n++)this.rows[r-this.nrRollUpRows+n+1].copy(e.rows[i+n])}this.currRow=r;var a=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,l=Math.max(u-1,0);a.setCursor(t.indent),t.color=a.chars[l].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(c)}},{key:"setBkgData",value:function(t){p.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)}},{key:"setRollUpRows",value:function(t){this.nrRollUpRows=t}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void p.log("DEBUG","roll_up but nrRollUpRows not set yet");p.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),p.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(t){t=t||!1;for(var e=[],r="",n=-1,i=0;s>i;i++){var o=this.rows[i].getTextString();o&&(n=i+1,t?e.push("Row "+n+": '"+o+"'"):e.push(o.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r}},{key:"getTextAndFormat",value:function(){return this.rows}}]),t}(),_=function(){function t(e,r){n(this,t),this.chNr=e,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new b,this.nonDisplayedMemory=new b,this.lastOutputScreen=new b,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return i(t,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(t){this.outputFilter=t}},{key:"setPAC",value:function(t){this.writeScreen.setPAC(t,this.lastOutputScreen)}},{key:"setBkgData",value:function(t){this.writeScreen.setBkgData(t)}},{key:"setMode",value:function(t){t!==this.mode&&(this.mode=t,p.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset(),this.lastOutputScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)}},{key:"insertChars",value:function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(t){p.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(t){p.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)}},{key:"ccMIDROW",value:function(t){var e={flash:!1};if(e.underline=t%2===1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=n[r]}p.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)}},{key:"outputDataUpdate",value:function(){var t=p.time;null!==t&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(t,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}}]),t}(),T=function(){function t(e,r,i){n(this,t),this.field=e||1,this.outputs=[r,i],this.channels=[new _(1,r),new _(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}}return i(t,[{key:"getHandler",value:function(t){return this.channels[t].getHandler()}},{key:"setHandler",value:function(t,e){this.channels[t].setHandler(e)}},{key:"addData",value:function(t,e){var r,n,i,o=!1;this.lastTime=t,p.setTime(t);for(var a=0;a<e.length;a+=2)if(n=127&e[a],i=127&e[a+1],0!==n||0!==i){if(p.log("DATA","["+g([e[a],e[a+1]])+"] -> ("+g([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(o=this.parseChars(n,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else p.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:o?this.dataCounters["char"]+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+g([n,i])+" orig: "+g([e[a],e[a+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(t,e){var r=null,n=(20===t||28===t)&&e>=32&&47>=e,i=(23===t||31===t)&&e>=33&&35>=e;if(!n&&!i)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+g([t,e])+") is dropped"),!0;r=20===t||23===t?1:2;var o=this.channels[r-1];return 20===t||28===t?32===e?o.ccRCL():33===e?o.ccBS():34===e?o.ccAOF():35===e?o.ccAON():36===e?o.ccDER():37===e?o.ccRU(2):38===e?o.ccRU(3):39===e?o.ccRU(4):40===e?o.ccFON():41===e?o.ccRDC():42===e?o.ccTR():43===e?o.ccRTD():44===e?o.ccEDM():45===e?o.ccCR():46===e?o.ccENM():47===e&&o.ccEOC():o.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0}},{key:"parseMidrow",value:function(t,e){var r=null;if((17===t||25===t)&&e>=32&&47>=e){if(r=17===t?1:2,r!==this.currChNr)return p.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[r-1];return n.ccMIDROW(e),p.log("DEBUG","MIDROW ("+g([t,e])+")"),!0}return!1}},{key:"parsePAC",value:function(t,e){var r=null,n=null,i=(t>=17&&23>=t||t>=25&&31>=t)&&e>=64&&127>=e,o=(16===t||24===t)&&e>=64&&95>=e;
if(!i&&!o)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=23>=t?1:2,n=e>=64&&95>=e?1===r?l[t]:d[t]:1===r?c[t]:f[t];var a=this.interpretPAC(n,e),s=this.channels[r-1];return s.setPAC(a),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0}},{key:"interpretPAC",value:function(t,e){var r=e,n={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,n.underline=1===(1&r),13>=r?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:15>=r?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n}},{key:"parseChars",value:function(t,e){var r=null,n=null,i=null;if(t>=25?(r=2,i=t-8):(r=1,i=t),i>=17&&19>=i){var o=e;o=17===i?e+80:18===i?e+112:e+144,p.log("INFO","Special char '"+a(o)+"' in channel "+r),n=[o]}else t>=32&&127>=t&&(n=0===e?[t]:[t,e]);if(n){var s=g(n);p.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n}},{key:"parseBackgroundAttributes",value:function(t,e){var r,n,i,o,a=(16===t||24===t)&&e>=32&&47>=e,s=(23===t||31===t)&&e>=45&&47>=e;return!(!a&&!s||(r={},16===t||24===t?(n=Math.floor((e-32)/2),r.background=h[n],e%2===1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0)),i=24>t?1:2,o=this.channels[i-1],o.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,0))}},{key:"reset",value:function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)}}]),t}();r["default"]=T},{}],43:[function(t,e,r){"use strict";var n={newCue:function(t,e,r,n){for(var i,o,a,s,u,l=window.VTTCue||window.TextTrackCue,c=0;c<n.rows.length;c++)if(i=n.rows[c],a=!0,s=0,u="",!i.isEmpty()){for(var d=0;d<i.chars.length;d++)i.chars[d].uchar.match(/\s/)&&a?s++:(u+=i.chars[d].uchar,a=!1);i.cueStartTime=e,o=new l(e,r,u.trim()),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=c+1:o.line=c>7?c-2:c+1,o.align="left",o.position=Math.max(0,Math.min(100,100*(s/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(o)}}};e.exports=n},{}],44:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return i(t,[{key:"sample",value:function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_}}]),t}();r["default"]=o},{}],45:[function(t,e,r){"use strict";function n(){}function i(t,e){return e="["+t+"] > "+e}function o(t){var e=self.console[t];return e?function(){for(var r=arguments.length,n=Array(r),o=0;r>o;o++)n[o]=arguments[o];n[0]&&(n[0]=i(t,n[0])),e.apply(self.console,n)}:n}function a(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];r.forEach(function(e){l[e]=t[e]?t[e].bind(t):o(e)})}Object.defineProperty(r,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u={trace:n,debug:n,log:n,warn:n,info:n,error:n},l=u;r.enableLogs=function(t){if(t===!0||"object"===("undefined"==typeof t?"undefined":s(t))){a(t,"debug","log","info","warn","error");try{l.log()}catch(t){l=u}}else l=u},r.logger=l},{}],46:[function(t,e,r){"use strict";"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(t,e){var r=new Uint8Array(this);void 0===e&&(e=r.length);for(var n=new ArrayBuffer(e-t),i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o+t];return n})},{}],47:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){n(this,t)}return i(t,null,[{key:"toString",value:function(t){for(var e="",r=t.length,n=0;r>n;n++)e+="["+t.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e}}]),t}();r["default"]=o},{}],48:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t(45),a=function(){function t(e){n(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return i(t,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var t,e=this.context;t="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.open("GET",e.url,!0),e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.responseType=e.responseType;var r=this.stats;r.tfirst=0,r.loaded=0,this.xhrSetup&&this.xhrSetup(t,e.url),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()}},{key:"readystatechange",value:function(t){var e=t.currentTarget,r=e.readyState,n=this.stats,i=this.context,a=this.config;if(!n.aborted&&(window.clearTimeout(this.requestTimeout),r>=2&&(0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout-(n.tfirst-n.trequest))),4===r))){var s=e.status;if(s>=200&&300>s){n.tload=Math.max(n.tfirst,performance.now());var u=void 0,l=void 0;"arraybuffer"===i.responseType?(u=e.response,l=u.byteLength):(u=e.responseText,l=u.length),n.loaded=n.total=l;var c={url:e.responseURL,data:u};this.callbacks.onSuccess(c,n,i)}else n.retry>=a.maxRetry||s>=400&&499>s?(o.logger.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:e.statusText},i)):(o.logger.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}}},{key:"loadtimeout",value:function(){o.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total);var r=this.callbacks.onProgress;r&&r(e,this.context,null)}}]),t}();r["default"]=a},{45:45}]},{},[33])(33)}),function(){"use strict";function t(t,e,r,n,i,o,a,s,u,l,c,d,f){var h=this;h.appLink=!1;var p=r.data;h.catColor=r.color,h.catGroups=r.cat;var g;h.playMe=function(){if(h.PlayingData=p,Hls.isSupported()){var t=document.getElementById("video");g=new Hls,g.loadSource(p.stream),g.attachMedia(t),g.on(Hls.Events.MANIFEST_PARSED,function(){t.play()})}},h.playMe(),h.gotoTop=function(){f.scrollTo(0,0)},h.playOther=function(t){if(h.PlayingData=t,g){var e=document.getElementById("video");g.loadSource(t.stream),g.attachMedia(e),g.on(Hls.Events.MANIFEST_PARSED,function(){e.play()})}h.gotoTop()},h.appLinkOn=function(){h.appLink=!0},h.appLinkOff=function(){h.appLink=!1},h.secondsToTime=function(t){var e=Math.floor(t/3600),r=t%3600,n=Math.floor(r/60),i=r%60,o=Math.ceil(i);10>e&&(e="0"+e),10>n&&(n="0"+n),10>o&&(o="0"+o);var a=e+":"+n+":"+o;return a}}t.$inject=["$scope","$state","$localStorage","$sessionStorage","$stateParams","$timeout","toastr","$log","MainService","$sce","_","VideoHandler","$window"],angular.module("istream").controller("VideoController",t)}(),function(){"use strict";function t(t,e,r,n,i,o,a,s,u,l,c,d){var f=this;f.count=2,f.banner="test",f.videoPlayer=!1,f.videoAll=!1,f.appLink=!1,f.colors=["#058DC7","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"],f.getVideos=function(){f.catGroups=[],u.getVideosList({},function(t){var e=0;f.dataList=t,f.category=c.groupBy(f.dataList.videos,"category"),c.each(f.category,function(t,r){f.catGroups.push({category:r,items:t,color:f.colors[e]}),e++})},function(e){console.log(e),t.error=!0})},f.getVideos(),f.playMe=function(t,r,i){e.data=t,e.color=r,e.cat=i,n.go("video")},f.appLinkOn=function(){f.appLink=!0},f.appLinkOff=function(){f.appLink=!1},f.viewAll=function(t,r){e.cat=t,e.color=r,n.go("category")},f.secondsToTime=function(t){var e=Math.floor(t/3600),r=t%3600,n=Math.floor(r/60),i=r%60,o=Math.ceil(i);10>e&&(e="0"+e),10>n&&(n="0"+n),10>o&&(o="0"+o);var a=e+":"+n+":"+o;return a}}t.$inject=["$scope","$localStorage","$sessionStorage","$state","$stateParams","$timeout","toastr","$log","MainService","$sce","_","VideoHandler"],angular.module("istream").controller("MainController",t)}(),function(){"use strict";function t(t,e,r,n,i,o,a,s,u,l,c,d){var f=this;f.catGroups=r.cat,f.playMe=function(t,n){r.data=t,r.color=n,e.go("video")},f.resetStorage=function(){e.go("category")},f.secondsToTime=function(t){var e=Math.floor(t/3600),r=t%3600,n=Math.floor(r/60),i=r%60,o=Math.ceil(i);10>e&&(e="0"+e),10>n&&(n="0"+n),10>o&&(o="0"+o);var a=e+":"+n+":"+o;return a}}t.$inject=["$scope","$state","$localStorage","$sessionStorage","$stateParams","$timeout","toastr","$log","MainService","$sce","_","VideoHandler"],angular.module("istream").controller("CategoryController",t)}(),angular.module("istream").factory("VideoHandler",VideoHandler),angular.module("istream").factory("MainService",MainService),function(){"use strict";function t(t){t.debug("runBlock end")}t.$inject=["$log"],angular.module("istream").run(t)}(),function(){"use strict";function t(t,e){e.otherwise("/home"),t.state("home",{url:"/home",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"vm"}).state("video",{url:"/video",templateUrl:"app/main/videoPlayer.html",controller:"VideoController",controllerAs:"vm"}).state("category",{url:"/category",templateUrl:"app/main/category.html",controller:"CategoryController",controllerAs:"vm"})}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("istream").config(t)}(),function(){"use strict";angular.module("istream").constant("malarkey",malarkey).constant("moment",moment).constant("API","http://video.47billion.com/rest/o/v1/")}(),function(){"use strict";function t(t,e){t.debugEnabled(!0),e.allowHtml=!0,e.timeOut=3e3,e.positionClass="toast-top-right",e.preventDuplicates=!0,e.progressBar=!0}t.$inject=["$logProvider","toastrConfig"],angular.module("istream").config(t)}(),angular.module("istream").run(["$templateCache",function(t){t.put("app/main/category.html",'<div id=container class=container><div><acme-navbar creation-date=main.creationDate></acme-navbar></div><!--videos cat--><div class="panel panel-default" style="margin-top: 51px"><div class="panel-heading text-uppercase" style="background: {{vm.catGroups.color}}">{{vm.catGroups.category}} ( {{vm.catGroups.items.length}} )</div><div class=panel-body><div class=col-xs-6 style="padding: 0" ng-repeat="row in vm.catGroups.items"><div class=thumbnail><a ng-click="vm.playMe(row, vm.catGroups.color)"><img ng-src={{row.thumbnail}}></a><div class=caption><h5>{{row.title}}</h5><!--<p><span class="label label-default" ng-repeat="row1 in row.tags">{{row1}}</span></p>--> <span class=duration>{{vm.secondsToTime(row.duration)}}</span></div></div></div></div></div></div>'),t.put("app/main/main.html",'<style>.container {\n    position: relative;\n  }\n  .watch-later-popup {\n    background: rgba(0, 0, 0, 0.9);\n    height: 100%;\n    max-height: 680px;\n    z-index: 1;\n  }\n\n  .watch-later-popup .close-popup {\n    margin: 60px 0 0 0;\n    color: #c00;\n  }\n  .donwload-app-btn{\n    margin-top: 30%;\n  }</style><div id=container class=container style="min-height: 680px"><div><acme-navbar creation-date=main.creationDate></acme-navbar></div><!--download app--><nav class="watch-later-popup navbar navbar-static-top" ng-if=vm.appLink><div class=col-xs-12><div class="close-popup pull-right" ng-click=vm.appLinkOff()><span class="glyphicon glyphicon-remove"></span></div><div class=text-center style="margin-top: 200px"><a href=http://video.47billion.com/MStream-v0.5.1-demo_13Dec.apk download><img src=assets/images/Google-Play-button.png style="width: 60%"></a><br><br><br><img src=assets/images/App-Store-Button.png style="width: 60%"></div></div></nav><div class="jumbotron text-center" style="background-image: url({{vm.dataList.banner.iUrl}})" ng-if="!vm.videoPlayer && !vm.videoAll"><!--<h1></h1>--><!--<p class="lead">{{vm.dataList.banner.title}}</p>--><p class=donwload-app-btn><button type=button class="btn btn-lg btn-success" ng-click=vm.appLinkOn()>Download App Now</button></p></div><!--videos--><div><div class="panel panel-default" ng-if=!vm.videoAll ng-repeat="cat in vm.catGroups" id={{cat.category}}><div class="panel-heading text-uppercase" style="background: {{cat.color}}"><span class="pull-right view-all" ng-click=vm.viewAll(cat)><span class="glyphicon glyphicon-menu-right"></span> </span>{{cat.category}} [ {{cat.items.length}} ]</div><div class=panel-body><div class=col-xs-6 style="padding: 0" ng-repeat="row in cat.items | limitTo:vm.count"><!--<div class="col-xs-6" style="padding: 0;" ng-repeat="row in cat.items">--><div class=thumbnail><!--<a ng-click="vm.playMe(row)" ui-sref="video({videoData: row})"><img ng-src="{{row.thumbnail}}"></a>--> <a ng-click="vm.playMe(row, cat.color, cat)"><img ng-src={{row.thumbnail}}> <span class="glyphicon glyphicon glyphicon-play-circle play-icon"></span></a><div class=caption><h5>{{row.title}}</h5><!--<p><span class="label label-default" ng-repeat="row1 in row.tags">{{row1}}</span> </p>--> <span class=duration>{{vm.secondsToTime(row.duration)}}</span></div></div></div></div></div></div></div>'),t.put("app/main/videoPlayer.html",'<style>.container {\n    position: relative;\n  }\n\n  .thumbnail .caption h5 {\n    color: #efde3e;\n    line-height: 30px;\n    font-size: 16px;\n  }\n\n  .category .thumbnail .caption h5 {\n    padding: 0px !important;\n    font-size: 12px;\n    color: #dadada;\n    font-weight: 400;\n    line-height: 14px;\n    margin: 0px !important;\n  }\n\n  .watch-later-popup {\n    background: rgba(0, 0, 0, 0.9);\n    height: 100%;\n    max-height: 680px;\n    z-index: 1;\n  }\n\n  .watch-later-popup .close-popup {\n    margin: 60px 0 0 0;\n    color: #c00;\n  }</style><div id=container class=container style="min-height: 680px"><div><acme-navbar creation-date=main.creationDate></acme-navbar></div><!--watch later--><nav class="watch-later-popup navbar navbar-static-top" ng-if=vm.appLink><div class=col-xs-12><div class="close-popup pull-right" ng-click=vm.appLinkOff()><span class="glyphicon glyphicon-remove"></span></div><div class=text-center style="margin-top: 200px"><a href=http://video.47billion.com/MStream-v0.5.1-demo_13Dec.apk download><img src=assets/images/Google-Play-button.png style="width: 60%"></a><br><br><br><img src=assets/images/App-Store-Button.png style="width: 60%"></div></div></nav><!--player--><div class=row><div class=col-xs-12 style="margin-top: 51px"><div class=thumbnail style="border: none !important"><div style="background: #000"><video width=100% controls id=video></video></div><div class=caption style="background: #111; padding: 15px !important"><h5><span class="pull-left category" style="background: {{vm.catColor}}">{{vm.PlayingData.category}}</span>{{vm.PlayingData.title}}</h5><p><span class="label label-default" ng-repeat="row1 in vm.PlayingData.tags">{{row1}}</span></p><p class=duration>{{vm.secondsToTime(vm.PlayingData.duration)}}</p><p class=watch-later ng-click=vm.appLinkOn()><span class="glyphicon glyphicon-plus"></span> Watch Later</p></div></div></div></div><!--videos cat--><div class="panel panel-default category"><div class="panel-heading text-uppercase" style="background: {{vm.catGroups.color}}">{{vm.catGroups.category}} ( {{vm.catGroups.items.length}} )</div><div class=panel-body><div class=col-xs-6 style="padding: 0" ng-repeat="row in vm.catGroups.items"><div class=thumbnail><a ng-click="vm.playOther(row, vm.catGroups.color)"><img ng-src={{row.thumbnail}}></a><div class=caption><h5>{{row.title}}</h5><span class=duration>{{vm.secondsToTime(row.duration)}}</span></div></div></div></div></div></div>'),t.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse"><div class=container-fluid><div class=navbar-header style="width: 100%"><a class=navbar-brand href=#/home ng-if=vm.home style="padding: 10px"><img src=../assets/images/24fps_logo.png height=100%><!--<span class="glyphicon glyphicon-menu-hamburger"></span>--> </a><a class=navbar-brand href=#/home ng-if=vm.videoPlayerCategory><span class="glyphicon glyphicon-chevron-left"></span> </a><a class=navbar-brand href=#/home ng-if=vm.videoPlayer><span class="glyphicon glyphicon-chevron-left"></span></a></div><!--<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6">--><!--<ul class="nav navbar-nav">--><!--<li class="active"><a ng-href="#">Home</a></li>--><!--<li><a ng-href="#">About</a></li>--><!--<li><a ng-href="#">Contact</a></li>--><!--</ul>--><!--</div>--></div></nav>')}]);
//# sourceMappingURL=../maps/scripts/app-34ae77e603.js.map
